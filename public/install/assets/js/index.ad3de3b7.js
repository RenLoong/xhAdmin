import{u as k}from"./app.37dce1ba.js";import{d as I,G as $,r as h,H as D,s as F,n as H,o as p,m as u,F as R,q as w,u as B,t as C}from"./.pnpm.e7cb82db.js";import{a as r}from"./index.7499b447.js";import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";const T=I({__name:"index",props:{api:{}},setup(v){const l=v,x=k(),c=$(),o=x.getData(),e=h([]),n=h(),y=()=>{const s=`${l.api}&step=config`;r(s,o).then(a=>{const t=a==null?void 0:a.msg;e.value.push(t??"安装错误"),setTimeout(()=>{c.push("/step5")},1500)})},b=()=>{const s=`${l.api}&step=database`;r(s,o).then(a=>{const t=a==null?void 0:a.msg;e.value.push(t??"安装错误"),y()})},d=(s=0)=>{const a=`${l.api}&step=structure&total=${s}`;r(a,o).then(t=>{var m,f,_,g;const i=t==null?void 0:t.msg;e.value.push(i??"安装错误"),((m=t.data)==null?void 0:m.next)==="structure"&&((f=t.data)!=null&&f.total)&&d((_=t.data)==null?void 0:_.total),((g=t.data)==null?void 0:g.next)==="database"&&b()}).catch(()=>{c.push("/step3")})};return D(e.value,()=>{console.log(n.value.scrollHeight),n.value.scrollTo(0,n.value.scrollHeight)}),F(()=>{if(!o){H.error({message:"温馨提示",description:"请先填写安装数据",duration:2,onClose(){c.push("/step3")}});return}d()}),(s,a)=>(p(),u("div",{ref_key:"installRef",ref:n,class:"install-box"},[(p(!0),u(R,null,w(B(e),(t,i)=>(p(),u("div",{key:i,class:"item"},C(t),1))),128))],512))}});const L=S(T,[["__scopeId","data-v-23f25e5d"]]);export{L as default};
