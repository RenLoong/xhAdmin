import{a as d,u as v,o as u}from"./index.a5420702.js";import{u as g}from"./app.81110efc.js";import{d as y,m as _,D as h,v as k,n as a,F as D,q as F,u as $,o as l,t as b}from"./.pnpm.c979882e.js";import{_ as w}from"./_plugin-vue_export-helper.c27b6911.js";const B=y({__name:"index",props:{api:null},setup(m){const f=m,r=g().getData(),s=_([]),t=_(),i=(p,c=0)=>{const o=`${f.api}&step=${p}&total=${c}`;v(o,r).then(n=>{const{msg:x,data:e}=n;s.value.push(x??"安装错误"),e!=null&&e.next?i(e==null?void 0:e.next,(e==null?void 0:e.total)??0):setTimeout(()=>{u("/complete")},2e3)})};return h(s.value,()=>{t.value.scrollTo(0,t.value.scrollHeight)}),k(()=>{if(!r){d("请先填写安装数据","温馨提示",{onClose(){u("/database")}});return}i("structure")}),(p,c)=>(l(),a("div",{ref_key:"installRef",ref:t,class:"install-box"},[(l(!0),a(D,null,F($(s),(o,n)=>(l(),a("div",{key:n,class:"item"},b(o),1))),128))],512))}});const T=w(B,[["__scopeId","data-v-652a1744"]]);export{T as default};
