import{u as k}from"./app.37dce1ba.js";import{d as I,G as $,r as h,H as D,s as F,n as R,o as p,m as u,F as w,q as B,u as C,t as H}from"./.pnpm.e7cb82db.js";import{a as r}from"./index.ad6209c0.js";import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";const T=I({__name:"index",props:{api:{}},setup(v){const n=v,x=k(),c=$(),o=x.getData(),e=h([]),l=h(),y=()=>{const s=`${n.api}&step=config`;r(s,o).then(a=>{const t=a==null?void 0:a.msg;e.value.push(t??"安装错误"),setTimeout(()=>{c.push("/step5")},2500)})},b=()=>{const s=`${n.api}&step=database`;r(s,o).then(a=>{const t=a==null?void 0:a.msg;e.value.push(t??"安装错误"),y()})},d=(s=0)=>{const a=`${n.api}&step=structure&total=${s}`;r(a,o).then(t=>{var m,_,f,g;const i=t==null?void 0:t.msg;e.value.push(i??"安装错误"),((m=t.data)==null?void 0:m.next)==="structure"&&((_=t.data)!=null&&_.total)&&d((f=t.data)==null?void 0:f.total),((g=t.data)==null?void 0:g.next)==="database"&&b()}).catch(()=>{c.push("/step3")})};return D(e.value,()=>{l.value.scrollTo(0,l.value.scrollHeight)}),F(()=>{if(!o){R.error({message:"温馨提示",description:"请先填写安装数据",duration:2,onClose(){c.push("/step3")}});return}d()}),(s,a)=>(p(),u("div",{ref_key:"installRef",ref:l,class:"install-box"},[(p(!0),u(w,null,B(C(e),(t,i)=>(p(),u("div",{key:i,class:"item"},H(t),1))),128))],512))}});const L=S(T,[["__scopeId","data-v-e1840609"]]);export{L as default};
