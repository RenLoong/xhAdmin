import{u as h,o as x}from"./index.a5420702.js";import{u as B}from"./app.81110efc.js";import{d as N,m as f,v as $,n as D,p as i,e,w as l,u as o,C as E,r,o as F,x as c}from"./.pnpm.c979882e.js";import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";const q={class:"database-container"},A={class:"database"},I={class:"item"},L={class:"item"},M={class:"action"},P={class:"item"},T={class:"item"},W=N({__name:"index",props:{api:null},setup(y){const U=y,g=B(),d=f({type:"mysql",host:"127.0.0.1",username:"",database:"",password:"",port:"3306",prefix:"yc_",charset:"utf8mb4"}),k=f({username:"",password:""}),p=f({web_name:"",web_url:"",username:"",password:""}),b=f(!1),C=()=>{const _={database:d.value,cloud:k.value,site:p.value};b.value=!0;const a=E.service({lock:!0,text:"请求中...",background:"rgba(0, 0, 0, 0.7)"});h(U.api,_).then(m=>{g.setData(m==null?void 0:m.data),x("/install")}).finally(()=>{b.value=!1,a.close()})};return $(()=>{const _=location.protocol,a=location.hostname,m=`${_}//${a}`;p.value.web_url=m}),(_,a)=>{const m=r("el-divider"),s=r("el-input"),n=r("el-form-item"),u=r("el-col"),V=r("el-row"),v=r("el-form"),w=r("el-button");return F(),D("div",q,[i("div",A,[i("div",I,[e(m,{class:"title"},{default:l(()=>[c(" 数据库设置 ")]),_:1}),e(v,{model:o(d),"label-position":"top"},{default:l(()=>[e(V,{gutter:30},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(n,{label:"数据库类型"},{default:l(()=>[e(s,{modelValue:o(d).type,"onUpdate:modelValue":a[0]||(a[0]=t=>o(d).type=t),placeholder:"请输入数据库类型",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库主机"},{default:l(()=>[e(s,{modelValue:o(d).host,"onUpdate:modelValue":a[1]||(a[1]=t=>o(d).host=t),placeholder:"请输入数据库主机"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库名称"},{default:l(()=>[e(s,{modelValue:o(d).database,"onUpdate:modelValue":a[2]||(a[2]=t=>o(d).database=t),placeholder:"请输入数据库名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库用户"},{default:l(()=>[e(s,{modelValue:o(d).username,"onUpdate:modelValue":a[3]||(a[3]=t=>o(d).username=t),placeholder:"请输入数据库用户"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库密码"},{default:l(()=>[e(s,{modelValue:o(d).password,"onUpdate:modelValue":a[4]||(a[4]=t=>o(d).password=t),type:"password",placeholder:"请输入数据库密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库端口"},{default:l(()=>[e(s,{modelValue:o(d).port,"onUpdate:modelValue":a[5]||(a[5]=t=>o(d).port=t),placeholder:"请输入数据库端口"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据表前缀"},{default:l(()=>[e(s,{modelValue:o(d).prefix,"onUpdate:modelValue":a[6]||(a[6]=t=>o(d).prefix=t),placeholder:"请输入数据表前缀"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据字符集"},{default:l(()=>[e(s,{modelValue:o(d).charset,"onUpdate:modelValue":a[7]||(a[7]=t=>o(d).charset=t),placeholder:"请输入数据字符集",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",L,[e(m,{class:"title"},{default:l(()=>[c(" 站点设置 ")]),_:1}),e(v,{model:o(p),"label-position":"top"},{default:l(()=>[e(V,{gutter:30},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(n,{label:"站点名称"},{default:l(()=>[e(s,{modelValue:o(p).web_name,"onUpdate:modelValue":a[8]||(a[8]=t=>o(p).web_name=t),placeholder:"请输入站点名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"站点域名"},{default:l(()=>[e(s,{modelValue:o(p).web_url,"onUpdate:modelValue":a[9]||(a[9]=t=>o(p).web_url=t),placeholder:"请输入站点域名",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"管理员账号"},{default:l(()=>[e(s,{modelValue:o(p).username,"onUpdate:modelValue":a[10]||(a[10]=t=>o(p).username=t),placeholder:"请输入管理员账号"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"管理员密码"},{default:l(()=>[e(s,{modelValue:o(p).password,"onUpdate:modelValue":a[11]||(a[11]=t=>o(p).password=t),type:"password",placeholder:"请输入管理员密码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),i("div",M,[i("div",P,[e(w,{type:"danger",onClick:a[12]||(a[12]=t=>o(x)("/environment"))},{default:l(()=>[c(" 上一步 ")]),_:1})]),i("div",T,[e(w,{type:"primary",disabled:o(b),onClick:C},{default:l(()=>[c(" 下一步 ")]),_:1},8,["disabled"])])])])}}});const J=S(W,[["__scopeId","data-v-cca19d32"]]);export{J as default};
