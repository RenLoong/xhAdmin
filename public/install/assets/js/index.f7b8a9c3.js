import{o as m,u as h}from"./index.712e9451.js";import{u as k}from"./app.d36ffa8d.js";import{d as b,k as q,r as f,H as $,s as D,n as F,o as l,m as c,F as R,q as w,u as B,t as C}from"./.pnpm.f2f3c7ce.js";import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";const I=b({__name:"index",props:{api:{}},setup(y){const d=y,x=k(),o=q(),i=x.getData(),n=f([]),a=f(),p=(t,u=0)=>{var s;const r=`${d.api}&step=${t}&total=${u}&c=${(s=o.query)==null?void 0:s.type}`;h(r,i).then(v=>{const{msg:g,data:e}=v;n.value.push(g??"安装错误"),e!=null&&e.next?p(e==null?void 0:e.next,(e==null?void 0:e.total)??0):setTimeout(()=>{var _;m("/complete",{type:(_=o.query)==null?void 0:_.type})},2500)})};return $(n.value,()=>{a.value.scrollTo(0,a.value.scrollHeight)}),D(()=>{if(!i){F.error({message:"温馨提示",description:"请先填写安装数据",duration:2,onClose(){var t;m("/database",{type:(t=o.query)==null?void 0:t.type})}});return}p("structure")}),(t,u)=>(l(),c("div",{ref_key:"installRef",ref:a,class:"install-box"},[(l(!0),c(R,null,w(B(n),(r,s)=>(l(),c("div",{key:s,class:"item"},C(r),1))),128))],512))}});const L=H(I,[["__scopeId","data-v-95e9c0be"]]);export{L as default};
