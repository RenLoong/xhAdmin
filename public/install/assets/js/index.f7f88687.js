import{u as C,o as U}from"./index.ece5cf0f.js";import{u as B}from"./app.81110efc.js";import{d as F,m as b,v as N,n as $,p as i,e,w as l,u as o,C as D,r as _,o as E,x as f}from"./.pnpm.c979882e.js";import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";const q={class:"database-container"},A={class:"database"},I={class:"item"},L={class:"item"},M={class:"item"},P={class:"action"},R={class:"item"},T={class:"item"},W=F({__name:"index",props:{api:null},setup(y){const g=y,h=B(),d=b({type:"mysql",host:"localhost",username:"",database:"",password:"",port:"3306",prefix:"yc_",charset:"utf8mb4"}),m=b({host:"localhost",port:"6379",password:"",prefix:"yc_"}),p=b({web_name:"",web_url:"",username:"",password:""}),c=b(!1),k=()=>{const V={database:d.value,redis:m.value,site:p.value};c.value=!0;const a=D.service({lock:!0,text:"请求中...",background:"rgba(0, 0, 0, 0.7)"});C(g.api,V).then(r=>{h.setData(r==null?void 0:r.data),U("/install")}).finally(()=>{c.value=!1,a.close()})};return N(()=>{const V=location.protocol,a=location.hostname,r=`${V}//${a}`;p.value.web_url=r}),(V,a)=>{const r=_("el-divider"),s=_("el-input"),n=_("el-form-item"),u=_("el-col"),v=_("el-row"),w=_("el-form"),x=_("el-button");return E(),$("div",q,[i("div",A,[i("div",I,[e(r,{class:"title"},{default:l(()=>[f(" 数据库设置 ")]),_:1}),e(w,{model:o(d),"label-position":"top"},{default:l(()=>[e(v,{gutter:30},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(n,{label:"数据库类型"},{default:l(()=>[e(s,{modelValue:o(d).type,"onUpdate:modelValue":a[0]||(a[0]=t=>o(d).type=t),placeholder:"请输入数据库类型",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库主机"},{default:l(()=>[e(s,{modelValue:o(d).host,"onUpdate:modelValue":a[1]||(a[1]=t=>o(d).host=t),placeholder:"请输入数据库主机"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库名称"},{default:l(()=>[e(s,{modelValue:o(d).database,"onUpdate:modelValue":a[2]||(a[2]=t=>o(d).database=t),placeholder:"请输入数据库名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库用户"},{default:l(()=>[e(s,{modelValue:o(d).username,"onUpdate:modelValue":a[3]||(a[3]=t=>o(d).username=t),placeholder:"请输入数据库用户"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库密码"},{default:l(()=>[e(s,{modelValue:o(d).password,"onUpdate:modelValue":a[4]||(a[4]=t=>o(d).password=t),type:"password",placeholder:"请输入数据库密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据库端口"},{default:l(()=>[e(s,{modelValue:o(d).port,"onUpdate:modelValue":a[5]||(a[5]=t=>o(d).port=t),placeholder:"请输入数据库端口"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据表前缀"},{default:l(()=>[e(s,{modelValue:o(d).prefix,"onUpdate:modelValue":a[6]||(a[6]=t=>o(d).prefix=t),placeholder:"请输入数据表前缀"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"数据字符集"},{default:l(()=>[e(s,{modelValue:o(d).charset,"onUpdate:modelValue":a[7]||(a[7]=t=>o(d).charset=t),placeholder:"请输入数据字符集",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",L,[e(r,{class:"title"},{default:l(()=>[f(" Redis配置 ")]),_:1}),e(w,{model:o(p),"label-position":"top"},{default:l(()=>[e(v,{gutter:30},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(n,{label:"主机地址"},{default:l(()=>[e(s,{modelValue:o(m).host,"onUpdate:modelValue":a[8]||(a[8]=t=>o(m).host=t),placeholder:"请输入主机地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"主机端口"},{default:l(()=>[e(s,{modelValue:o(m).port,"onUpdate:modelValue":a[9]||(a[9]=t=>o(m).port=t),placeholder:"请输入redisForm"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"登录密码"},{default:l(()=>[e(s,{modelValue:o(m).password,"onUpdate:modelValue":a[10]||(a[10]=t=>o(m).password=t),placeholder:"登录密码（一般为空）"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"缓存前缀"},{default:l(()=>[e(s,{modelValue:o(m).prefix,"onUpdate:modelValue":a[11]||(a[11]=t=>o(m).prefix=t),placeholder:"缓存前缀（默认即可）"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),i("div",M,[e(r,{class:"title"},{default:l(()=>[f(" 站点设置 ")]),_:1}),e(w,{model:o(p),"label-position":"top"},{default:l(()=>[e(v,{gutter:30},{default:l(()=>[e(u,{span:12},{default:l(()=>[e(n,{label:"站点名称"},{default:l(()=>[e(s,{modelValue:o(p).web_name,"onUpdate:modelValue":a[12]||(a[12]=t=>o(p).web_name=t),placeholder:"请输入站点名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"站点域名"},{default:l(()=>[e(s,{modelValue:o(p).web_url,"onUpdate:modelValue":a[13]||(a[13]=t=>o(p).web_url=t),placeholder:"请输入站点域名",disabled:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"管理员账号"},{default:l(()=>[e(s,{modelValue:o(p).username,"onUpdate:modelValue":a[14]||(a[14]=t=>o(p).username=t),placeholder:"请输入管理员账号"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:l(()=>[e(n,{label:"管理员密码"},{default:l(()=>[e(s,{modelValue:o(p).password,"onUpdate:modelValue":a[15]||(a[15]=t=>o(p).password=t),type:"password",placeholder:"请输入管理员密码"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])])]),i("div",P,[i("div",R,[e(x,{type:"danger",onClick:a[16]||(a[16]=t=>o(U)("/environment"))},{default:l(()=>[f(" 上一步 ")]),_:1})]),i("div",T,[e(x,{type:"primary",disabled:o(c),onClick:k},{default:l(()=>[f(" 下一步 ")]),_:1},8,["disabled"])])])])}}});const J=S(W,[["__scopeId","data-v-ac35c0f6"]]);export{J as default};
