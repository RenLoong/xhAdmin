import{a as L,c as P,_ as y,b as w}from"./tslib.96271c1f.js";import{i as D,a as U,b as z,c as G,d as V,e as R,f as x,g as k,h as Z,j as C,k as X,p as q,m as N,s as A}from"./@formatjs.edd32ab3.js";var g;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(g||(g={}));var E=function(t){L(e,t);function e(r,n,u){var a=t.call(this,r)||this;return a.code=n,a.originalMessage=u,a}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),_=function(t){L(e,t);function e(r,n,u,a){return t.call(this,'Invalid values for "'.concat(r,'": "').concat(n,'". Options are "').concat(Object.keys(u).join('", "'),'"'),g.INVALID_VALUE,a)||this}return e}(E),B=function(t){L(e,t);function e(r,n,u){return t.call(this,'Value for "'.concat(r,'" must be of type ').concat(n),g.INVALID_VALUE,u)||this}return e}(E),H=function(t){L(e,t);function e(r,n){return t.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(n,'"'),g.MISSING_VALUE,n)||this}return e}(E),m;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(m||(m={}));function J(t){return t.length<2?t:t.reduce(function(e,r){var n=e[e.length-1];return!n||n.type!==m.literal||r.type!==m.literal?e.push(r):n.value+=r.value,e},[])}function K(t){return typeof t=="function"}function b(t,e,r,n,u,a,l){if(t.length===1&&D(t[0]))return[{type:m.literal,value:t[0].value}];for(var s=[],c=0,d=t;c<d.length;c++){var i=d[c];if(D(i)){s.push({type:m.literal,value:i.value});continue}if(U(i)){typeof a=="number"&&s.push({type:m.literal,value:r.getNumberFormat(e).format(a)});continue}var f=i.value;if(!(u&&f in u))throw new H(f,l);var o=u[f];if(z(i)){(!o||typeof o=="string"||typeof o=="number")&&(o=typeof o=="string"||typeof o=="number"?String(o):""),s.push({type:typeof o=="string"?m.literal:m.object,value:o});continue}if(G(i)){var p=typeof i.style=="string"?n.date[i.style]:V(i.style)?i.style.parsedOptions:void 0;s.push({type:m.literal,value:r.getDateTimeFormat(e,p).format(o)});continue}if(R(i)){var p=typeof i.style=="string"?n.time[i.style]:V(i.style)?i.style.parsedOptions:n.time.medium;s.push({type:m.literal,value:r.getDateTimeFormat(e,p).format(o)});continue}if(x(i)){var p=typeof i.style=="string"?n.number[i.style]:k(i.style)?i.style.parsedOptions:void 0;p&&p.scale&&(o=o*(p.scale||1)),s.push({type:m.literal,value:r.getNumberFormat(e,p).format(o)});continue}if(Z(i)){var j=i.children,S=i.value,T=u[S];if(!K(T))throw new B(S,"function",l);var O=b(j,e,r,n,u,a),v=T(O.map(function(I){return I.value}));Array.isArray(v)||(v=[v]),s.push.apply(s,v.map(function(I){return{type:typeof I=="string"?m.literal:m.object,value:I}}))}if(C(i)){var h=i.options[o]||i.options.other;if(!h)throw new _(i.value,o,Object.keys(i.options),l);s.push.apply(s,b(h.value,e,r,n,u));continue}if(X(i)){var h=i.options["=".concat(o)];if(!h){if(!Intl.PluralRules)throw new E(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,g.MISSING_INTL_API,l);var M=r.getPluralRules(e,{type:i.pluralType}).select(o-(i.offset||0));h=i.options[M]||i.options.other}if(!h)throw new _(i.value,o,Object.keys(i.options),l);s.push.apply(s,b(h.value,e,r,n,u,o-(i.offset||0)));continue}}return J(s)}function Q(t,e){return e?y(y(y({},t||{}),e||{}),Object.keys(t).reduce(function(r,n){return r[n]=y(y({},t[n]),e[n]||{}),r},{})):t}function W(t,e){return e?Object.keys(t).reduce(function(r,n){return r[n]=Q(t[n],e[n]),r},y({},t)):t}function F(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function $(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:N(function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,w([void 0],r,!1)))},{cache:F(t.number),strategy:A.variadic}),getDateTimeFormat:N(function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,w([void 0],r,!1)))},{cache:F(t.dateTime),strategy:A.variadic}),getPluralRules:N(function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,w([void 0],r,!1)))},{cache:F(t.pluralRules),strategy:A.variadic})}}var et=function(){function t(e,r,n,u){var a=this;if(r===void 0&&(r=t.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(c){var d=a.formatToParts(c);if(d.length===1)return d[0].value;var i=d.reduce(function(f,o){return!f.length||o.type!==m.literal||typeof f[f.length-1]!="string"?f.push(o.value):f[f.length-1]+=o.value,f},[]);return i.length<=1?i[0]||"":i},this.formatToParts=function(c){return b(a.ast,a.locales,a.formatters,a.formats,c,void 0,a.message)},this.resolvedOptions=function(){var c;return{locale:((c=a.resolvedLocale)===null||c===void 0?void 0:c.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=r,this.resolvedLocale=t.resolveLocale(r),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var l=u||{};l.formatters;var s=P(l,["formatters"]);this.ast=t.__parse(e,y(y({},s),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=W(t.formats,n),this.formatters=u&&u.formatters||$(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var r=Intl.NumberFormat.supportedLocalesOf(e);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=q,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}();export{g as E,E as F,et as I};
