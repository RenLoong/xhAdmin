import{m as _n,d as R,u as gn,a as vn,b as yn,c as xn,r as oe,e as x,z as wn,f as Cn,o as v,g as $,w as C,h as y,i as l,_ as kn,j as bn,N as Pn,k as Sn,l as It,n as $n,p as Rn,q as En,s as Dn,t as st,v as lt,x as Un,y as Ht,A as Vt,B as re,C as rt,D as Se,E as pe,F as z,G as P,H as se,I as $e,J as G,K as qt,L as fe,M as Z,O as Nt,P as Tn,Q as et,R as Mt,S as Ne,T as ct,U as O,V as U,W as Re,X as ie,Y as ye,Z as W,$ as ae,a0 as E,a1 as it,a2 as Wt,a3 as ee,a4 as Lt,a5 as Dt,a6 as V,a7 as q,a8 as jn,a9 as Bn,aa as An,ab as ge,ac as Jt,ad as Ut,ae as Gn,af as Fn,ag as ut,ah as zn,ai as dt,aj as Kt,ak as On,al as In,am as Hn,an as Vn,ao as qn,ap as Nn,aq as Qt,ar as Tt,as as Mn,at as Wn,au as Ln,av as Jn,aw as Kn,ax as Qn,ay as Zn,az as Yn,aA as Xn,aB as eo,aC as to,aD as no,aE as ke,aF as oo,aG as ao,aH as pt,aI as ft,aJ as ht,aK as Zt,aL as so,aM as lo,aN as ro,aO as co,aP as io,aQ as uo}from"./.pnpm.b1880db7.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Yt={},j=()=>Yt,po=t=>{_n(Yt,t)},fo=R({__name:"naive-provider",setup(t){const e=gn(),n=vn(),o=yn(),s=xn();return po({notification:e,message:n,dialog:o,loadingBar:s}),(a,i)=>oe(a.$slots,"default")}}),ho=R({__name:"index",setup(t){const e=x(wn),n=x(Cn);return(o,s)=>{const a=kn,i=bn,d=Pn,f=Sn,p=It;return v(),$(p,{locale:l(e),"date-locale":l(n)},{default:C(()=>[y(f,null,{default:C(()=>[y(d,null,{default:C(()=>[y(i,null,{default:C(()=>[y(a,null,{default:C(()=>[y(fo,null,{default:C(()=>[oe(o.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["locale","date-locale"])}}}),mo={title:"KFAdmin",layout:"top",headerHeight:50,footerHeight:35,accordion:!0,collapsed:!1,siderWidth:230,siderCollapsedWidth:80,showSiderTrigger:"arrow-circle",inverted:!0,logoSize:35,rootIndent:18,indent:32},_o="modulepreload",go=function(t,e){return new URL(t,e).href},jt={},ve=function(e,n,o){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=go(a,o),a in jt)return;jt[a]=!0;const i=a.endsWith(".css"),d=i?'[rel="stylesheet"]':"";if(!!o)for(let h=s.length-1;h>=0;h--){const u=s[h];if(u.href===a&&(!i||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${d}`))return;const p=document.createElement("link");if(p.rel=i?"stylesheet":_o,i||(p.as="script",p.crossOrigin=""),p.href=a,document.head.appendChild(p),i)return new Promise((h,u)=>{p.addEventListener("load",h),p.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e())},vo=[{path:"/login",name:"Login",component:()=>ve(()=>import("./index.40e27232.js"),["./index.40e27232.js",".pnpm.b1880db7.js","..\\css\\.pnpm.ec8b2022.css","..\\css\\index.d42b6c71.css"],import.meta.url),meta:{title:"用户登录"}},{path:"/redirect/:path(.*)",name:"redirect",component:()=>ve(()=>import("./index.8bde3c46.js"),["./index.8bde3c46.js",".pnpm.b1880db7.js","..\\css\\.pnpm.ec8b2022.css"],import.meta.url)},{path:"/error",name:"error",meta:{title:"找不到页面"},component:()=>ve(()=>import("./error.a0f0c1dc.js"),["./error.a0f0c1dc.js",".pnpm.b1880db7.js","..\\css\\.pnpm.ec8b2022.css"],import.meta.url)},{path:"/:pathMatch(.*)",component:()=>ve(()=>import("./error.a0f0c1dc.js"),["./error.a0f0c1dc.js",".pnpm.b1880db7.js","..\\css\\.pnpm.ec8b2022.css"],import.meta.url)}],J=$n({routes:[...vo],history:Rn("/")}),Me=()=>{var n,o;const t=J.currentRoute.value;let e="";return(n=t==null?void 0:t.meta)!=null&&n.moduleName?e=(o=t==null?void 0:t.meta)==null?void 0:o.moduleName:e=location.pathname.replace(/^\/(.*)\/$/,"$1"),e},xe=(t="",e=!1)=>{var a;const n=J.currentRoute.value,o=((a=n==null?void 0:n.meta)==null?void 0:a.moduleName)??"",s=x(n.path);if(e){const i=s.value.indexOf("/",1);s.value=s.value.substring(0,i),s.value=`${s.value}/`}return`${o}${s.value}${t}`},mt=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},Oe=t=>{mt(t)?location.href=t:J.push(t)};function Ke(t=6){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return e}const te=(t,e)=>{for(const n in e)if(e[n]===t)return!0;return!1},He=()=>{var n;const t=J.currentRoute.value,{notification:e}=j();(n=t.query)!=null&&n.isBack?J.back():e==null||e.error({title:"返回上次页面错误",duration:2e3})},yo=t=>t.replace(/\/(\w)/g,(e,n)=>n.toUpperCase()),Ml=(t,e="Enter")=>{const n=o=>{o.key===e&&(t(),o.preventDefault())};En(()=>document.addEventListener("keydown",n)),Dn(()=>document.removeEventListener("keydown",n))},xo=t=>{let e;const n={},o=t.slice(t.indexOf("?")+1).split("&");for(let s=0;s<o.length;s++)e=o[s].split("="),n[e[0]]=e[1];return n},wo=t=>{const e=new URLSearchParams;for(const[o,s]of Object.entries(t))e.append(o,s);return e.toString()},le=(t,e)=>{let n=t,o=0;function s(){n=n[e[o]],o++,o<e.length&&n&&s()}return s(),n},_t="Authorization",gt="Appid",Ee=st(()=>{const t=Me();return lt(`${t}_${_t}`,null)}),De=st(()=>{const t=Me();return lt(`${t}_${gt}`,null)}),Xt="/",L=Un.create({baseURL:Xt,timeout:6e4}),Co=async t=>{const e=Ee();e.value&&t.headers.set(_t,e.value);const n=De();return n.value&&t.headers.set(gt,n.value),t},ko=t=>{var s,a,i,d;const{notification:e}=j(),n=Ee(),o=t.data;return t.headers["content-type"]==="application/json"?te(o==null?void 0:o.code,[404,500])?(e==null||e.error({title:"温馨提示",content:(o==null?void 0:o.msg)||"网络错误",duration:1500}),Promise.reject(t.data)):(o==null?void 0:o.code)===301?(Oe(((s=o==null?void 0:o.data)==null?void 0:s.url)??""),Promise.reject(t.data)):(o==null?void 0:o.code)===302?(e==null||e.error({title:"温馨提示",content:(o==null?void 0:o.msg)||"网络错误",duration:1500}),Oe(((a=o==null?void 0:o.data)==null?void 0:a.url)??""),Promise.reject(t.data)):(o==null?void 0:o.code)===303?(e==null||e.success({title:"温馨提示",content:(o==null?void 0:o.msg)||"网络错误",duration:1500}),Oe(((i=o==null?void 0:o.data)==null?void 0:i.url)??""),Promise.reject(t.data)):(o==null?void 0:o.code)===304?(window.location.reload(),Promise.reject(t.data)):(o==null?void 0:o.code)===305?(e==null||e.success({title:"温馨提示",content:(o==null?void 0:o.msg)||"网络错误",duration:1500}),setTimeout(()=>{window.location.reload()},2500),Promise.reject(t.data)):(o==null?void 0:o.code)===200?o:((o==null?void 0:o.code)===12e3&&(n.value="",J.replace({path:"/login",query:{redirect:(d=J.currentRoute.value)==null?void 0:d.fullPath}})),Promise.reject(t.data)):t.headers["content-type"]==="application/octet-stream"?Promise.resolve(o):Promise.resolve(t)},bo=t=>{const{notification:e}=j();if(t.response){const{data:n,status:o,statusText:s}=t.response;o===401?e==null||e.error({title:"温馨提示",content:(n==null?void 0:n.msg)||s,duration:1500}):o===403?e==null||e.error({title:"资源请求错误",content:(n==null?void 0:n.msg)||s,duration:1500}):o===500&&(e==null||e.error({title:"服务器错误",content:(n==null?void 0:n.msg)||s,duration:1500}))}return Promise.reject(t)};L.interceptors.request.use(Co);L.interceptors.response.use(ko,bo);const he=(t,e,n)=>L.request({url:t,params:e,method:"GET",...n}),vt=(t,e,n)=>L.request({url:t,data:e,method:"POST",...n}),yt=(t,e,n)=>L.request({url:t,data:e,method:"PUT",...n}),We=(t,e,n)=>L.request({url:t,data:e,method:"DELETE",...n}),Po=Object.freeze(Object.defineProperty({__proto__:null,baseURL:Xt,default:L,instance:L,useDelete:We,useGet:he,usePost:vt,usePut:yt},Symbol.toStringTag,{value:"Module"})),So=Me(),$o=`${So}/Publics/site`,Ro=()=>he($o),Eo=st(()=>{const t=Me();return lt(`${t}-layout-theme`,mo)}),Y=Ht("app",()=>{const t=Eo(),e=Vt(l(t)),n=x(),o=x(),s=x(),a=p=>{s.value=p},i=p=>{o.value=p},d=p=>{var u;e.title=p.web_title,e.web_name=p.web_name;const h=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAADPCAMAAACKnR5TAAABMlBMVEVHcEx7pvgH+9srxdIsw9ItxdAD/9zLdv0bj/wajv4o3Nsajv6oS/13UvscZfDUdv1Yi/eeSvwg19UbfvkH+tsswdMcYe+CUPttd/sjp+kcavKrWf0E/ttfZ/ootd3Bbv0U6NguxNS0Zf2iTfwfnPIbfvkvwNCKfv4txs4Zjf8da/Md/uIbY/EaY/AH/9x6Y/wY/+CHbv0obPMqbfIcZfEeZfPEeP0O/92ahf6nf/6TTPyOTfsF/92ze/4E/90K/+GGTvucSfyre/6YgP5+UPvCev4eY/Cagf/D6vu2ef6T5fNDffJwXfpBjfmKfvg5Y/Qj09U6vNgtw9Aajf6uR/wE/9sdY+/advzddv2yRv2vRvwC/9sZi/8WZO+pRvwSjv6gSfuQf/11UvdBiP46XfI7XfL04pvpAAAAUnRSTlMABt7b7fX5/e32Ftz8b/L+DuHc1+zM+pgZ0ev58yXb+txi+Pfg5Poz+/vYMJbjx0J7UjlzuFXrrWOj1MJfyZZLre64fYbayo4j2USm7tvE8qtylTSQZQAAColJREFUeNrtnAtf2kgUxQ0QHhUhKGJAAVdUxFoRWt+1lWpb+9pHAUFhWffR7/8VdgKIREgy50qG7G9z/QLe39w5+c85M8zMuOWWW2655ZZbbrn1fyopXZyDq6hKDm1HKc5dLoF1OZdXHNpO+vIkhtbJzxdpZ3ajlk7vajc3t9x1c1MLL6+9KylOHDe1uBRj3UBVW84G3l84ctzSc6c59g9y1+1th61NtHHw7kh1YDvF80rt5hZpJ5xbzjaa0YPjvANFeu6kw/YD1M7yWqDZbAbOjhwn1urceeUWGDVWnfBaNsraaR4cO27c8kuxMLY2bOdko41Ggy3Pp48OGzeldBrGRq0Wzq0FGk2tnUaAibWjdk7xMgaPGhNp1oq2Po33H4tO2j2MBzCR7nXT6JWmBk5iA6V4nuvcoiLdXxutnWjWQeMm5bsiXcNFunG/PtFPzmED5ei8cgPtnE5fpAfT1nQQG1wdV+5AvMn1RHqwOs5hA0k9OruDd87wqHXFzSlsoJaOYx1k42jfnOFR6/dzcFxS/4si3eWBwPCsOYkNNJHG2umR9ON2HMEGOElrX9BHO6dxzwb5ae8e7dB2i/EAE+lAdEw7TmCD/HkFVLXOmFHrrc702UCdO4UPbblxo+YINlCKSzHaoW1cN1NnA4JI3+l5oOEgNmCHtrsnkPTo7pkqGyjs0AbygEbSUaN2pswGTAcquLMWMJq1abNBfqnSwZ01k276bDCVaWMkfdKpTUqkh9jgYipsoJbOKzVo59RqhiI9fTZIL52Eb28ozpr56jA2mIKtI5VOc4RRazQbVqWxgeh+pPzlCRs1pB0Dkh7DBsdHz5wefzCSXuZaHI0NPl6Jtj0pJM3TjUaijA2eiRw3evzR4OlHNBsopfPYk5w1i3ETzAbppVh4ciQ9hg2yItmgm1FPmgdG2EDUQa6bUcMkzTtqwtlAvaRk1AHeWeuzgbCDnCbSBJJuIu00omdFp4p0jV+khw4KYtrBM2pEpAdk8EnQsNEzaqQdUeG8llHbKtI9qhZkgTwto+YeNVEGFc1ZC6CjdnYhZtTwjLpj4qwZMsHHoggm6GXUsLOGjlrgTMyVPRXNqLs8gIq0MJ7Owxm1lbM2XqSF5CKSenT65Iya4zB6dpQWMmolRtK1STtrY0RajDGliTTurKEiLexo0BXpJ2fUHAc3EYujdEkaO7blKCQt5lg9uYzaESJdnFhG7QRLipJRLzuWpPGMutPJUUTaySQN84CYIF6acEY9ZXeNllHDoybqztTkM2oDkRbDA/mlSth+kn5/LObQRsmolykkLeaTA2fUJGftQJizBmfU+KgxWDsSsnMkWvzhUJKW8pcxWzJq/ahlBXnShCd6d1pG7UyRtjOjHupHEEnbm1EPQFrUtTx7M+rBqB0IjD8EOGvvRH1Bbc6oBxeOhThrtmfUYkmaklFncZIW5qzR3lGDJC3mmaWIjLpndwg6tGEZNc1ZE0bSTAc60K9D9J01rESJdP8dNVJ9kQbu3mgknRaXUYPt9J/s81dDmLPGSPoOq1xuLRvA6uDsIq8oz6Ai5ablL1//Auvr1z/h+vnLbz+B9Zxwj1fd//DPjx8//gHql+1vf4P17VvGuwjWr3t4P1J558XvUCUiqYXZ0B9QBZNJ3/fvW+yPv7ZWD/eeo+N29fJDAmsn8mJhI1RA21n0fYdqU5bj8d098J619PlL6vdrqCLbC8HqH1WgCsH1jFfG2pG98/FW/PCzhOHNyw/XaDts1KpQBdeTGXkLbGd+daXV2sXGTd1/9QJrJhHZ2AhC7bTbs/io+eZX4yt1tjyvETVgOpDARy1UgEYthI+azzvv8dfrdb/nzXNoccBuEqkFtnOgCs0mM74ttJ3VeKtVr7fqu6+5XykobHHQUUuBo1Zta6q2BbWzuelb9axo7dTr8TdveceN6UAEbOfFBjpqhXV458i+ebZxerXC1ID3C/oK7OaaMGpMpPFRm4/XW/f9HL5VOEV6G1wbtnNmg+CorSfBbja7stbqt9NqefjEmukAuDhs42xgo9bbOQSR9tfvq+XnYwOaSIOjpom0j8ADrYd2+NiAkTTYDYUHCCLd44H6Qz91DjYgiTTYTrvdI2l01Dy6dphYW7MBE2l81ATsHI0HVvx1XVmygaQQRHqbItI43qzG9WvDwQZKGRVphjcb8M5JJr0gSQ/xgG7czNlAffkqBXeDknSVRNIjo8bBBjSRxjYOkaQfeEDXjwkbSEykr+0nafjQpucB3e4xYwN1XxhJU3hg3OqYsUEZJukII2l41HCS1vOAfnkM2UDZF0HSs+sUHjBqx4QNYJHu8kAQtjsmwAMcbMBEGh61afGANRtIMKwRSLoQpIm08doYsIGEw9p1SoSztimbjpoBGygEkd4gifRkeMCCDdI727Y7a+1CkDRqFt2w7fOYDRTYWaPaHTL+BTUftTFswA5tYkgadda6PGDVzggbpF8S7A541Gg8ULdqZpQNyjsR20macmiTOUZtlA20+MN2Zy20Do+a7LMU6TFswEiacmibOg8YsEGZJNJVmKS9kyNpEzYgkHRkYUGIs8Y7avdsIFFgDXfWqkRnzeDQZsgGyox0hTtrMEm3aTsn7q8DtXL49vnMFZ5Rp0SQNBcPPGaD1zNFQRm1T4ZFmoMHdP2sHO7N7MNnUNxZo5A0Omp1Lc/emymjZpSYjFoGR00rbdhU0CokOGuF2fUMPGqP4g9eKZAwI5fmrKF4IwM8oBdq9t1Bdo/mrGHdFAoTddasPqMYFUSEZNQyPGpDBgi/60Eg6WoIz6j7N2+QdvzxAYLy2x5s1AQ5a+DG0ZmHKu/yEDPqCSRtVqPm6eoAaBnSMmqZfPMGAIJhL4fP0NVEGifpzBNu3vB249c7bXxiTXDW2sHJJW1mPPBGb7TxiHUiIsBZ24RJWpO13cchQnrHMqoS6Kxha6P5BBLqUeN2R7sQFMIDK6MJD0O3D9aHNvszapwHNJIek7+Vd1KJiWfU6KHNImkbO2pMpKVxt3HM1IBG0hkbnTWLqxLmF1gStFHz2c0DXZF+ZpBcJ6ZL0hQe8BteMzKOrEjO2nrGhqRtpB3jS2DGYk3LqL0++3nA5IqeZJgkiMioKTxgfoHSkKyFOGugidv3osyut44Xa8rrDwJJE3jA4vKxNDYjxUm6SsioSc7aG/O7umPJWsSVfAoPsC+o1VXd0egqkRDhrFF4gOMVjzISLFIyappItyYn0sZiHdkWwQMyPmpMpK2fJEn6UJ7srG3ZzQNscd5KPI+RhtWAllFn7E7atG7Y4vA9Fdt+YkZte9L22FmzEOvEkzJqOP7gu3nzmKR5H789JD5iSFomoCfw1FIZPIIlvf4QwgPAy0RlINY0kgadNdk3TxDp1/zPlAcPyAnOGkzSFB5gi4M8uu5dnaC8/hBC0q34LvTmunfw6d5ZAzNqys7xTMZZs3h1nSCRtIhDG+8TWB1Zp2jO2pbtPMD/QHn48cv2RhtbG7ZzMl7bQ11IpB/Iev/LQihUCCHVFWlWmzJfdW9DMFmDqntog38pRy3vvJrFaiGZXFz0QrW4uLvrwSru4SLpkfWZccstt9xyyy233HLLLbfccssx9S/OTXvmn2y+VgAAAABJRU5ErkJggg==",self.location).href;e.logo=(p==null?void 0:p.web_logo)==="string"?p.web_logo:h,e.layout=((u=p==null?void 0:p.theme)==null?void 0:u.layout)??e.layout,n.value=p};return{layout:e,getSite:async()=>{const{data:p}=await Ro();return d(p),p},site:n,dynameicRemoteRoute:o,setDynameicRemoteRoute:i,loginLink:s,setLoginLink:a}}),Do=t=>{var o;const n=(o=Y().site)==null?void 0:o.public_api.login;return vt(n,t)},Uo=()=>{var n;const e=(n=Y().site)==null?void 0:n.public_api.loginout;return We(e)},To=()=>{var n;const e=(n=Y().site)==null?void 0:n.public_api.user;return he(e)},jo=async()=>{var o;const e=(o=Y().site)==null?void 0:o.public_api.menus,{data:n}=await he(e);return n},Qe=R({__name:"route-view",setup(t){const e=re(),n=()=>`${new Date().getTime()}${Math.random()}`,o=x("");return rt(()=>e.fullPath,()=>{o.value=n()}),(s,a)=>{const i=Se("router-view");return v(),$(i,{key:l(o)})}}}),Bo=R({__name:"logo",props:{collapsedWidth:null,headerHeight:null,size:{default:30},src:null,inverted:{type:Boolean}},setup(t){const e=t;pe(s=>({a225a460:l(o),"069e2b22":l(n)}));const n=z(()=>`${e.headerHeight}px`),o=z(()=>`${e.collapsedWidth}px`);return(s,a)=>{const i=$e;return v(),P("div",{class:se(["pro-admin-layout-header flex items-center justify-center",{"bg-[#011528]":t.inverted}])},[y(i,{src:t.src,width:t.size,height:t.size,"preview-disabled":""},null,8,["src","width","height"])],2)}}});const K=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n},xt=K(Bo,[["__scopeId","data-v-65fa780c"]]),Ao=R({__name:"title",props:{headerHeight:null,layout:null,title:null,size:{default:16},inverted:{type:Boolean}},setup(t){const e=t;pe(s=>({"5a04372c":l(n)}));const n=z(()=>`${e.headerHeight}px`),o=z(()=>({fontSize:`${e.size}px`}));return(s,a)=>(v(),P("div",{class:se(["pro-admin-tabs-layout-header flex items-center flex-1 truncate select-none",{"justify-center":t.inverted}]),style:qt(l(o))},G(t.title),7))}});const en=K(Ao,[["__scopeId","data-v-be8d9a40"]]),tn=R({__name:"layout-content",setup(t){const e=fe();return(n,o)=>{const s=Nt;return v(),$(s,Z(l(e),{style:{"--n-color":"var(--pro-admin-layout-content-bg)"}}),{default:C(()=>[oe(n.$slots,"default")]),_:3},16)}}}),tt=R({__name:"layout-sider",setup(t){const e=fe();return(n,o)=>{const s=Tn;return v(),$(s,Z({"collapse-mode":"width"},l(e)),{default:C(()=>[oe(n.$slots,"default")]),_:3},16)}}}),wt={vue:null},A=R({__name:"index",props:{icon:null,depth:null,size:{default:18},color:null},setup(t){return(e,n)=>{const o=Mt;return v(),$(o,{component:l(et)[t.icon],size:t.size,depth:t.depth,color:t.color},null,8,["component","size","depth","color"])}}}),Go={};function Fo(t,e){return v(),P("div",null," 高德地图 ")}const zo=K(Go,[["render",Fo]]),Oo={};function Io(t,e){return v(),P("div",null," 百度地图 ")}const Ho=K(Oo,[["render",Io]]),we=R({__name:"buttons",props:{extraConfig:null},emits:["update:init","update:submit","update:rest"],setup(t,{expose:e,emit:n}){const o=Ne(),s=x(!1),a=f=>{s.value=f},i=()=>{a(!0),n("update:submit")},d=()=>{a(!0),n("update:rest")};return ct(()=>{n("update:init",{exposed:o.exposed})}),e({setDisabled:a}),(f,p)=>{var r;const h=Re,u=ie;return(r=t.extraConfig.submitBtn)!=null&&r.show?(v(),$(u,{key:0,justify:"center",size:30,class:"py-3 b-t-1px"},{default:C(()=>{var c,m,g,b;return[(c=t.extraConfig.submitBtn)!=null&&c.show?(v(),$(h,Z({key:0},((m=t.extraConfig)==null?void 0:m.submitBtn)??{},{loading:l(s),disabled:l(s),onClick:i}),{default:C(()=>{var _;return[O(G(l(s)?"请求中...":((_=t.extraConfig.submitBtn)==null?void 0:_.content)??"提交"),1)]}),_:1},16,["loading","disabled"])):U("",!0),(g=t.extraConfig.resetBtn)!=null&&g.show?(v(),$(h,Z({key:1},((b=t.extraConfig)==null?void 0:b.resetBtn)??{},{disabled:l(s),onClick:d}),{default:C(()=>{var _;return[O(G(((_=t.extraConfig.resetBtn)==null?void 0:_.content)??"重置"),1)]}),_:1},16,["disabled"])):U("",!0)]}),_:1})):U("",!0)}}}),Vo={class:"h-450px overflow-y-auto p-5"},qo=E("div",{class:"text-blueGray pt-2 select-none"}," 温馨提示：单击图标为选择，双击图标为复制 ",-1),No=["title","alt","onClick","onDblclick"],Mo=R({__name:"icons-mgr",emits:["update:init","update:copy","update:click","update:confirm"],setup(t,{expose:e,emit:n}){const{notification:o}=j(),s=Ne(),a=x(Object.keys(et)),i=x(""),d=x(""),f=u=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(u).then(r=>{});else{const r=document.createElement("input");r.value=u,document.body.appendChild(r),r.select(),document.execCommand("Copy"),r.remove()}n("update:copy",u),o==null||o.success({title:"复制成功",duration:1500})},p=u=>{i.value=u===i.value?"":u,n("update:click",i.value)},h=()=>(n("update:confirm",i.value??""),i.value);return ct(()=>{n("update:init",{exposed:s.exposed})}),e({hanldConfirm:h}),(u,r)=>{const c=it,m=Wt,g=Mt,b=ie;return v(),P("div",Vo,[y(m,null,{default:C(()=>[y(c,{modelValue:l(d),"onUpdate:modelValue":r[0]||(r[0]=_=>ye(d)?d.value=_:null),placeholder:"可输入搜索图标名称"},null,8,["modelValue"])]),_:1}),qo,y(b,{justify:"space-around",class:"pt-5",size:22},{default:C(()=>[(v(!0),P(W,null,ae(l(a).filter(_=>_.includes(l(d))),_=>(v(),P("div",{key:_,class:se([{"bg-slate":_===l(i)},"hover:bg-slate px-2 py-1 border-sm cursor-pointer"]),title:_,alt:_,onClick:w=>p(_),onDblclick:w=>f(_)},[y(g,{component:l(et)[_],size:26,color:"#555"},null,8,["component"])],42,No))),128))]),_:1})])}}}),Wo={class:"w-100%"},Lo=R({__name:"index",props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:e}){const{dialog:n,notification:o}=j(),s=x(),a=x(),i=x({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"关闭",show:!0}}),d=()=>{e("update:modelValue","")},f=()=>{s.value=n==null?void 0:n.create({class:"pro-admin-dialog",title:"图标管理器",maskClosable:!1,showIcon:!1,style:{width:"45%"},content:()=>ee(Mo,{"onUpdate:init":p=>{a.value=p==null?void 0:p.exposed}}),action:()=>ee(we,{extraConfig:i.value,"onUpdate:submit":()=>{var h,u;const p=(h=a.value)==null?void 0:h.hanldConfirm();p?(e("update:modelValue",p),(u=s.value)==null||u.destroy()):o==null||o.error({title:"请选择图标",duration:1500})},"onUpdate:rest":()=>{var p;(p=s.value)==null||p.destroy()}})})};return(p,h)=>{const u=it,r=Re,c=Wt;return v(),P("div",Wo,[y(c,null,{default:C(()=>[y(u,{value:t.modelValue,placeholder:"请选择图标",disabled:""},null,8,["value"]),y(r,{type:"warning",onClick:d},{default:C(()=>[O(" 重置图标 ")]),_:1}),y(r,{type:"success",onClick:f},{default:C(()=>[O(" 选择图标 ")]),_:1})]),_:1})])}}}),Jo={};function Ko(t,e){return v(),P("div",null," 腾讯地图 ")}const Qo=K(Jo,[["render",Ko]]);function Zo(){const t=wt.vue;Lt.install(t)}const Yo={form:{labelPlacement:"top",inline:!1,labelPosition:"right",labelSuffix:void 0,hideRequiredAsterisk:!1,labelWidth:"auto",showMessage:!0,inlineMessage:!1,statusIcon:!1,validateOnRuleChange:!0,disabled:!1,size:void 0},row:{gutter:30,alignItems:"center",type:void 0,align:void 0,justify:void 0,tag:"div"},global:{"*":{}},submitBtn:!1,resetBtn:!1},Xo=t=>t.map(e=>(e.handle=n=>{if((e==null?void 0:e.where)==="==")return n===e.value;if((e==null?void 0:e.where)==="!=")return n!==e.value;if((e==null?void 0:e.where)==="in"){const o=e.value;return o instanceof Array&&o instanceof Object?te(n,e.value):(console.error("联动组件的IN条件值必须是数组或对象"),!1)}},e)),ea=t=>t.map(e=>(e!=null&&e.control&&(e.control=Xo(e.control)),e)),ta=(t,e)=>{const n=x({}),o=x({api:"",method:"POST"}),s=x(""),a=x({}),i=x([]),d=x(Yo),f=Ne(),p=()=>{var b,_;const{notification:r}=j(),c=J.currentRoute.value,m={...c==null?void 0:c.query};m!=null&&m.isBack&&(m==null||delete m.isBack);const g={method:((b=o.value)==null?void 0:b.method)??"GET",params:{...t.ajaxParams},data:{}};o.value.method==="GET"?g.params={...a.value}:g.data={...a.value},e("update:submit",{api:o.value.api,queryParams:g}),L(((_=o.value)==null?void 0:_.api)??"",g).then(w=>{var k;(k=c.query)!=null&&k.isBack&&!t.isModal&&!s.value?He():s.value&&Oe(s.value),e("update:success",w),r==null||r.success({title:(w==null?void 0:w.msg)??"操作失败",duration:1500})}).catch(w=>{e("update:error",w)})},h=()=>{const{notification:r}=j();n.value.resetFields(),r==null||r.success({title:"数据重置成功",duration:1500}),e("update:rest")},u=x({method:t.method,params:{},data:{}});return t.method==="GET"?u.value.params={...t.ajaxParams}:u.value.data={...t.ajaxParams},L((t==null?void 0:t.api)??"",u.value).then(r=>{const{data:c}=r,{notification:m}=j();if(!(c!=null&&c.http))return m==null||m.error({title:"提交接口获取失败",duration:2e3}),Promise.reject(new Error("提交接口获取失败"));if(!(c!=null&&c.formRule))return m==null||m.error({title:"表单规则获取失败",duration:2e3}),Promise.reject(new Error("表单规则获取失败"));o.value=c.http,i.value=ea(c.formRule),d.value={...d.value,...c.config},s.value=(c==null?void 0:c.redirect)??"",e("update:init",{response:c,exposed:f.exposed})}).catch(r=>{e("update:error",r)}),{fApi:n,submitAPI:o,redirectUrl:s,formData:a,formRule:i,formConfig:d,hanldSubmit:p,hanldReset:h}},na={class:"h-100%"},nn=R({__name:"index",props:{api:null,method:{default:"GET"},ajaxParams:{default:{}},isModal:{type:Boolean,default:!1}},emits:["update:init","update:submit","update:success","update:rest","update:error"],setup(t,{expose:e,emit:n}){const o=t,{fApi:s,formData:a,formConfig:i,formRule:d,hanldSubmit:f,hanldReset:p}=ta(o,n);Zo(),Dt.use(Ts);const h=Dt.$form();return e({hanldSubmit:f,hanldReset:p}),(u,r)=>(v(),P("div",na,[y(l(h),{api:l(s),"onUpdate:api":r[0]||(r[0]=c=>ye(s)?s.value=c:null),modelValue:l(a),"onUpdate:modelValue":r[1]||(r[1]=c=>ye(a)?a.value=c:null),modelModifiers:{lazy:!0},rule:l(d),option:l(i)},null,8,["api","modelValue","rule","option"])]))}}),oa={class:"h-550px overflow-x-hidden overflow-y-auto p-5"},Ct=R({__name:"popup",setup(t){const e=fe();return(n,o)=>(v(),P("div",oa,[y(nn,V(q(l(e))),null,16)]))}}),aa=(t,e,n)=>{const{notification:o}=j();if(!(n!=null&&n.file))return o==null||o.error({title:"导出数据失败，缺少[file]地址",duration:2e3}),Promise.reject(new Error("导出数据失败，缺少导出地址"));L(n==null?void 0:n.file,{responseType:"blob"}).then(s=>{jn.saveFile({filename:t,type:e,content:s.data})})},sa=({vxeGridConfig:t,options:e,xGrid:n})=>{var i;const{notification:o}=j();if(!((i=t.exportConfig)!=null&&i.api))return o==null||o.error({title:"请设置请求API",duration:1500}),Promise.reject(new Error("请设置请求API"));const s=n==null?void 0:n.getProxyInfo(),a={format:e.type??"xlsx",filename:e.filename??"导出文件",sheetName:e.sheetName??"",isHeader:e.isHeader??!1,original:e.original??!1,mode:e.mode??"all",pager:s?s.pager:null,ids:e.mode==="selected"?e.data.map(d=>d.id):[],fields:e.columns.map(d=>({field:d.field,title:d.title}))};return new Promise(d=>{var h;const f={method:"POST",data:{...a}},p=((h=t.exportConfig)==null?void 0:h.api)??"";L(p,f).then(u=>{const{data:r}=u;aa(a.filename,a.format,r),d(u)})})},la=({vxeGridConfig:t,file:e,xGrid:n})=>{const{notification:o}=j(),s=new FormData;return s.append("file",e),new Promise(a=>{var f;const i=((f=t.importConfig)==null?void 0:f.api)??"";L(i,{method:"POST",data:s}).then(p=>{const{msg:h}=p;o==null||o.success({title:h??"操作成功",duration:1500}),n==null||n.commitProxy("query"),a(p)}).catch(p=>{console.error("导入失败",p)})})},ra=({$table:t,file:e})=>new Promise(n=>{const o=new FileReader;o.onload=s=>{const a=s.target?s.target.result:"",i=Bn(a,{type:"binary"}),d=An.sheet_to_json(i.Sheets.Sheet1);t.loadData(d),n(d)},o.readAsBinaryString(e)}),ca=t=>{var e,n;return(e=t.vxeGridConfig.importConfig)!=null&&e.api&&((n=t.vxeGridConfig.importConfig)!=null&&n.isRemote)?la(t):ra(t)},ia=async({options:t,xGrid:e,vxeGridConfig:n})=>{var r,c,m,g;const o=t.form,s=t.page,a=t.sort,i=t.filters;let d=xe();const f=((r=n.screenConfig)==null?void 0:r.method)??"GET",p=(c=e==null?void 0:e.formConfig)==null?void 0:c.data;t!=null&&t.code&&((m=n.screenConfig)!=null&&m.api)&&(d=(g=n.screenConfig)==null?void 0:g.api);const h=J.currentRoute.value,u=x({method:f,params:{page:s.currentPage??1,limit:s.pageSize??20,...o,...(h==null?void 0:h.query)??{},...p}});return JSON.stringify(a)!=="{}"&&u.value.params&&(u.value.params={...u.value.params,field:a.field,order:a.order}),i.length>0&&u.value.params&&i.forEach(({field:b,values:_})=>{u.value.params={...u.value.params,[b]:_.join(",")}}),new Promise((b,_)=>{L(d,u.value).then(w=>{b(w)}).catch(w=>{_(w)})})},ua=(t,e,n,o)=>{const{notification:s}=j();if(e.length<=0){s==null||s.error({title:"请先导入数据",duration:1500});return}if(!t){s==null||s.error({title:"未设置导入API接口",duration:1500});return}vt(t,{import:n,data:e}).then(i=>{var d;(d=o.xGrid)==null||d.commitProxy("query"),s==null||s.success({title:(i==null?void 0:i.msg)??"操作成功",duration:1500})})},da=t=>{ge.commands.add("importAllData",e=>{var a;const{$table:n}=e,o=n==null?void 0:n.getTableData(),s=o==null?void 0:o.fullData;ua(((a=t.vxeTableConfig.importConfig)==null?void 0:a.api)??"",s,"all",t)})},pa=t=>{const{notification:e}=j(),n=x(),o=x({}),s=x({active:"",field:"",list:[]}),a=x([]),i=x([]),d={method:t.method,params:{},data:{}};d.method==="GET"?d.params={...t.ajaxParams}:d.data={...t.ajaxParams},L(t.api,d).then(h=>{const u=h.data;o.value=u.tableConfig,s.value=u.tabsConfig,a.value=u.rightButtonList,i.value=u.topButtonList;const r={...o.value.toolbarConfig,slots:{buttons:"topButtonList"}};o.value.toolbarConfig=r,r!=null&&r.import&&(o.value.importConfig={...o.value.importConfig,remote:!0,importMethod:c=>ca({...c,vxeGridConfig:o.value,xGrid:n.value})}),r.export&&(o.value.exportConfig={...o.value.exportConfig,remote:!0,exportMethod:c=>sa({...c,vxeGridConfig:o.value,xGrid:n.value})}),o.value.proxyConfig={...o.value.proxyConfig,ajax:{query:c=>ia({options:c,xGrid:n.value,vxeGridConfig:o.value})}}});const f=(h,u)=>{var r;if(!h){e==null||e.error({title:"请设置请求API接口",duration:1500}),(r=n.value)==null||r.commitProxy("query");return}yt(h,u).then(()=>{var c;(c=n.value)==null||c.commitProxy("query")})},p=({row:h,column:u})=>{var g,b,_;const r=((b=(g=o.value)==null?void 0:g.rowConfig)==null?void 0:b.keyField)??"id",c=h[u==null?void 0:u.field],m={[r]:h[r],keyField:r,field:u==null?void 0:u.field,value:c};f((_=u==null?void 0:u.params)==null?void 0:_.api,m)};return da({xGrid:n.value,vxeTableConfig:o.value}),{xGrid:n,vxeGridConfig:o,tabsConfig:s,rightButtonList:a,topButtonList:i,hanldEditClose:p}},fa=R({__name:"icons",props:{row:null,column:null},setup(t){const e=t,n=e.column.params,o=e.column.field;let s=x();if(o.includes(".")){const a=o.split(".");s=le(e.row,a)}else s=e.row[o];return n!=null&&n.type&&delete n.type,(a,i)=>(v(),$(A,Z({icon:l(s)},l(n)),null,16,["icon"]))}}),ha=R({__name:"image",props:{column:null,row:null},setup(t){var a;const e=t,n=e.column.field;let o=x();if(n.includes(".")){const i=n.split(".");o=le(e.row,i)}else o=e.row[n];const s=x(e.column.params);return s!=null&&s.type&&delete s.value.type,(a=s.value)!=null&&a.style||(s.value.style={width:"35px",height:"30px"}),(i,d)=>{const f=$e;return l(o)?(v(),$(f,Z({key:0,src:l(o)},l(s)),null,16,["src"])):U("",!0)}}}),ma={key:0,class:"flex gap-1"},_a=R({__name:"images",props:{column:null,row:null},setup(t){var a,i;const e=t,n=e.column.field;let o=x();if(n.includes(".")){const d=n.split(".");o=le(e.row,d)}else o=e.row[n];const s=x(e.column.params);return(a=s.value)!=null&&a.type&&delete s.value.type,(i=s.value)!=null&&i.style||(s.value.style={width:"35px",height:"30px"}),(d,f)=>{const p=$e,h=Jt;return l(o)instanceof Array||l(o)instanceof Object?(v(),P("div",ma,[(v(!0),P(W,null,ae(l(o),(u,r)=>(v(),P("div",{key:r,class:"item"},[typeof u=="string"?(v(),$(p,Z({key:0,src:u},l(s)),null,16,["src"])):u!=null&&u.label&&(u!=null&&u.url)?(v(),$(h,{key:1,trigger:"hover"},{trigger:C(()=>[y(p,Z({src:u.url},l(s)),null,16,["src"])]),default:C(()=>[O(" "+G(u.label),1)]),_:2},1024)):U("",!0)]))),128))])):U("",!0)}}}),ga={class:"assets-container"},va={class:"item"},ya=["src"],xa=["src"],wa={class:"text-center select-none"},Ca=R({__name:"assets",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){var i,d,f;const e=t,n=((d=(i=e.column)==null?void 0:i.params)==null?void 0:d.resource)??[],o=(f=e.column)==null?void 0:f.field;let s=x();if(o.includes(".")){const p=o.split(".");s=le(e.row,p)}else s=e.row[o];const a="";return(p,h)=>{const u=A,r=Jt;return v(),P("div",ga,[(v(!0),P(W,null,ae(l(n),(c,m)=>(v(),$(r,{key:m,show:c.isUpdate,trigger:"hover",placement:"top"},{trigger:C(()=>[E("div",va,[(c==null?void 0:c.type)==="url"&&l(mt)(c==null?void 0:c.icon)?(v(),P("img",{key:0,class:"logo",src:c==null?void 0:c.icon},null,8,ya)):U("",!0),(c==null?void 0:c.type)==="path"?(v(),P("img",{key:1,class:"logo",src:l(a)+(c==null?void 0:c.icon)},null,8,xa)):(v(),$(u,{key:2,icon:c.icon},null,8,["icon"])),E("div",wa,G(l(s)[c.field]??"字段错误"),1)])]),default:C(()=>[O(" "+G((c==null?void 0:c.title)??"未知"),1)]),_:2},1032,["show"]))),128))])}}});const ka=K(Ca,[["__scopeId","data-v-0c469536"]]),ba=R({__name:"money",props:{row:null,column:null},setup(t){var i;const e=t,n=x(((i=e.column)==null?void 0:i.params)??{}),o=e.column.field;let s=x();if(o.includes(".")){const d=o.split(".");s=le(e.row,d)}else s=e.row[o];const a=x("￥");return n!=null&&n.format&&(a.value=n==null?void 0:n.format,n==null||delete n.format),(d,f)=>(v(),P("div",V(q(l(n))),G(l(a))+G(l(Ut).commafy(l(Ut).toNumber(l(s)),{digits:2})),17))}}),Pa=R({__name:"swtich",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){const e=t,{notification:n}=j(),o=x({}),s=e.column.field;let a=x();if(s.includes(".")){const f=s.split(".");a=le(e.row,f)}else a=e.row[s];const i=({focused:f,checked:p})=>{var h,u,r,c;return p?o.value=((u=(h=e.column)==null?void 0:h.params)==null?void 0:u.checked)??{}:o.value=((c=(r=e.column)==null?void 0:r.params)==null?void 0:c.unchecked)??{},o.value},d=f=>{var m,g,b,_,w;const p=((g=(m=e.vxeGridConfig)==null?void 0:m.rowConfig)==null?void 0:g.keyField)??"id",h={[p]:e.row[p],keyField:p,field:(b=e.column)==null?void 0:b.field,value:f},u=xe("rowEdit",!0),r=((_=e.column.params)==null?void 0:_.api)??u,c=x({method:((w=e.column.params)==null?void 0:w.method)??"PUT",params:{},data:{}});c.value.method==="GET"?c.value.params={...h}:c.value.data={...h},L(r,c.value).then(k=>{e.xGrid.commitProxy("query"),n==null||n.success({title:(k==null?void 0:k.msg)??"操作成功",duration:1500})})};return(f,p)=>{var u,r,c,m,g,b;const h=Gn;return v(),$(h,{"rail-style":i,"default-value":l(a),"checked-value":(c=(r=(u=t.column)==null?void 0:u.params)==null?void 0:r.checked)==null?void 0:c.value,"unchecked-value":(b=(g=(m=t.column)==null?void 0:m.params)==null?void 0:g.unchecked)==null?void 0:b.value,"on-update:value":d},{checked:C(()=>{var _,w,k;return[O(G((k=(w=(_=t.column)==null?void 0:_.params)==null?void 0:w.checked)==null?void 0:k.text),1)]}),unchecked:C(()=>{var _,w,k;return[O(G((k=(w=(_=t.column)==null?void 0:_.params)==null?void 0:w.unchecked)==null?void 0:k.text),1)]}),icon:C(()=>{var _,w,k,S;return[(w=(_=t.column)==null?void 0:_.params)!=null&&w.icon?(v(),$(A,{key:0,icon:(S=(k=t.column)==null?void 0:k.params)==null?void 0:S.icon},null,8,["icon"])):U("",!0)]}),"checked-icon":C(()=>{var _,w,k,S,D,T;return[(k=(w=(_=t.column)==null?void 0:_.params)==null?void 0:w.checked)!=null&&k.icon?(v(),$(A,{key:0,icon:(T=(D=(S=t.column)==null?void 0:S.params)==null?void 0:D.checked)==null?void 0:T.icon},null,8,["icon"])):U("",!0)]}),"unchecked-icon":C(()=>{var _,w,k,S,D,T;return[(k=(w=(_=t.column)==null?void 0:_.params)==null?void 0:w.unchecked)!=null&&k.icon?(v(),$(A,{key:0,icon:(T=(D=(S=t.column)==null?void 0:S.params)==null?void 0:D.unchecked)==null?void 0:T.icon},null,8,["icon"])):U("",!0)]}),_:1},8,["default-value","checked-value","unchecked-value"])}}}),Sa=R({__name:"input",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){var h,u,r,c,m,g,b,_;const e=t,n=x(e.row[(h=e.column)==null?void 0:h.field]),o=x(e.row[(u=e.column)==null?void 0:u.field]),s=e.column.field,a=((c=(r=e.column)==null?void 0:r.params)==null?void 0:c.api)??xe("rowEdit",!0),i=((g=(m=e.column)==null?void 0:m.params)==null?void 0:g.method)??"PUT",d=((_=(b=e.column)==null?void 0:b.params)==null?void 0:_.props)??{};if(s.includes(".")){const w=s.split(".");n.value=le(e.row,w),o.value=le(e.row,w)}else n.value=e.row[s],o.value=e.row[s];const{notification:f}=j(),p=()=>{var D,T,B;const w=((T=(D=e.vxeGridConfig)==null?void 0:D.rowConfig)==null?void 0:T.keyField)??"id";if(n.value===o.value)return;const k={[w]:e.row[w],keyField:w,field:(B=e.column)==null?void 0:B.field,value:n.value},S=x({method:i??"PUT",params:{},data:{}});S.value.method==="GET"?S.value.params={...k}:S.value.data={...k},L(a,S.value).then(I=>{o.value=k.value,e.xGrid.commitProxy("query"),f==null||f.success({title:(I==null?void 0:I.msg)??"操作成功",duration:1500})})};return(w,k)=>{const S=it;return v(),$(S,Z({value:l(n),"onUpdate:value":k[0]||(k[0]=D=>ye(n)?n.value=D:null),"on-blur":p},l(d)),null,16,["value"])}}}),$a=R({__name:"select",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){var h,u,r,c,m,g,b,_,w;const e=t,n=x(e.row[(h=e.column)==null?void 0:h.field]),o=e.column.field,s=((r=(u=e.column)==null?void 0:u.params)==null?void 0:r.api)??xe("rowEdit",!0),a=((m=(c=e.column)==null?void 0:c.params)==null?void 0:m.method)??"PUT",i=((b=(g=e.column)==null?void 0:g.params)==null?void 0:b.propsData)??{},d=((w=(_=e.column)==null?void 0:_.params)==null?void 0:w.options)??[],{notification:f}=j();if(o.includes(".")){const k=o.split(".");n.value=le(e.row,k)}else n.value=e.row[o];const p=k=>{var B,I,Q;const S=((I=(B=e.vxeGridConfig)==null?void 0:B.rowConfig)==null?void 0:I.keyField)??"id",D={[S]:e.row[S],keyField:S,field:(Q=e.column)==null?void 0:Q.field,value:k},T=x({method:a??"PUT",params:{},data:{}});T.value.method==="GET"?T.value.params={...D}:T.value.data={...D},L(s,T.value).then(ne=>{e.xGrid.commitProxy("query"),n.value=k,f==null||f.success({title:(ne==null?void 0:ne.msg)??"操作成功",duration:1500})})};return(k,S)=>{const D=Fn;return v(),$(D,Z({value:l(n),"onUpdate:value":S[0]||(S[0]=T=>ye(n)?n.value=T:null)},l(i),{options:l(d),"on-update:value":p}),null,16,["value","options"])}}}),Ra={key:0,class:"tabs-container"},Ea={class:"tabs-box"},Da=["onClick"],Ua={class:"pl-1"},Ta=R({__name:"tabs",props:{xGrid:null,vxeGridConfig:null,tabsConfig:null},setup(t){var f;const e=t,n=re(),o=ut(),s=x({inline:!0,size:1,...((f=e.tabsConfig)==null?void 0:f.space)??{}}),a=n==null?void 0:n.query[e.tabsConfig.field],i=x(a??e.tabsConfig.active),d=p=>{o.push({query:{[e.tabsConfig.field]:p.value}})};return(p,h)=>{const u=ie;return t.tabsConfig.list.length>0?(v(),P("div",Ra,[E("div",Ea,[y(u,V(q(l(s))),{default:C(()=>[(v(!0),P(W,null,ae(t.tabsConfig.list,(r,c)=>(v(),P("div",{key:c,class:se(["item",{active:l(i)===(r==null?void 0:r.value)}]),onClick:m=>d(r)},[r!=null&&r.icon?(v(),$(A,{key:0,icon:r==null?void 0:r.icon},null,8,["icon"])):U("",!0),E("span",Ua,G((r==null?void 0:r.label)??"错误"),1)],10,Da))),128))]),_:1},16)])])):U("",!0)}}});const ja=K(Ta,[["__scopeId","data-v-5c06d3a3"]]),Ba=R({__name:"tags",props:{row:null,column:null},setup(t){var a,i,d,f,p,h,u;const e=t,n=x("标签出错"),o=x({}),s=e.row[(a=e.column)==null?void 0:a.field];return(d=(i=e.column)==null?void 0:i.params)!=null&&d.options&&(n.value=(p=(f=e.column)==null?void 0:f.params)==null?void 0:p.options[s]),(u=(h=e.column)==null?void 0:h.params)!=null&&u.style&&(o.value=e.column.params.style[s]),(r,c)=>{const m=zn;return v(),$(m,V(q(l(o))),{default:C(()=>[O(G(l(n)),1)]),_:1},16)}}}),Aa=R({__name:"remote",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){var a,i,d;const e=t,n=x((i=(a=e.column)==null?void 0:a.params)==null?void 0:i.file),o=((d=e.column)==null?void 0:d.field)??"",s=x(e.row[o]??"");return(f,p)=>(v(),$(l(me),Z({file:l(n)},{modelValue:l(s),column:t.column,row:t.row}),null,16,["file"]))}}),Le=(t,e)=>{let n={};for(const o in t){const s=t[o]??"id";n={...n,[s]:e[o]??""}}return n},Ga=({xGrid:t,vxeGridConfig:e,button:n,row:o,column:s})=>{var h,u,r,c,m,g,b;const a=J.currentRoute.value,{notification:i}=j(),d={method:((h=n.pageData)==null?void 0:h.method)??"GET",params:{},data:{}};let p={...((u=n==null?void 0:n.pageData)==null?void 0:u.queryParams)??{},...a.query};if(o&&s&&te(JSON.stringify((r=n==null?void 0:n.pageData)==null?void 0:r.aliasParams),["[]","{}"])){const _=((c=e==null?void 0:e.rowConfig)==null?void 0:c.keyField)??"id";p={...p,[_]:o[_]}}te(JSON.stringify((m=n==null?void 0:n.pageData)==null?void 0:m.aliasParams),["[]","{}"])||(p={...p,...Le((g=n==null?void 0:n.pageData)==null?void 0:g.aliasParams,o)}),d.method==="GET"?d.params={...p}:d.data={...p},L(((b=n.pageData)==null?void 0:b.api)??"",d).then(_=>{t==null||t.commitProxy("query"),i==null||i.success({title:(_==null?void 0:_.msg)??"操作成功",duration:1500})})},Bt=({vxeGridConfig:t,button:e,row:n,column:o})=>{var f,p,h,u,r,c,m,g;const{notification:s}=j();if(!((f=e==null?void 0:e.pageData)!=null&&f.path)){s==null||s.error({title:"缺少跳转地址",duration:1500});return}const a=J.currentRoute.value;let d={...((p=e==null?void 0:e.pageData)==null?void 0:p.queryParams)??{},...a.query};if(n&&o&&te(JSON.stringify((h=e==null?void 0:e.pageData)==null?void 0:h.aliasParams),["[]","{}"])){const b=((u=t==null?void 0:t.rowConfig)==null?void 0:u.keyField)??"id";d={...d,[b]:n[b]}}te(JSON.stringify((r=e==null?void 0:e.pageData)==null?void 0:r.aliasParams),["[]","{}"])||(d={...d,...Le((c=e==null?void 0:e.pageData)==null?void 0:c.aliasParams,n)}),(m=e.pageData)!=null&&m.isBack&&(d={...d,isBack:1}),J.push({path:(g=e==null?void 0:e.pageData)==null?void 0:g.path,query:{...d}})},Fa=({xGrid:t,vxeGridConfig:e,button:n,row:o,column:s})=>{const{dialog:a}=j();a==null||a.create({...(n==null?void 0:n.message)??{},maskClosable:!1,onPositiveClick:()=>{Ga({xGrid:t,vxeGridConfig:e,button:n,row:o,column:s})}})},nt=x({submitBtn:{},resetBtn:{}}),Ve=x({hanldSubmit:()=>{},hanldReset:()=>{}}),Ie=x({setDisabled:()=>{}}),be=x(),za=({vxeGridConfig:t,button:e,row:n,column:o})=>{var f,p,h,u,r,c,m,g,b,_;const s=J.currentRoute.value;let a,i={},d={...s.query};if(JSON.stringify((f=e.pageData)==null?void 0:f.queryParams)!=="{}"&&(d={...(p=e.pageData)==null?void 0:p.queryParams}),n&&o&&te(JSON.stringify((h=e==null?void 0:e.pageData)==null?void 0:h.aliasParams),["[]","{}"])){const w=((u=t==null?void 0:t.rowConfig)==null?void 0:u.keyField)??"id";d={...d,[w]:n[w]}}switch(te(JSON.stringify((r=e==null?void 0:e.pageData)==null?void 0:r.aliasParams),["[]","{}"])||(d={...d,...Le((c=e==null?void 0:e.pageData)==null?void 0:c.aliasParams,n)}),(m=e.pageData)==null?void 0:m.type){case"table":a=an,i={api:((g=e==null?void 0:e.pageData)==null?void 0:g.api)??""};break;case"remote":a=me,i={file:((b=e==null?void 0:e.pageData)==null?void 0:b.path)??"",modal:(e==null?void 0:e.pageData.modal)??!1,ajaxParams:d,"onUpdate:closeWin":()=>{var w;(w=be.value)!=null&&w.destroy&&be.value.destroy()}};break;default:a=Ct,i={api:((_=e==null?void 0:e.pageData)==null?void 0:_.api)??"",method:e.pageData.method??"GET",ajaxParams:d,"onUpdate:init":w=>{var k,S;Ve.value.hanldSubmit=(k=w==null?void 0:w.exposed)==null?void 0:k.hanldSubmit,Ve.value.hanldReset=(S=w==null?void 0:w.exposed)==null?void 0:S.hanldReset,nt.value.submitBtn=w==null?void 0:w.response.extraConfig.submitBtn,nt.value.resetBtn=w==null?void 0:w.response.extraConfig.resetBtn},"onUpdate:success":()=>{var w;Ie.value.setDisabled(!1),(w=be.value)!=null&&w.destroy&&be.value.destroy()},"onUpdate:rest":()=>{Ie.value.setDisabled(!1)},"onUpdate:error":()=>{Ie.value.setDisabled(!1)}};break}return{hpComponent:a,componentAttrs:i}},Oa=t=>{var a,i;const{dialog:e}=j(),{hpComponent:n,componentAttrs:o}=za(t),s={...((a=t.button)==null?void 0:a.message)??{},class:"pro-admin-dialog",content:()=>ee(n,{...o}),onAfterLeave:()=>{var d;(d=t.xGrid)==null||d.commitProxy("query")}};((i=t.button.pageData)==null?void 0:i.type)==="form"&&(s.action=()=>ee(we,{extraConfig:nt.value,"onUpdate:init":d=>{var f;Ie.value.setDisabled=(f=d==null?void 0:d.exposed)==null?void 0:f.setDisabled},"onUpdate:submit":()=>{Ve.value.hanldSubmit()},"onUpdate:rest":()=>{Ve.value.hanldReset()}})),be.value=e==null?void 0:e.create(s)},Ia=t=>{var p,h,u,r,c,m,g,b,_,w,k,S,D,T;const e=((h=(p=t.button)==null?void 0:p.pageData)==null?void 0:h.api)??"/",n=((u=t.button.pageData)==null?void 0:u.method)??"GET";let o=((r=t.button.pageData)==null?void 0:r.path)??"";const{notification:s}=j(),a=J.currentRoute.value,i={method:n,params:{},data:{}};let f={...((m=(c=t.button)==null?void 0:c.pageData)==null?void 0:m.queryParams)??{},...a.query};if(t.row&&t.column&&te(JSON.stringify((b=(g=t.button)==null?void 0:g.pageData)==null?void 0:b.aliasParams),["[]","{}"])){const B=((w=(_=t.vxeGridConfig)==null?void 0:_.rowConfig)==null?void 0:w.keyField)??"id";f={...f,[B]:t.row[B]}}te(JSON.stringify((S=(k=t.button)==null?void 0:k.pageData)==null?void 0:S.aliasParams),["[]","{}"])||(f={...f,...Le((T=(D=t.button)==null?void 0:D.pageData)==null?void 0:T.aliasParams,t.row)}),i.method==="GET"?i.params={...f}:i.data={...f},L(e,i).then(B=>{const{data:I}=B;if(!o){if(!(I!=null&&I.url)){s==null||s.error({title:"缺少跳转地址",duration:1500});return}o=I.url}mt(o)||(o=`//${location.host}/${o}`),window.open(o,"about:blank")})},ot=t=>{var e,n,o,s;((e=t.button.pageData)==null?void 0:e.type)==="page"?Bt(t):((n=t.button.pageData)==null?void 0:n.type)==="link"?Ia(t):((o=t.button.pageData)==null?void 0:o.type)==="confirm"?Fa(t):(s=t.button.pageData)!=null&&s.modal?Oa(t):Bt(t)},Ha=()=>{var o;const t=Ce(),e=(t==null?void 0:t.routerRecords)??[],n=[];for(const s of e){const a=`${(o=s.meta)==null?void 0:o.moduleName}${s.path}`;n.push(a)}return n},on=t=>{const e=Ha();return te(t,e)},Va=R({__name:"right-button",props:{xGrid:null,vxeGridConfig:null,column:null,row:null,rightButtonList:null},setup(t){var r,c,m,g,b;const e=t,n=z(()=>_=>{var B,I,Q,ne,Te,je,Be;const w=((B=_.pageData)==null?void 0:B.api)??"";if(!on(w))return!1;const k=((Q=(I=_==null?void 0:_.pageData)==null?void 0:I.params)==null?void 0:Q.where)??"",S=(Te=(ne=_==null?void 0:_.pageData)==null?void 0:ne.params)==null?void 0:Te.field,D=(Be=(je=_==null?void 0:_.pageData)==null?void 0:je.params)==null?void 0:Be.value;if(S===void 0&&D===void 0)return!0;if(S===void 0||S===""||S&&(D===void 0||D===""))return!1;const T=e.row[S];switch(k){case"!=":return D!==T;case"in":return D instanceof Array&&te(T,D);case"notIn":return D instanceof Array&&!te(T,D);default:return D===T}}),o=()=>{const _=e.rightButtonList,w=[];return _.forEach(k=>{var D;const S={label:k.title,key:k.field};(D=k.button)!=null&&D.icon&&(S.icon=()=>{var T;return ee(A,{icon:(T=k.button)==null?void 0:T.icon})}),w.push(S)}),w},s=_=>{const{notification:w}=j(),S=e.rightButtonList.find(D=>D.field===_);if(!S){w==null||w.error({title:"按钮数据错误",duration:1500});return}ot({xGrid:e.xGrid,button:S,row:e.row,column:e.column,vxeGridConfig:e.vxeGridConfig})},a=x(((r=e.column.params)==null?void 0:r.group)??!1),i=x(((c=e.column.params)==null?void 0:c.trigger)??"click"),d=x(((m=e.column.params)==null?void 0:m.icon)??"MenuOutlined"),f=x(((g=e.column.params)==null?void 0:g.group_text)??"更多"),p={type:"success",size:"small"},h=x(((b=e.column.params)==null?void 0:b.group_style)??p),u=z(()=>o());return(_,w)=>{const k=A,S=Re,D=dt,T=ie;return v(),P("div",null,[l(a)?(v(),$(D,{key:0,trigger:l(i),options:l(u),onSelect:s},{default:C(()=>[y(S,V(q(l(h))),{icon:C(()=>[y(k,{icon:l(d)},null,8,["icon"])]),default:C(()=>[O(G(l(f))+" ",1)]),_:1},16)]),_:1},8,["trigger","options"])):(v(),$(T,{key:1,align:"center",wrap:!1},{default:C(()=>[(v(!0),P(W,null,ae(t.rightButtonList,(B,I)=>(v(),P(W,null,[l(n)(B)?(v(),$(S,Z({key:I},(B==null?void 0:B.button)??{},{onClick:Q=>l(ot)({xGrid:t.xGrid,button:B,row:t.row,column:t.column,vxeGridConfig:t.vxeGridConfig})}),{icon:C(()=>{var Q,ne;return[(Q=B==null?void 0:B.button)!=null&&Q.icon?(v(),$(A,{key:0,icon:(ne=B==null?void 0:B.button)==null?void 0:ne.icon},null,8,["icon"])):U("",!0)]}),default:C(()=>[O(" "+G(B.title),1)]),_:2},1040,["onClick"])):U("",!0)],64))),256))]),_:1}))])}}}),qa={class:"flex space-x-3"},Na=R({__name:"top-button",props:{xGrid:null,column:null,topButtonList:null,vxeGridConfig:null},setup(t){const e=re(),n=z(()=>o=>{var a;const s=((a=o.pageData)==null?void 0:a.api)??"";return!!on(s)});return(o,s)=>{var d;const a=Re,i=ie;return v(),P("div",qa,[(d=l(e).query)!=null&&d.isBack?(v(),$(a,{key:0,type:"warning",onClick:l(He)},{default:C(()=>[O(" 返回 ")]),_:1},8,["onClick"])):U("",!0),y(i,{align:"center"},{default:C(()=>[(v(!0),P(W,null,ae(t.topButtonList,(f,p)=>(v(),P("div",{key:p},[l(n)(f)?(v(),$(a,Z({key:0},(f==null?void 0:f.button)??{},{onClick:h=>l(ot)({button:f,xGrid:t.xGrid,vxeGridConfig:t.vxeGridConfig})}),{icon:C(()=>{var h,u;return[(h=f==null?void 0:f.button)!=null&&h.icon?(v(),$(A,{key:0,icon:(u=f==null?void 0:f.button)==null?void 0:u.icon},null,8,["icon"])):U("",!0)]}),default:C(()=>[O(" "+G(f.title),1)]),_:2},1040,["onClick"])):U("",!0)]))),128))]),_:1})])}}}),an=R({__name:"index",props:{api:null,method:{default:"GET"},ajaxParams:{default:{}}},setup(t){const e=t,{xGrid:n,vxeGridConfig:o,tabsConfig:s,rightButtonList:a,topButtonList:i,hanldEditClose:d}=pa(e);return(f,p)=>{var u;const h=Se("vxe-grid");return(u=l(o))!=null&&u.id?(v(),$(h,Z({key:0,ref_key:"xGrid",ref:n},l(o),{class:"p-4",onEditClosed:l(d)}),{assets:C(({row:r,column:c,$grid:m})=>[y(l(ka),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),money:C(({row:r,column:c,$grid:m})=>[y(l(ba),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),image:C(({row:r,column:c,$grid:m})=>[y(l(ha),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),images:C(({row:r,column:c,$grid:m})=>[y(l(_a),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),icons:C(({row:r,column:c,$grid:m})=>[y(l(fa),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),switch:C(({row:r,column:c,$grid:m})=>[y(l(Pa),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),input:C(({row:r,column:c,$grid:m})=>[y(l(Sa),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),select:C(({row:r,column:c,$grid:m})=>[y(l($a),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),tags:C(({row:r,column:c,$grid:m})=>[y(l(Ba),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),remote:C(({row:r,column:c,$grid:m})=>[y(l(Aa),V(q({vxeGridConfig:l(o),row:r,column:c,xGrid:m})),null,16)]),topButtonList:C(({column:r,$grid:c})=>[y(l(Na),V(q({vxeGridConfig:l(o),topButtonList:l(i),column:r,xGrid:c})),null,16)]),top:C(({$grid:r})=>[y(l(ja),V(q({vxeGridConfig:l(o),tabsConfig:l(s),xGrid:r})),null,16)]),rightButtonList:C(({row:r,column:c,$grid:m})=>[y(l(Va),V(q({vxeGridConfig:l(o),rightButtonList:l(a),row:r,column:c,xGrid:m})),null,16)]),_:1},16,["onEditClosed"])):U("",!0)}}}),Ma=R({__name:"index",setup(t){const e=fe();return(n,o)=>(v(),$(l(me),V(q(l(e))),null,16))}}),N=(t,e)=>{const n=new Event(t);e&&(n.dataFul=e),window.dispatchEvent(n)},sn=(t,e)=>new Promise(n=>{const{dialog:o}=j(),{notification:s}=j();o==null||o.warning({title:"温馨提示",content:"是否确认删除该数据？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{We(t,{id:e}).then(async i=>{n(i),s==null||s.success({title:(i==null?void 0:i.msg)??"操作成功",duration:1500})})}})}),at=(t,e,n,o)=>new Promise(s=>{const{dialog:a}=j(),i=x(),d=x({hanldSubmit:()=>{},hanldReset:()=>{}}),f=x({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"取消",show:!0}}),p={title:t,class:"pro-admin-dialog",style:{width:"45%"},showIcon:!1,maskClosable:!1,content:()=>ee(Ct,{api:e,method:n,isModal:!0,ajaxParams:o??{},"onUpdate:init":h=>{var u,r;d.value.hanldSubmit=(u=h==null?void 0:h.exposed)==null?void 0:u.hanldSubmit,d.value.hanldReset=(r=h==null?void 0:h.exposed)==null?void 0:r.hanldReset},"onUpdate:success":h=>{var u;s(h),(u=i.value)==null||u.destroy()}}),action:()=>ee(we,{extraConfig:f.value,"onUpdate:submit":()=>{d.value.hanldSubmit()},"onUpdate:rest":()=>{var h;(h=i.value)==null||h.destroy()}})};i.value=a==null?void 0:a.create(p)}),Wa=()=>{const t=Y();return{getCategory:async()=>{var p;const d=((p=Y().site)==null?void 0:p.uploadify_cate.index)??"",{data:f}=await he(d);return f},hanldClickCate:async(i,d)=>{i!==d&&(N("uploadify:cateActive",{active:d}),N("uploadify:files",{cid:d}))},hanldAddCate:()=>{var d;const i=((d=t.site)==null?void 0:d.uploadify_cate.add)??"";at("添加分类",i,"GET",{}).then(async()=>{N("uploadify:category"),N("uploadify:files")})},hanldEditCate:i=>{var f;const d=((f=t.site)==null?void 0:f.uploadify_cate.edit)??"";at("添加分类",d,"GET",{id:i}).then(async()=>{N("uploadify:category"),N("uploadify:files")})},hanldDelCate:i=>{var f;const d=((f=t.site)==null?void 0:f.uploadify_cate.del)??"";sn(d,i).then(async()=>{N("uploadify:category"),N("uploadify:files")})}}},La=()=>{const t=Y(),{notification:e,dialog:n}=j();return{getUploadifyList:async u=>{var m;const r=((m=t.site)==null?void 0:m.uploadify_api.index)??"",{data:c}=await he(r,u);return c},hanldEditFile:u=>{var c;const r=((c=t.site)==null?void 0:c.uploadify_api.edit)??"";at("修改附件",r,"GET",{id:u}).then(async()=>{N("uploadify:files")})},hanldDelFile:u=>{var c;const r=((c=t.site)==null?void 0:c.uploadify_api.del)??"";sn(r,u).then(async()=>{N("uploadify:files")})},hanldDelsFile:u=>{if(!(u!=null&&u.length)){e==null||e.error({title:"请勾选需要删除的附件",duration:1500});return}n==null||n.warning({title:"温馨提示",content:"是否确认删除选中的数据？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{var c;const r=((c=t.site)==null?void 0:c.uploadify_api.del)??"";u.forEach(m=>{We(r,{id:m}).then(b=>{N("uploadify:files"),e==null||e.success({title:(b==null?void 0:b.msg)??"操作完成",duration:1500})})}),N("uploadify:clearCheckbox")}})},hanldMoveFile:(u,r)=>{var g;if(!(r!=null&&r.length)){e==null||e.error({title:"请勾选需要移动的附件",duration:1500});return}const c=((g=t.site)==null?void 0:g.uploadify_api.move)??"";yt(c,{cate_id:u,ids:r}).then(b=>{N("uploadify:files"),N("uploadify:clearSelected"),N("uploadify:clearCheckbox"),e==null||e.success({title:(b==null?void 0:b.msg)??"操作完成",duration:1500})})},hanldSelected:(u,r,c)=>{if(c===1){r[0]=u;return}if(!(r!=null&&r.length)){r==null||r.push(u);return}if(!(r!=null&&r.find(m=>m===u)))r==null||r.push(u);else for(let m=0;m<r.length;m++)if(r[m]===u){r.splice(m,1);break}},hanldCheckBox:(u,r)=>{if(!(u!=null&&u.length)){u==null||u.push(r);return}if(!(u!=null&&u.find(c=>c===r)))u==null||u.push(r);else for(let c=0;c<u.length;c++)if(u[c]===r){u.splice(c,1);break}},uploadFinish:u=>{var c,m;const r=(m=(c=u==null?void 0:u.event)==null?void 0:c.target)!=null&&m.response?JSON.parse(u.event.target.response):{msg:"上传结束",code:404};r.code===200?(N("uploadify:cateActive",{active:""}),N("uploadify:files"),e==null||e.success({title:r.msg??"上传完成",duration:1500})):e==null||e.error({title:r.msg??"上传失败",duration:1500})}}},Ja=()=>({handlePageChange:e=>{const n={page:e.currentPage,limit:e.pageSize};N("uploadify:paginator",n)}}),kt=t=>(qn("data-v-8afbe171"),t=t(),Nn(),t),Ka={class:"h-550px flex border-solid border-t-1 mt-15px"},Qa={class:"w-150px h-100% border-solid border-r-1 overflow-y-auto overflow-x-hidden"},Za={class:"text-12px flex"},Ya=kt(()=>E("span",{class:"pl-1"},"全部分类",-1)),Xa=["title","onClick","onDblclick"],es={class:"text-12px flex"},ts={class:"pl-1 truncate"},ns={class:"h-100% flex-1 flex flex-col"},os={class:"flex justify-between items-center h-55px px-5"},as=kt(()=>E("div",{class:"text-12px text-dark"},null,-1)),ss={class:"flex-1 overflow-y-auto overflow-x-hidden border-solid border-t-1 p-3"},ls={class:"w-100% h-120px"},rs=kt(()=>E("div",{class:"w-100% h-100% flex items-center justify-center bg-gray select-none"}," 图片加载失败 ",-1)),cs={class:"absolute bottom-39px left-0 right-0 text-center py-3px text-white bg-[rgba(0,0,0,0.5)] text-12px truncate"},is={class:"flex justify-between p-2"},us={class:"flex space-x-2"},ds={class:"h-55px flex items-center justify-center border-solid border-t-1"},ps=R({__name:"uploadify",props:{modelValue:null,format:null,limit:{default:1}},emits:["update:init"],setup(t,{expose:e,emit:n}){var Rt;const o=t,{notification:s}=j(),a=Ee(),i=De(),d=Y(),f=x(""),p=x([]),h=x([]),u=x([]),r=x([]),c=x([]),m=x({currentPage:1,pageSize:20,total:0,background:!0}),g=Ne(),{getCategory:b,hanldClickCate:_,hanldAddCate:w,hanldEditCate:k,hanldDelCate:S}=Wa(),{getUploadifyList:D,hanldEditFile:T,hanldMoveFile:B,hanldDelFile:I,hanldDelsFile:Q,hanldSelected:ne,hanldCheckBox:Te,uploadFinish:je}=La(),{handlePageChange:Be}=Ja(),dn={[_t]:a.value??"",[gt]:i.value??""};let St="";St=`//${location.host}/${(Rt=d.site)==null?void 0:Rt.uploadify_api.upload}`;const $t=x({action:St,headers:dn,data:{cid:f.value},showFileList:!1,multiple:!0,onFinish:F=>je({...F})}),pn=()=>{if(!h.value.length)return s==null||s.error({title:"请选择附件再确定",duration:1500}),[];if(h.value.length>o.limit)return s==null||s.error({title:`最多选择${o.limit}个附件`,duration:1500}),[];const F=[];for(let H=0;H<c.value.length;H++){const X=c.value[H];te(X.id,h.value)&&F.push(X.url)}return F};return window.addEventListener("uploadify:cateActive",F=>{const{active:H}=F.dataFul;f.value=H,$t.value.data={cid:H}}),window.addEventListener("uploadify:category",async F=>{const H=await b();r.value=H,H.forEach(X=>{u.value.push({label:`移动至 -- ${X==null?void 0:X.title}`,key:X==null?void 0:X.id})})}),window.addEventListener("uploadify:selected",F=>{F.dataFul}),window.addEventListener("uploadify:clearSelected",F=>{h.value=[]}),window.addEventListener("uploadify:clearCheckbox",F=>{p.value=[]}),window.addEventListener("uploadify:files",async F=>{var Ae,Ge,Fe;const H=(Ae=F==null?void 0:F.dataFul)==null?void 0:Ae.cid,X=(Ge=F==null?void 0:F.dataFul)==null?void 0:Ge.page,ue=(Fe=F==null?void 0:F.dataFul)==null?void 0:Fe.limit,ce=await D({cid:H,page:X,limit:ue});c.value=(ce==null?void 0:ce.data)??[],m.value.currentPage=ce.current_page,m.value.pageSize=ce.per_page,m.value.total=ce.total}),window.addEventListener("uploadify:paginator",F=>{const{page:H,limit:X}=F.dataFul;m.value.currentPage=H,m.value.pageSize=X;const ue={cid:f.value,page:H,limit:X};N("uploadify:files",ue)}),ct(async()=>{N("uploadify:category"),N("uploadify:files"),n("update:init",{exposed:g.exposed})}),e({hanldConfirmSelect:pn}),(F,H)=>{const X=Kt,ue=Re,Et=On,ce=dt,Ae=ie,Ge=$e,Fe=In,fn=Hn,hn=Vn,mn=Se("vxe-pager");return v(),P("div",Ka,[E("div",Qa,[y(X,null,{default:C(()=>[O(" 附件分类 ")]),_:1}),E("div",{class:se(["px-10px flex justify-between cursor-pointer hover:bg-[#e5e5e5] py-15px select-none",{"bg-[#e5e5e5]":l(f)===""}]),onClick:H[0]||(H[0]=M=>l(_)(l(f),""))},[E("div",Za,[y(A,{icon:"AppstoreOutlined",color:"#666"}),Ya]),y(A,{icon:"FolderAddOutlined",color:"#888",onClick:l(w)},null,8,["onClick"])],2),(v(!0),P(W,null,ae(l(r),(M,Je)=>(v(),P("div",{key:Je,title:M.title,class:se(["px-10px flex justify-between cursor-pointer hover:bg-[#e5e5e5] py-15px select-none",{"bg-[#e5e5e5]":l(f)===M.id}]),onClick:_e=>l(_)(l(f),M.id),onDblclick:_e=>l(k)(M.id)},[E("div",es,[y(A,{icon:"FolderOpenTwotone",color:"#666"}),E("span",ts,G(M.title),1)]),y(A,{icon:"DeleteFilled",color:"#666",onClick:_e=>l(S)(M.id)},null,8,["onClick"])],42,Xa))),128))]),E("div",ns,[E("div",os,[as,y(Ae,{align:"center"},{default:C(()=>[E("div",null,[y(Et,V(q(l($t))),{default:C(()=>[y(ue,{type:"success"},{icon:C(()=>[y(A,{icon:"UploadOutlined"})]),default:C(()=>[O(" 上传 ")]),_:1})]),_:1},16)]),E("div",null,[y(ce,{trigger:"hover",options:l(u),onSelect:H[1]||(H[1]=M=>l(B)(M,l(p)))},{default:C(()=>[y(ue,{type:"warning"},{icon:C(()=>[y(A,{icon:"RotateLeftOutlined"})]),default:C(()=>[O(" 移动 ")]),_:1})]),_:1},8,["options"])]),E("div",null,[y(ue,{type:"error",onClick:H[2]||(H[2]=M=>l(Q)(l(p)))},{icon:C(()=>[y(A,{icon:"RestFilled"})]),default:C(()=>[O(" 删除 ")]),_:1})])]),_:1})]),E("div",ss,[y(hn,{cols:5,"y-gap":10,"x-gap":12},{default:C(()=>[(v(!0),P(W,null,ae(l(c),(M,Je)=>(v(),$(fn,{key:Je},{default:C(()=>[E("div",{class:se(["relative border-solid border-1",l(te)(M.id,l(h)??[])?"border-red":"border-gray"])},[E("div",ls,[y(Ge,{class:"w-100% h-100% cursor-pointer !block",src:M.url,"preview-disabled":!0,onClick:_e=>l(ne)(M.id,l(h),o.limit)},{placeholder:C(()=>[rs]),_:2},1032,["src","onClick"])]),E("div",cs,G(M.title),1),E("div",is,[E("div",null,[y(Fe,{checked:l(te)(M.id,l(p)),value:M.id,onClick:_e=>l(Te)(l(p),M.id)},null,8,["checked","value","onClick"])]),E("div",us,[y(A,{icon:"EditOutlined",class:"cursor-pointer",color:"#555",title:"修改",size:20,onClick:_e=>l(T)(M.id)},null,8,["onClick"]),y(A,{icon:"DeleteOutlined",class:"cursor-pointer",color:"#555",title:"删除",size:20,onClick:_e=>l(I)(M.id)},null,8,["onClick"])])])],2)]),_:2},1024))),128))]),_:1})]),E("div",ds,[y(mn,Z(l(m),{layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:l(Be)}),null,16,["onPageChange"])])])])}}});const fs=K(ps,[["__scopeId","data-v-8afbe171"]]),hs={class:"absolute top-0 right-0 w-15px h-15px rounded-3px bg-[rgba(0,0,0,.45)] text-12px cursor-pointer select-none flex items-center justify-center"},ms=R({__name:"index",props:{modelValue:null,format:null,limit:{default:1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{dialog:o}=j(),s=x(),a=x(),i=x({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"关闭",show:!0}}),d=p=>{const h=[...n.modelValue];h.splice(p,1),e("update:modelValue",h)},f=()=>{a.value=o==null?void 0:o.create({title:"附件管理器",class:"pro-admin-dialog",style:{width:"45%"},showIcon:!1,maskClosable:!1,content:()=>ee(fs,{...n,"onUpdate:init":p=>{s.value=p.exposed}}),action:()=>ee(we,{extraConfig:i.value,"onUpdate:submit":()=>{var h;const p=s.value.hanldConfirmSelect();p.length&&(e("update:modelValue",p),(h=a.value)==null||h.destroy())},"onUpdate:rest":()=>{var p;(p=a.value)==null||p.destroy()}})})};return Qt(()=>{typeof n.modelValue=="string"&&e("update:modelValue",n.modelValue===""?[]:[n.modelValue])}),(p,h)=>{const u=$e,r=ie;return t.modelValue instanceof Array?(v(),$(r,{key:0},{default:C(()=>[(v(!0),P(W,null,ae(t.modelValue,(c,m)=>(v(),P("div",{key:m,class:"flex items-center justify-center w-35px h-35px relative cursor-pointer border-1 border-solid rounded-3px bg-[#f5f5f5] border-[#888]"},[y(u,{src:c},null,8,["src"]),E("div",hs,[y(A,{icon:"DeleteFilled",size:14,color:"#fff",onClick:g=>d(m)},null,8,["onClick"])])]))),128)),E("div",{class:"flex items-center justify-center w-35px h-35px relative cursor-pointer border-1 border-solid rounded-3px bg-[#f5f5f5] border-[#888]",onClick:f},[y(A,{icon:"FolderOpenOutlined",size:20,color:"#555"})])]),_:1})):U("",!0)}}}),_s=R({__name:"index",props:{modelValue:null,style:{default:{}}},setup(t){return(e,n)=>(v(),P("div",V(q(t.style)),G(t.modelValue),17))}}),gs={javascript:Mn,php:Wn,python:Ln,java:Jn,css:Kn,xml:Qn},vs=t=>(Tt.registerLanguage(t,gs[t]),Tt),ys={class:"w-100%"},xs=["innerHTML"],ws=R({__name:"index",props:{modelValue:null,language:{default:"javascript"},showLineNumbers:{type:Boolean}},setup(t){const e=t,n=vs(e.language),o=x("");return Qt(()=>{o.value=n.highlight(e.modelValue,{language:e.language}).value}),(s,a)=>(v(),P("div",ys,[E("pre",null,[O("    "),E("code",{class:"hljs",innerHTML:l(o)},null,8,xs),O(`
    `)])]))}});const Cs=K(ws,[["__scopeId","data-v-8be2469c"]]),ks=["innerHTML"],bs=R({__name:"index",props:{text:null,icon:{default:""},style:{default:{color:"#666",padding:"5px 0 0 0",fontSize:"12px"}},iconSize:{default:16}},setup(t){return(e,n)=>{const o=A;return v(),P("div",{class:"form-prompt",style:qt(t.style)},[t.icon?(v(),$(o,{key:0,icon:t.icon,size:t.iconSize},null,8,["icon","size"])):U("",!0),E("span",{class:"text",innerHTML:t.text},null,8,ks)],4)}}});const Ps=K(bs,[["__scopeId","data-v-76a40fc1"]]),Ss={class:"editor-container"},$s=R({__name:"wang-editor",props:{modelValue:null,toolbarConfig:null,editorConfig:null,editHeight:{default:300}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t;pe(f=>({e829e538:l(d)}));const o=Zn(),s=x(n.modelValue);Yn(()=>{const f=o.value;f!=null&&f.destroy()});const a=f=>{o.value=f},i=f=>{const p=f.getHtml();e("update:modelValue",p)},d=z(()=>`${n.editHeight}px`);return(f,p)=>(v(),P("div",Ss,[y(l(Xn),Z({class:"toolbar",editor:l(o)},t.toolbarConfig),null,16,["editor"]),y(l(eo),{modelValue:l(s),"onUpdate:modelValue":p[0]||(p[0]=h=>ye(s)?s.value=h:null),"default-config":t.editorConfig,class:"editor-content",onOnCreated:a,onOnChange:i},null,8,["modelValue","default-config"])]))}});const Rs=K($s,[["__scopeId","data-v-2fc4a811"]]),Es={};function Ds(t,e){return v(),P("div",null," tinymce正在等待集成中... ")}const Us=K(Es,[["render",Ds]]),qe={amap:zo,bmap:Ho,icons:Lo,qmap:Qo,remote:Ma,uploadify:ms,info:_s,HCode:Cs,PromptTip:Ps,wangEditor:Rs,tinymceEditor:Us};function Ts(t){Object.keys(qe).forEach(e=>{t.component(e,qe[e])})}const js=(t,e)=>{const n=x((t==null?void 0:t.file)??""),o=x(),s=x(""),a=x(""),i=x(Ke()),d=()=>{if(!n.value){s.value="config";return}s.value="loading";const _=Date.now(),w=`${n.value}.vue?t=${_}`;he(w).then(k=>{a.value=k,s.value="success",e("update:init",k)}).catch(k=>{console.error(k),s.value="fail",e("update:error",k)})};d();const f=(_,w="el-icon-warning",k="font-size:26px;color:red;")=>({template:`
        <div class="remote-loading">
            <div class="${w}" style="${k}"></div>
            <div class="mt-5px">${_}</div>
        </div>
        `}),p=(_,w)=>{to.render(_).then(k=>{const S=document.createElement("style");if(S.setAttribute("type","text/css"),S.setAttribute("id",`css${w}`),S.styleSheet)S.styleSheet.cssText=k.css;else{const T=document.createTextNode(k.css);S.appendChild(T)}const D=document.getElementsByTagName("head");D.length?D[0].appendChild(S):document.documentElement.appendChild(S)})},h=_=>({templates:_.match(/<template>([\s\S]*)<\/template>/)[1],sctipts:_.match(/<script.*>([\s\S]*)<\/script>/)[1],styles:_.match(/<style.*>([\s\S]*)<\/style>/)[1],stylesHasScoped:_.match(/<style.*scoped>([\s\S]*)<\/style>/)!==null}),u=()=>{const _=wt.vue,{notification:w,message:k,dialog:S,loadingBar:D}=j(),T=ut(),B=re(),I=Ce(),Q=Y();_.config.globalProperties.$userApp=I,_.config.globalProperties.$siteApp=Q,_.config.globalProperties.$routeApp=B,_.config.globalProperties.$routerApp=T,_.config.globalProperties.$http=Po,_.config.globalProperties.$echarts=no,_.component("AppIcons")===void 0&&_.component("AppIcons",A),Object.keys(qe).forEach(ne=>{_.component(ne)===void 0&&_.component(ne,qe[ne])}),Lt.install(_),_.config.globalProperties.$useNotification=w,_.config.globalProperties.$useMessage=k,_.config.globalProperties.$useDialog=S,_.config.globalProperties.$useLoadingBar=D},r=(_,w,k)=>{const S=h(w),D=S.sctipts.indexOf("{"),T=S.sctipts.lastIndexOf("}"),B=S.sctipts.slice(D,T+1),I=new Function(`return ${B}`)();if(!I)return f("远程组件代码格式解析失败");if(I.template=S==null?void 0:S.templates,_.setAttribute("class",`remote css${k}`),!document.querySelector(`style[id=css${k}]`)){let Q="";S.stylesHasScoped?Q=`
            .css${k}{
                ${S.styles}
            }
        `:Q=S.styles,p(Q,k)}return u(),I},c=z(()=>s.value==="config"?f("请先配置远程文件"):s.value==="fail"?f("远程组件加载失败"):a.value?r(o.value,a.value,i.value):f("正在加载中..."));return{fileUrl:n,remoteRef:o,loadingStatus:s,componentFile:a,cssId:i,currentView:c,hanldWin:_=>{n.value=_,i.value=Ke(),d()},hanldReload:()=>{i.value=Ke(),d()},hanldClose:()=>{t!=null&&t.modal&&e("update:closeWin")}}},Bs=R({__name:"index",emits:["update:init","update:success","update:error","update:closeWin"],setup(t,{emit:e}){const n=fe(),{remoteRef:o,loadingStatus:s,currentView:a,hanldClose:i,hanldReload:d,hanldWin:f}=js(n,e);return(p,h)=>(v(),P("div",{ref_key:"remoteRef",ref:o,class:"h-100%"},[l(s)==="success"?(v(),$(ke(l(a)),Z({key:0},l(n),{"onUpdate:openWin":l(f),"onUpdate:reloadWin":l(d),"onUpdate:closeWin":l(i)}),null,16,["onUpdate:openWin","onUpdate:reloadWin","onUpdate:closeWin"])):U("",!0)],512))}});const me=K(Bs,[["__scopeId","data-v-6270af91"]]),ln=R({__name:"header-left",setup(t){const n=Y().site,o=n==null?void 0:n.public_api;return(s,a)=>{var i,d;return v(),P("div",null,[(i=l(o))!=null&&i.header_left_file?(v(),$(me,{key:0,file:(d=l(o))==null?void 0:d.header_left_file},null,8,["file"])):U("",!0)])}}}),bt=R({__name:"header-right",setup(t){const n=Y().site,o=n==null?void 0:n.public_api.header_right_file;return(s,a)=>{const i=ie;return v(),$(i,{size:10,class:"h-100%"},{default:C(()=>[l(o)?(v(),$(me,{key:0,file:l(o)??""},null,8,["file"])):U("",!0),y(l(Vs))]),_:1})}}}),As={class:"h-100% flex items-center"},Gs={class:"flex select-none cursor-pointer"},Fs={class:"flex flex-col justify-center pl-1 text-12px text-#555"},zs={class:"flex items-center pl-1"},Os={class:"pl-1"},Is={key:0,class:"flex items-center pl-1"},Hs={class:"pl-1"},Vs=R({__name:"user",setup(t){const e=Ce(),n=Y(),o=re(),{dialog:s,notification:a}=j(),i=x([{label:"修改资料",key:"profile",icon:()=>ee(A,{icon:"EditTwotone"})},{label:"退出登录",key:"loginout",icon:()=>ee(A,{icon:"ExportOutlined"})}]),d=new Map,f=x({submitBtn:{},resetBtn:{}}),p=x({hanldSubmit:()=>{},hanldReset:()=>{}}),h=x({setDisabled:()=>{}});d.set("profile",()=>{const r=s==null?void 0:s.create({title:"用户资料",showIcon:!1,maskClosable:!1,class:"pro-admin-dialog",style:{width:"45%"},content:()=>{var c,m;return ee(Ct,{api:((m=(c=n.site)==null?void 0:c.public_api)==null?void 0:m.user_edit)??"",method:"GET",ajaxParams:{},"onUpdate:init":g=>{var b,_;p.value.hanldSubmit=(b=g==null?void 0:g.exposed)==null?void 0:b.hanldSubmit,p.value.hanldReset=(_=g==null?void 0:g.exposed)==null?void 0:_.hanldReset,f.value.submitBtn=g==null?void 0:g.response.extraConfig.submitBtn,f.value.resetBtn=g==null?void 0:g.response.extraConfig.resetBtn},"onUpdate:success":()=>{h.value.setDisabled(!1),r==null||r.destroy(),e.getUserInfo()},"onUpdate:error":()=>{h.value.setDisabled(!1)},"onUpdate:rest":()=>{h.value.setDisabled(!1)}})},action:()=>ee(we,{extraConfig:f.value,"onUpdate:init":c=>{var m;h.value.setDisabled=(m=c==null?void 0:c.exposed)==null?void 0:m.setDisabled},"onUpdate:submit":()=>{var c;(c=p.value)==null||c.hanldSubmit()},"onUpdate:rest":()=>{var c;(c=p.value)==null||c.hanldReset()}})})}),d.set("loginout",()=>{s==null||s.warning({title:"温馨提示",content:"是否确认退出登录？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Uo().then(r=>{var m,g;const c=(m=n.site)!=null&&m.login_url?`/#/${(g=n.site)==null?void 0:g.login_url}`:"/#/login";e.setToken(""),a==null||a.success({title:(r==null?void 0:r.msg)??"操作成功",duration:1500}),setTimeout(()=>{window.location.href=`${c}?redirect=${o.fullPath}`},500)})}})});const u=r=>{const c=d.get(r);typeof c=="function"&&c()};return(r,c)=>{const m=oo,g=dt;return v(),P("div",As,[y(g,{options:l(i),onSelect:u},{default:C(()=>{var b,_,w,k,S;return[E("div",Gs,[y(m,{round:"",size:35,src:(b=l(e).userInfo)==null?void 0:b.headimg},null,8,["src"]),E("div",Fs,[E("div",zs,[y(A,{icon:"UserOutlined"}),E("span",Os,G((_=l(e).userInfo)==null?void 0:_.nickname),1)]),(k=(w=l(e).userInfo)==null?void 0:w.role)!=null&&k.title?(v(),P("div",Is,[y(A,{icon:"CodeSandboxOutlined"}),E("span",Hs,G((S=l(e).userInfo)==null?void 0:S.role.title),1)])):U("",!0)])])]}),_:1},8,["options"])])}}}),qs=["href","target"],Ns=R({__name:"side-title",props:{MenuItem:null},setup(t){var h,u;const e=t,n=z(()=>{var r;return(r=e.MenuItem)==null?void 0:r.menuTitle}),o=x(e.MenuItem.ajaxParams?xo(e.MenuItem.ajaxParams):{}),s=z(()=>e.MenuItem.path??""),a=((u=(h=e.MenuItem)==null?void 0:h.children)==null?void 0:u.find(r=>(r==null?void 0:r.show)===!0&&(r==null?void 0:r.type)!=="group"))??!1,i=z(()=>{var r;return(r=s.value)==null?void 0:r.startsWith("http")}),d=z(()=>{var r;return((r=e.MenuItem)==null?void 0:r.target)??"_blank"}),f=De(),p=x("");if(f.value){const r=wo({appid:f.value});o.value={...o.value,appid:f.value},p.value=`?${r}`}return(r,c)=>{const m=Se("router-link");return l(a)?(v(),P(W,{key:0},[O(G(l(n)),1)],64)):l(i)?(v(),P("a",{key:1,href:`${l(s)}${l(p)}`,target:l(d)},G(l(n)),9,qs)):l(s)?(v(),$(m,{key:2,to:{path:`/${l(s)}`,query:{...l(o)}},replace:!0},{default:C(()=>[O(G(l(n)),1)]),_:1},8,["to"])):(v(),P(W,{key:3},[O(G(l(n)),1)],64))}}}),At="OUtzMas9edTHUH/JnNdjl4lHWYG9gISU6vl1DnlCzkumaS2EkD8OLhRzTMziPeF5AxwRwukfkvIVs2nzq7KWi2RxbtTzzLtOQMml5cLVHkQZs8dhEMLkXtyVFKOTAjsXTvU2NFMCfwUc8LhqIrDnbd11kU5oQoTcysWvQbk/P6wfBMd7p3TOZwWewFg+oz5qHfwhgtW2dXev4p+a9fknRNBKUgdBxStKVsImmh4SlXRfOlhgMhOoL6ycaOdbhz6LgvDynfuWIA7dngosFv6x9SXIW2WndIoztR/4A+9uYG6xxiuH7Por9QJjFVU/VzLytposud3gAQi7ba2gyN9I6g==e3dqJ6AL4KUa3qpU0WtHV215X5FP5e1CZeyTqT2ap9dEOIS8hp94xpVIod9MSyYorLrNVOo8OyocipT9zLZITtPJ5LNVczJcnzHrNi6goXzojZ7etvuGK0HRj8CygkIhZMb7PUF9lNodtoUJ8BOjKvvETpXXSnHmyhwyskBRtBZ3LwAbKNCNKPCDhDQgF/Zo8P0h+oUjCZ/3B2kvSxPhPS9OjPU583PqOlZZNf0/2TzC+JxCI2Du/87kDGUXS8Y7UKP2NzdlqT21VkOQnbsFHRGg3jfT/+uJu6M/qljnvGo6bp6nL0vpD0paZmKrSUGVE99FWkLYNRiWAKkttCDn2g==",Gt=`-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCz+Ny6Y+2LRQb5
d81sZgzExl3EwWHJnP/BDOqD90UxEYStdzVulGtykumcfUPW+Hugspq8waetBGb7
MEFcbl3y7cTmrK/4Uninmy5Nf4nsGQk+/5WvQE2pzlLfPH0ZgxWyFepNdIXc6+k/
loXCOLus0jUZoDnN1YJfDMtGi+VyYl1jbatu3TQohO15NRb4KZ1TUeWQbOSnpXDA
WA2x9qVJtgKn1sD3KlxPu9Lm01QqCiIrEHEBWWCJQesgwP98JS438kCRmZMQBEJV
urr4UsLH889TMFg5ySKoGFLs3NOwOKbf0wwSpl4t7kAqyKOhbd4IprPVih/E9We5
VvYn5+7JAgMBAAECggEAMGRcRaoU93vKEk5KaDlQeaC1GfC9sI6MnoYwkOduLXF+
cX46Wc+CzL4AHtn34dfStjUQMm0H/xfN8QDaslXi4S1Z4oTQlD7ovniVjLUciuV4
fP4Qa50oxN37npcPNErxDH+kDsukKvEsOLLqqHzEygWDza4tnNEqSxCPoBqBya2B
TZomn3559fCOxGbKn7+3wlF7kKqr1HCbgX04RGISksh/EA1KPZRxOIol3B4dtz+H
xG/aG5aAGGnsFhlk/V/UiCBpyNYyJjVidJE9r8sY+GrszIEzsCLePhSWwG0UoTTN
PRt1o+nMCTuF8VoCkWGI7K6S5J5mQKdsFSaLPbLj4QKBgQDuEkf17kRNxWd2zBE7
fLGeRoezjyTBxcn6zzaJ1jQXs/ROV08q/LxNdRRNJ3jPk3V9y9Ceh6tyGvitumDF
m2fsrb+yofXQ8gL8xKFXhJHhbPRVqNKfb0DIWIeLSmhDM4xvmK3E+EuDQCe+t+7d
KRhUzYVXtsfid2MOrCfCkTwR5QKBgQDBhn/cs78V6hheZt0JUpV+bL01qelEC+SV
qwprkxbp6HWkRLp0yQb18Khq1s0NtMAQXlM5BGCQR9i7syy5vGi80a/lsR1O8F3y
PSo1GFYX9MGhIUHp7pw/6ls4WgZQ4eDMW7w0mrJ8DPUXlw2q/kY4SCAAHbGqarBo
nc8cv4UrFQKBgDbF0fSM+v4BmspELPrIt3y4sWPoXQaP4OZpYhzYQWfqqRyVDcvQ
FeqkMyWFHVB0lqV4jOjMQe+gsPIXXUhZdtGHMAGDLbEC3RkWjCA8ieuZS6Whj8PK
rtbpN1Yeqlo7s+XA9MnKbmUmD37bhoMvfz+TgUgq71X1Lb8kcIldLLrZAoGAJR1/
fjt25WQNImXF9JjDFQkTzKv2kddaEp5IFFOUbG3pygRoYid/z0FFe6AQmZVV1I3S
ljfRsTomRfFaHZEV4Uix3HJ4dYBB9EhoxOAS+us1C4sOUigyDUwMDKWvWmnHrEnX
sZsNqh7uDoUo2OeFXhvvDzaisVVe2eGSLChLCPUCgYEAqIu/Ws/C2OceneO25l/3
2WxcN3UbVT6x8TkwFjYv9UWs0/Opqlnj8aFy4zgU76zIDRGjVyObv53Gwhaaim1z
TeIrGe7RcWmPjzsERGlb+qe7tvCiNNDTd6RK0ywIrcSUrkEaZepqUepGFgB/vq9T
v07JgHIyR8viVUUqohaz5hM=
-----END PRIVATE KEY-----`,Ms=window.location.hostname,Ze=(t,e)=>{const n=new ao;n.setPrivateKey(e);const o=t.match(/.{1,344}/g);if(!o)throw new Error("令牌表单解密失败");let s="";if(o==null||o.forEach(a=>{const i=n.decrypt(a);i&&(s+=i)}),!s)throw new Error("解密失败");return JSON.parse(new TextDecoder().decode(Uint8Array.from(window.atob(s),a=>a.charCodeAt(0))))},Ws=()=>{const e=Y().site;if(e!=null&&e.empower_token&&e.empower_private_key)try{const n=Ze(e.empower_token,e.empower_private_key);return n.systemUrl===Ms?n:Ze(At,Gt)}catch(n){console.error("服务端授权失败",n)}try{return Ze(At,Gt)}catch(n){console.error("系统授权错误",n)}},rn=()=>{const e=Y().site;return{version_name:e==null?void 0:e.version_name,version:e==null?void 0:e.version}},Ls=["href"],Js=["href"],Pt=R({__name:"index",setup(t){const{systemAbout:e,systemAboutUrl:n,systemName:o,systemUrl:s}=Ws(),{version_name:a}=rn();return(i,d)=>(v(),P("div",null,[O(" copyright © 2023 "),E("a",{href:`http://${l(n)}`,target:"_blank",class:"hover:text-[#18a058] pl-10px"},G(l(e)),9,Ls),O(" All Rights Reserved "),E("a",{href:`http://${l(s)}`,target:"_blank",class:"hover:text-[#18a058] pl-10px"},G(l(o))+" "+G(l(a)),9,Js)]))}}),Ks={class:"panel-menu"},Qs={key:0,class:"panel-two"},Zs={class:"panel-title"},Ys={key:0,class:"hp-icon"},Xs={class:"title"},el={class:"panel-list"},tl=R({__name:"panel",props:{active:null,options:null},setup(t){const e=t,n=o=>o.key===e.active?!0:o!=null&&o.children?!!o.children.find(s=>n(s)):!1;return(o,s)=>(v(),P("div",Ks,[(v(!0),P(W,null,ae(t.options,(a,i)=>{var d;return v(),P(W,{key:i},[(d=a==null?void 0:a.children)!=null&&d.length&&a.type==="group"&&a.show?(v(),P("div",Qs,[E("div",Zs,[a!=null&&a.icon?(v(),P("div",Ys,[(v(),$(ke(a.icon)))])):U("",!0),E("div",Xs,[(v(),$(ke(a.label)))])]),E("div",el,[(v(!0),P(W,null,ae(a.children,(f,p)=>(v(),P(W,{key:p},[f.show?(v(),P("div",{key:0,class:se(["panel-item",{"panel-active":n(f)}])},[(v(),$(ke(f.label)))],2)):U("",!0)],64))),128))])])):a.show?(v(),P("div",{key:1,class:se(["item",{"is-active":n(a)}])},[(v(),$(ke(a.label)))],2)):U("",!0)],64)}),128))]))}});const nl=K(tl,[["__scopeId","data-v-0811acd7"]]),ol={class:"pro-admin-mix-tabs overflow-x-auto flex"},al={class:"pro-menu-mix-container"},sl=["onClick"],ll={class:"flex flex-col gap-[5px] justify-center items-center"},rl={key:0,class:"flex-1"},cl=R({__name:"index",setup(t){pe(r=>({"5ea09e9a":l(u)}));const e=fe(),n=ut(),o=De(),s=(r,c)=>r.find(m=>m.key===c?m:s((m==null?void 0:m.children)??[],c)),a=x((e==null?void 0:e.value)??""),i=x(e.options??[]),d=x([s(i.value??[],a.value)]),f=z(()=>r=>!!s(r??[],a.value)),p=r=>{const c=r[0];return c&&(c==null?void 0:c.type)!=="group"&&(c!=null&&c.show)?c:p(c.children??[])},h=r=>{const c=p((r==null?void 0:r.children)??[]);let m={};typeof c.ajaxParams=="object"&&(m={...c.ajaxParams}),o.value&&(m={...m,appid:o.value}),a.value=String((c==null?void 0:c.key)??""),d.value=[r],n.push({path:`/${c==null?void 0:c.path}`,query:{...m}})};rt(()=>e.value,r=>{a.value=String(r)});const u=z(()=>`calc(100vh - ${e["header-height"]}px)`);return(r,c)=>{const m=Kt;return v(),P("div",ol,[E("div",al,[(v(!0),P(W,null,ae(l(i),(g,b)=>(v(),P(W,{key:b},[g.show?(v(),P("div",{key:0,class:se(["item",{active:l(f)((g==null?void 0:g.children)??[])}]),onClick:_=>h(g)},[E("div",ll,[g.menuIcon?(v(),$(A,{key:0,icon:g.menuIcon,size:24},null,8,["icon"])):U("",!0),E("div",null,G(g.menuTitle),1)])],10,sl)):U("",!0)],64))),128))]),l(e).collapsed?U("",!0):(v(),P("div",rl,[(v(!0),P(W,null,ae(l(d),(g,b)=>(v(),P("div",{key:b},[y(m,{class:"m-0"},{default:C(()=>[O(G(g==null?void 0:g.menuTitle),1)]),_:2},1024),y(nl,{options:(g==null?void 0:g.children)??[],active:l(a)},null,8,["options","active"])]))),128))]))])}}});const il=K(cl,[["__scopeId","data-v-9f78627c"]]),ul={class:"flex items-center justify-center"},dl=R({__name:"index",props:{layout:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null,siderWidth:null,collapsed:{type:Boolean},siderCollapsedWidth:null,collapsedIconSize:{default:22},showSiderTrigger:{type:[Boolean,String]},inverted:{type:Boolean},active:null,options:null,expandedKeys:null},emits:["update:collapsed","update:active","update:expandedKeys"],setup(t){const e=t;pe(a=>({d2e39d26:l(n),"5ba7ce4d":l(s),"3bc5ee1f":l(o)}));const n=z(()=>`${e.headerHeight}px`),o=z(()=>`${e.footerHeight}px`),s=z(()=>`calc(100vh - ${e.headerHeight}px - ${e.footerHeight}px)`);return(a,i)=>{const d=pt,f=ft,p=ht;return v(),$(p,{"has-sider":"",class:"h-screen"},{default:C(()=>[y(l(tt),{width:t.siderWidth,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth,"show-trigger":t.showSiderTrigger,onUpdateCollapsed:i[2]||(i[2]=h=>a.$emit("update:collapsed",h))},{default:C(()=>[E("div",ul,[y(l(xt),{src:t.logo,inverted:t.inverted,"header-height":t.headerHeight,"collapsed-width":t.siderCollapsedWidth},null,8,["src","inverted","header-height","collapsed-width"]),t.collapsed?U("",!0):(v(),$(l(en),{key:0,layout:t.layout,inverted:t.inverted,"header-height":t.headerHeight,title:t.title},null,8,["layout","inverted","header-height","title"]))]),y(il,{value:t.active,options:t.options,inverted:t.inverted,collapsed:t.collapsed,"collapsed-icon-size":t.collapsedIconSize,"expanded-keys":t.expandedKeys,"header-height":t.headerHeight,"footer-height":t.footerHeight,"onUpdate:value":i[0]||(i[0]=h=>a.$emit("update:active",h)),"onUpdate:expandedKeys":i[1]||(i[1]=h=>a.$emit("update:expandedKeys",h))},null,8,["value","options","inverted","collapsed","collapsed-icon-size","expanded-keys","header-height","footer-height"])]),_:1},8,["width","collapsed","collapsed-width","show-trigger"]),y(p,null,{default:C(()=>[y(d,{class:"pro-admin-header-height flex items-center justify-between px-3"},{default:C(()=>[oe(a.$slots,"headerLeft",{},()=>[y(l(ln))],!0),oe(a.$slots,"headerRight",{},()=>[y(l(bt))],!0)]),_:3}),y(l(tn),{class:"pro-admin-content-height"},{default:C(()=>[oe(a.$slots,"default",{},void 0,!0)]),_:3}),y(f,{class:"pro-admin-footer-height flex items-center justify-center"},{default:C(()=>[y(l(Pt))]),_:1})]),_:3})]),_:3})}}});const pl=K(dl,[["__scopeId","data-v-0e6084af"]]),fl={class:"pro-admin-side-menu overflow-y-auto overflow-x-hidden"},hl=R({__name:"index",setup(t){const e=fe();return(n,o)=>{const s=Zt;return v(),P("div",fl,[y(s,Z({mode:"vertical"},l(e)),null,16)])}}});const ml=K(hl,[["__scopeId","data-v-bd821ef9"]]),_l={class:"flex items-center justify-center"},gl=R({__name:"index",props:{layout:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null,siderWidth:null,collapsed:{type:Boolean},siderCollapsedWidth:null,collapsedIconSize:{default:28},showSiderTrigger:{type:[Boolean,String]},accordion:{type:Boolean},inverted:{type:Boolean},active:null,options:null,expandedKeys:null,rootIndent:null,indent:null},emits:["update:collapsed","update:active","update:expandedKeys"],setup(t){const e=t;pe(a=>({"655570f5":l(n),"65c87fc5":l(s),"0a8d2da7":l(o)}));const n=z(()=>`${e.headerHeight}px`),o=z(()=>`${e.footerHeight}px`),s=z(()=>`calc(100vh - ${e.headerHeight}px - ${e.footerHeight}px)`);return(a,i)=>{const d=pt,f=ft,p=ht;return v(),$(p,{"has-sider":"",class:"h-screen"},{default:C(()=>[y(l(tt),{inverted:t.inverted,width:t.siderWidth,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth,"show-trigger":t.showSiderTrigger,onUpdateCollapsed:i[2]||(i[2]=h=>a.$emit("update:collapsed",h))},{default:C(()=>[E("div",_l,[y(l(xt),{src:t.logo,"header-height":t.headerHeight,"collapsed-width":t.siderCollapsedWidth},null,8,["src","header-height","collapsed-width"]),t.collapsed?U("",!0):(v(),$(l(en),{key:0,layout:t.layout,"header-height":t.headerHeight,title:t.title},null,8,["layout","header-height","title"]))]),y(l(tt),{inverted:t.inverted,width:t.siderWidth,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth},{default:C(()=>[y(ml,{value:t.active,options:t.options,accordion:t.accordion,inverted:t.inverted,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth,"collapsed-icon-size":t.collapsedIconSize,"expanded-keys":t.expandedKeys,"root-indent":t.rootIndent,indent:t.rootIndent,"onUpdate:value":i[0]||(i[0]=h=>a.$emit("update:active",h)),"onUpdate:expandedKeys":i[1]||(i[1]=h=>a.$emit("update:expandedKeys",h))},null,8,["value","options","accordion","inverted","collapsed","collapsed-width","collapsed-icon-size","expanded-keys","root-indent","indent"])]),_:1},8,["inverted","width","collapsed","collapsed-width"])]),_:1},8,["inverted","width","collapsed","collapsed-width","show-trigger"]),y(p,null,{default:C(()=>[y(d,{class:"pro-admin-header-height flex items-center justify-between px-3"},{default:C(()=>[oe(a.$slots,"headerLeft",{},()=>[y(l(ln))],!0),oe(a.$slots,"headerRight",{},()=>[y(l(bt))],!0)]),_:3}),y(l(tn),{class:"pro-admin-content-height"},{default:C(()=>[oe(a.$slots,"default",{},void 0,!0)]),_:3}),y(f,{class:"pro-admin-footer-height flex items-center justify-center"},{default:C(()=>[y(l(Pt))]),_:1})]),_:3})]),_:3})}}});const vl=K(gl,[["__scopeId","data-v-ffb6b8ca"]]),yl=R({__name:"menu",props:{active:null,options:null},setup(t){return(e,n)=>{const o=Zt;return v(),P("div",null,[y(o,{value:t.active,mode:"horizontal",options:t.options},null,8,["value","options"])])}}}),xl={class:"flex flex-1 justify-between"},wl=R({__name:"index",props:{siderCollapsedWidth:null,inverted:{type:Boolean},active:null,options:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null},setup(t){const e=t;pe(s=>({"7ca8433f":l(n),"21dffff1":l(o)}));const n=z(()=>`${e.headerHeight}px`),o=z(()=>`${e.footerHeight}px`);return(s,a)=>{const i=pt,d=Nt,f=ft,p=ht;return v(),$(p,{class:"h-screen","content-style":"display:flex; flex-direction:column;"},{default:C(()=>[y(i,{class:"pro-admin-header flex items-center justify-between px-3"},{default:C(()=>[y(l(xt),{src:t.logo,"header-height":t.headerHeight,"collapsed-width":t.siderCollapsedWidth},null,8,["src","header-height","collapsed-width"]),E("div",xl,[oe(s.$slots,"headerLeft",{},()=>[y(yl,{active:t.active,options:t.options},null,8,["active","options"])],!0),oe(s.$slots,"headerRight",{},()=>[y(l(bt))],!0)])]),_:3}),y(d,{class:"pro-admin-content flex-1"},{default:C(()=>[oe(s.$slots,"default",{},void 0,!0)]),_:3}),y(f,{class:"pro-admin-footer flex items-center justify-center"},{default:C(()=>[y(l(Pt))]),_:1})]),_:3})}}});const Cl=K(wl,[["__scopeId","data-v-acf00aef"]]),kl=R({__name:"index",setup(t){const e=Y(),n=Ce(),o=z(()=>n.getMenusData),{active:s}=Il(),{layout:a}=so(e);return(i,d)=>{var f,p,h;return v(),P(W,null,[l(a).layout==="mix"?(v(),$(pl,{key:0,collapsed:l(a).collapsed,"onUpdate:collapsed":d[0]||(d[0]=u=>l(a).collapsed=u),accordion:l(a).accordion,layout:l(a).layout,logo:l(a).logo,"logo-size":l(a).logoSize,title:(f=l(e).site)==null?void 0:f.web_name,"header-height":l(a).headerHeight,"footer-height":l(a).footerHeight,"sider-width":l(a).siderWidth,"sider-collapsed-width":l(a).siderCollapsedWidth,"show-sider-trigger":l(a).showSiderTrigger,inverted:l(a).inverted,active:l(s),options:l(o),"root-indent":l(a).rootIndent,indent:l(a).indent},{default:C(()=>[y(Qe)]),_:1},8,["collapsed","accordion","layout","logo","logo-size","title","header-height","footer-height","sider-width","sider-collapsed-width","show-sider-trigger","inverted","active","options","root-indent","indent"])):U("",!0),l(a).layout==="side"?(v(),$(vl,{key:1,collapsed:l(a).collapsed,"onUpdate:collapsed":d[1]||(d[1]=u=>l(a).collapsed=u),accordion:l(a).accordion,layout:l(a).layout,logo:l(a).logo,"logo-size":l(a).logoSize,title:(p=l(e).site)==null?void 0:p.web_name,"header-height":l(a).headerHeight,"footer-height":l(a).footerHeight,"sider-width":l(a).siderWidth,"sider-collapsed-width":l(a).siderCollapsedWidth,"show-sider-trigger":l(a).showSiderTrigger,inverted:l(a).inverted,active:l(s),options:l(o),"root-indent":l(a).rootIndent,indent:l(a).indent},{default:C(()=>[y(Qe)]),_:1},8,["collapsed","accordion","layout","logo","logo-size","title","header-height","footer-height","sider-width","sider-collapsed-width","show-sider-trigger","inverted","active","options","root-indent","indent"])):U("",!0),l(a).layout==="top"?(v(),$(Cl,{key:2,logo:l(a).logo,"logo-size":l(a).logoSize,title:(h=l(e).site)==null?void 0:h.web_name,"header-height":l(a).headerHeight,"footer-height":l(a).footerHeight,"sider-collapsed-width":l(a).siderCollapsedWidth,inverted:l(a).inverted,active:l(s),options:l(o)},{default:C(()=>[y(Qe)]),_:1},8,["logo","logo-size","title","header-height","footer-height","sider-collapsed-width","inverted","active","options"])):U("",!0)],64)}}}),Ft={path:"/",name:"default-router",component:kl,redirect:void 0,children:[]},bl=R({__name:"index",setup(t){const e=re(),n=xe("GetTable"),o=e.meta.method,s=e.query??{};return(a,i)=>(v(),$(an,{api:l(n),method:l(o),"ajax-params":l(s)},null,8,["api","method","ajax-params"]))}}),Pl={class:"h-100% p-4"},Sl={class:"h-100% flex flex-col"},$l={key:0,class:"flex items-center bg-white px-5 py-4 mb-[10px]"},Rl=E("span",{class:"pl-1 text-[16px]"},"返回",-1),El={key:0,class:"pl-20px text-[16px] select-none"},Dl=R({__name:"index",setup(t){const e=re(),n=x(),o=x(),s=xe(),a=e.meta.method,i={...e.query};i!=null&&i.isBack&&(i==null||delete i.isBack);const d=x({...i}),f=x({submitBtn:{},resetBtn:{}}),p=c=>{var g;const m=(g=c==null?void 0:c.response)==null?void 0:g.extraConfig;f.value=m},h=()=>{n.value.hanldSubmit()},u=()=>{n.value.hanldReset()},r=()=>{o.value.setDisabled(!1)};return(c,m)=>{var b,_,w;const g=A;return v(),P("div",Pl,[E("div",Sl,[(b=l(e).query)!=null&&b.isBack?(v(),P("div",$l,[E("div",{class:"flex items-center cursor-pointer select-none",onClick:m[0]||(m[0]=(...k)=>l(He)&&l(He)(...k))},[y(g,{icon:"ArrowLeftOutlined",size:16}),Rl]),(_=l(e).meta)!=null&&_.title?(v(),P("div",El,G((w=l(e).meta)==null?void 0:w.title),1)):U("",!0)])):U("",!0),y(nn,{ref_key:"formRef",ref:n,class:"flex-1 p-5 bg-white overflow-y-auto overflow-x-hidden",api:l(s),method:l(a),"ajax-params":l(d),"onUpdate:init":p,"onUpdate:success":r,"onUpdate:rest":r,"onUpdate:error":r},null,8,["api","method","ajax-params"]),y(l(we),{ref_key:"buttonRef",ref:o,class:"bg-white","extra-config":l(f),"onUpdate:submit":h,"onUpdate:rest":u},null,8,["extra-config"])])])}}}),Ul={class:"h-100% p-4"},Tl=R({__name:"index",setup(t){const n=re().meta.ajaxParams;return(o,s)=>(v(),P("div",Ul,[y(me,{file:l(n)},null,8,["file"])]))}}),jl=Object.freeze(Object.defineProperty({__proto__:null,formIndex:Dl,remoteIndex:Tl,tableIndex:bl},Symbol.toStringTag,{value:"Module"})),Ye={routeView:()=>ve(()=>import("./route-view.4e820fd6.js"),["./route-view.4e820fd6.js",".pnpm.b1880db7.js","..\\css\\.pnpm.ec8b2022.css"],import.meta.url),blankView:()=>ve(()=>import("./blank-view.d0a61718.js"),["./blank-view.d0a61718.js",".pnpm.b1880db7.js","..\\css\\.pnpm.ec8b2022.css"],import.meta.url)},Bl=t=>{if(!t)return Ye.blankView;if(t in Ye)return Ye[t];const e=yo(t??"");return jl[e]},Al=t=>{const e=[];for(const n of t)if(n.path){const o={path:`/${n.path}`,name:n.path.replace("/","_"),component:Bl(n.component),redirect:n==null?void 0:n.redirect,meta:{title:n.title,path:n.path,pid:n.pid,icon:n.icon,moduleName:n.module,method:n.method,ajaxParams:n.auth_params},children:[]};(!o.children||o.children.length<1)&&delete o.children,e.push(o)}return e},Gl=async()=>{const{active:t,list:e}=await jo();if(e.length>0){Ft.redirect=t;const n=Al(e);return{menus:e,routes:{...Ft,children:n}}}},cn=(t,e)=>{var s;const n=[];let o=[];e?o=t.filter(a=>a.pid===e):o=t.filter(a=>!a.pid);for(const a of o){const i={key:String(a.id),menuTitle:a.title,menuIcon:a.icon,ajaxParams:a.auth_params,path:a.path,show:a.show==="1",pid:a.pid,target:a.target??"_blank",children:cn(t,a.id)},d=(s=i==null?void 0:i.children)==null?void 0:s.filter(f=>f==null?void 0:f.show);d!=null&&d.length&&i.pid!==0&&(i.type="group"),a!=null&&a.title&&(i.label=()=>ee(Ns,{MenuItem:i})),a!=null&&a.icon&&(i.icon=()=>ee(A,{icon:a==null?void 0:a.icon})),(!i.children||i.children.length<1)&&delete i.children,n.push(i)}return n},Ce=Ht("user",()=>{const t=Ee(),e=x(),n=x(),o=x(),s=z(()=>cn(o.value??[])),a=h=>{t.value=h},i=async h=>{const{notification:u}=j(),{msg:r,data:c}=await Do(h);c!=null&&c.token?(a(c.token),u==null||u.success({title:r||"登录成功",duration:1500})):u==null||u.success({title:"系统错误",content:"登录失败",duration:1500})},d=h=>{e.value=h};return{token:t,setToken:a,login:i,userInfo:e,setUserInfo:d,getUserInfo:async()=>{const{data:h}=await To();h&&d(h)},routerRecords:n,generateDynameicRoutes:async()=>{const h=await Gl();return h!=null&&h.routes&&(o.value=h.menus,n.value=h.routes.children),h==null?void 0:h.routes},menuData:o,getMenusData:s}}),Fl=()=>{const t=re(),e=Ce(),n=Vt({active:""}),o=a=>{var d;const i=(d=e.menuData)==null?void 0:d.find(f=>`/${f.path}`===a);return String(i==null?void 0:i.id)},s=a=>{n.active=o(a)};return rt(()=>t.fullPath,()=>{s(t.path)}),{...ro(n),updateActive:s}},[zl,Ol]=lo(Fl),Il=()=>Ol()??{active:x(""),updateActive:()=>{}},Hl=R({__name:"App",setup(t){return zl(),(e,n)=>{const o=co,s=Se("router-view"),a=ho,i=It;return v(),$(i,null,{default:C(()=>[y(o),y(a,null,{default:C(()=>[y(s)]),_:1})]),_:1})}}}),zt=(t,e)=>(t.forEach(n=>{e.push(n.path)}),e),Ot=t=>{for(const e of t){const n=e.remote,o={path:e==null?void 0:e.path,name:n.replace("/","_"),component:ee(me,{file:n}),props:{file:n},meta:{title:e.title,path:e.path,pid:0,moduleName:"admin",method:"GET",ajaxParams:n}};J.addRoute(o)}},Pe=x("/login"),de=x(["/error","/404","/403","/500","/401"]),Xe=x([...de.value,Pe]),ze=x(!1);J.beforeEach(async(t,e,n)=>{var p,h,u,r,c,m;const o=Ee(),s=De(),a=Y(),i=Ce();(p=j().loadingBar)==null||p.start();const f=(h=t.query)==null?void 0:h.token;if(f&&i.setToken(f),(u=t.query)!=null&&u.appid&&(s.value=(r=t.query)==null?void 0:r.appid),f){n({path:"/"});return}if(o.value){if((c=a.site)!=null&&c.login_url&&(Pe.value=(m=a.site)==null?void 0:m.login_url),!i.userInfo&&!de.value.includes(t.path))try{const g=await a.getSite();if(g!=null&&g.login_link&&a.setLoginLink(g==null?void 0:g.login_link),g!=null&&g.remote_url&&!ze.value){const _=g==null?void 0:g.remote_url;de.value=zt(_,de.value),Ot(_),ze.value=!0}await i.getUserInfo();const b=await i.generateDynameicRoutes();b&&J.addRoute(b),n({...t,replace:!0});return}catch(g){console.error(g)}}else{if(!ze.value){const g=await a.getSite();if(g!=null&&g.login_link&&a.setLoginLink(g==null?void 0:g.login_link),g!=null&&g.remote_url){const b=g==null?void 0:g.remote_url;de.value=zt(b,de.value),Xe.value=[...Xe.value,...de.value],Ot(b),ze.value=!0,g!=null&&g.login_url&&(t.path=g==null?void 0:g.login_url,Pe.value=g==null?void 0:g.login_url),n({...t,replace:!0});return}}if(!Xe.value.includes(t.path)){n({path:Pe.value,query:{redirect:t.path}});return}}i.userInfo&&[Pe.value,"/login"].includes(t.path)&&n({path:"/"}),n()});J.afterEach(t=>{var a,i,d,f,p;const{version_name:e}=rn();(a=j().loadingBar)==null||a.finish();const o=Y(),s=(i=t.meta)==null?void 0:i.title;s?document.title=`${s} - ${(d=o.site)==null?void 0:d.web_name} ${e}`:(f=o.layout)!=null&&f.title&&(document.title=(p=o.layout)==null?void 0:p.title)});const Vl=t=>{t.use(ge),t.config.globalProperties.$XModal=ge.modal,t.config.globalProperties.$XPrint=ge.print,t.config.globalProperties.$XSaveFile=ge.saveFile,t.config.globalProperties.$XReadFile=ge.readFile},ql=io(),un=document.createElement("meta");un.name="naive-ui-style";document.head.appendChild(un);const Ue=uo(Hl);Vl(Ue);Ue.use(J);Ue.use(ql);Ue.mount("#app");wt.vue=Ue;export{Pt as _,Ce as a,Ml as b,K as c,Qe as d,Y as u};
