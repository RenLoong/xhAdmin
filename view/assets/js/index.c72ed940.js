import{m as ln,d as P,u as rn,a as cn,b as un,c as dn,r as X,e as w,z as pn,f as fn,o as _,g as R,w as x,h as g,i as l,_ as hn,j as mn,N as gn,k as _n,l as _t,n as vn,p as yn,q as vt,s as xn,t as qe,v as Ie,x as wn,y as yt,A as xt,B as ne,C as Ne,D as ve,E as ye,F as A,G as b,H as se,I as Re,J as T,K as Cn,L as D,M as ce,O as J,P as kn,Q as bn,R as U,S,T as le,U as wt,V as Me,W as he,X as Fe,Y as Ct,Z as Ge,$ as Z,a0 as te,a1 as kt,a2 as bt,a3 as Pt,a4 as V,a5 as N,a6 as M,a7 as St,a8 as Pn,a9 as $t,aa as Sn,ab as $n,ac as Rn,ad as jn,ae as En,af as lt,ag as Dn,ah as Bn,ai as Tn,aj as An,ak as Un,al as Fn,am as rt,an as Gn,ao as Ve,ap as On,aq as zn,ar as Hn,as as qn,at as pe,au as it,av as In,aw as Nn,ax as Mn,ay as Vn,az as Rt,aA as jt,aB as Et,aC as Dt,aD as Wn,aE as Ln,aF as Jn,aG as Zn,aH as Yn,aI as Kn,aJ as Qn}from"./.pnpm.ba70e7a7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Bt={},j=()=>Bt,Xn=e=>{ln(Bt,e)},ea=P({__name:"naive-provider",setup(e){const t=rn(),n=cn(),a=un(),s=dn();return Xn({notification:t,message:n,dialog:a,loadingBar:s}),(o,i)=>X(o.$slots,"default")}}),ta=P({__name:"index",setup(e){const t=w(pn),n=w(fn);return(a,s)=>{const o=hn,i=mn,u=gn,h=_n,d=_t;return _(),R(d,{locale:l(t),"date-locale":l(n)},{default:x(()=>[g(h,null,{default:x(()=>[g(u,null,{default:x(()=>[g(i,null,{default:x(()=>[g(o,null,{default:x(()=>[g(ea,null,{default:x(()=>[X(a.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["locale","date-locale"])}}}),na={title:"",layout:"mix",headerHeight:50,footerHeight:35,accordion:!0,collapsed:!1,siderWidth:230,siderCollapsedWidth:80,showSiderTrigger:"arrow-circle",inverted:!0,logoSize:35,rootIndent:18,indent:32},aa="modulepreload",oa=function(e,t){return new URL(e,t).href},ct={},fe=function(t,n,a){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=oa(o,a),o in ct)return;ct[o]=!0;const i=o.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(!!a)for(let p=s.length-1;p>=0;p--){const r=s[p];if(r.href===o&&(!i||r.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":aa,i||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),i)return new Promise((p,r)=>{d.addEventListener("load",p),d.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},sa=[{path:"/login",name:"Login",component:()=>fe(()=>import("./index.77c334ef.js"),["./index.77c334ef.js",".pnpm.ba70e7a7.js","..\\css\\.pnpm.c37a7d79.css","..\\css\\index.e635b4dc.css"],import.meta.url),meta:{title:"用户登录"}},{path:"/redirect/:path(.*)",name:"redirect",component:()=>fe(()=>import("./index.3f730b5f.js"),["./index.3f730b5f.js",".pnpm.ba70e7a7.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)},{path:"/error",name:"error",meta:{title:"找不到页面"},component:()=>fe(()=>import("./error.ad3e197f.js"),["./error.ad3e197f.js",".pnpm.ba70e7a7.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)},{path:"/:pathMatch(.*)",component:()=>fe(()=>import("./error.ad3e197f.js"),["./error.ad3e197f.js",".pnpm.ba70e7a7.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)}],H=vn({routes:[...sa],history:yn("/")}),je=()=>{var n,a;const e=H.currentRoute.value;let t="";return(n=e==null?void 0:e.meta)!=null&&n.moduleName?t=(a=e==null?void 0:e.meta)==null?void 0:a.moduleName:(t=location.pathname,t.substring(t.length-1)==="/"&&(t=t.substring(1,t.length-1))),t},Ee=(e="",t=!1)=>{var o;const n=H.currentRoute.value,a=((o=n==null?void 0:n.meta)==null?void 0:o.moduleName)??"",s=w(n.path);if(t){const i=s.value.indexOf("/",1);s.value=s.value.substring(0,i),s.value=`${s.value}/`}return`${a}${s.value}${e}`},Tt=e=>{let t;try{t=new URL(e)}catch{return!1}return t.protocol==="http:"||t.protocol==="https:"},la=e=>{Tt(e)?location.href=e:H.push(e)};function ut(e=6){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return t}const W=(e,t)=>{for(const n in t)if(t[n]===e)return!0;return!1},We=()=>{var n;const e=H.currentRoute.value,{notification:t}=j();(n=e.query)!=null&&n.isBack?H.back():t==null||t.error({title:"返回上次页面错误",duration:2e3})},ra=e=>e.replace(/\/(\w)/g,(t,n)=>n.toUpperCase()),il=(e,t="Enter")=>{const n=a=>{a.key===t&&(e(),a.preventDefault())};vt(()=>document.addEventListener("keydown",n)),xn(()=>document.removeEventListener("keydown",n))},ia=e=>{let t;const n={},a=e.slice(e.indexOf("?")+1).split("&");for(let s=0;s<a.length;s++)t=a[s].split("="),n[t[0]]=t[1];return n},Le="Authorization",Je="Appid",xe=qe(()=>{const e=je();return Ie(`${e}_${Le}`,null)}),Ze=qe(()=>{const e=je();return Ie(`${e}_${Je}`,null)}),At="/",q=wn.create({baseURL:At,timeout:6e4}),ca=async e=>{const t=xe();t.value&&e.headers.set(Le,t.value);const n=Ze();return n.value&&e.headers.set(Je,n.value),e},ua=e=>{var s;const{notification:t}=j(),n=xe(),a=e.data;if(e.headers["content-type"]==="application/json")switch(a.code){case 200:return a;case 11e3:return Promise.reject(e.data);case 12e3:return n.value="",H.replace({path:"/login",query:{redirect:(s=H.currentRoute.value)==null?void 0:s.fullPath}}).then(()=>{}),Promise.reject(e.data);default:return t==null||t.error({title:"温馨提示",content:(a==null?void 0:a.msg)||"网络错误",duration:1500}),Promise.reject(e.data)}else return e.headers["content-type"]==="application/octet-stream"?Promise.resolve(a):Promise.resolve(e)},da=e=>{const{notification:t}=j();if(e.response){const{data:n,status:a,statusText:s}=e.response;a===401?t==null||t.error({title:"温馨提示",content:(n==null?void 0:n.msg)||s,duration:1500}):a===403?t==null||t.error({title:"资源请求错误",content:(n==null?void 0:n.msg)||s,duration:1500}):a===500?t==null||t.error({title:"服务器错误",content:(n==null?void 0:n.msg)||s,duration:1500}):t==null||t.error({title:"系统错误",content:(n==null?void 0:n.msg)||s,duration:1500})}return Promise.reject(e)};q.interceptors.request.use(ca);q.interceptors.response.use(ua,da);const ue=(e,t,n)=>q.request({url:e,params:t,method:"GET",...n}),Ye=(e,t,n)=>q.request({url:e,data:t,method:"POST",...n}),Ke=(e,t,n)=>q.request({url:e,data:t,method:"PUT",...n}),De=(e,t,n)=>q.request({url:e,data:t,method:"DELETE",...n}),pa=Object.freeze(Object.defineProperty({__proto__:null,baseURL:At,default:q,useDelete:De,useGet:ue,usePost:Ye,usePut:Ke},Symbol.toStringTag,{value:"Module"})),fa=je(),ha=`${fa}/Publics/site`,ma=()=>ue(ha),ga=qe(()=>{const e=je();return Ie(`${e}-layout-theme`,na)}),Y=yt("app",()=>{const e=ga(),t=xt(l(e)),n=w(),a=w(),s=w(),o=d=>{s.value=d},i=d=>{a.value=d},u=d=>{t.title=d.web_title,t.web_name=d.web_name;const p=new URL("data:image/png;base64,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",self.location).href;t.logo=typeof d.web_logo=="string"?d.web_logo:p,n.value=d};return{layout:t,getSite:async()=>{const{data:d}=await ma();return u(d),d},site:n,dynameicRemoteRoute:a,setDynameicRemoteRoute:i,loginLink:s,setLoginLink:o}}),_a=e=>{var a;const n=(a=Y().site)==null?void 0:a.public_api.login;return Ye(n,e)},va=()=>{var n;const t=(n=Y().site)==null?void 0:n.public_api.loginout;return De(t)},ya=()=>{var n;const t=(n=Y().site)==null?void 0:n.public_api.user;return ue(t)},xa=async()=>{var a;const t=(a=Y().site)==null?void 0:a.public_api.menus,{data:n}=await ue(t);return n},dt=P({__name:"route-view",setup(e){const t=ne(),n=()=>`${new Date().getTime()}${Math.random()}`,a=w("");return Ne(()=>t.fullPath,()=>{a.value=n()}),(s,o)=>{const i=ve("router-view");return _(),R(i,{key:l(a)})}}}),wa=P({__name:"logo",props:{collapsedWidth:null,headerHeight:null,size:{default:30},src:null,inverted:{type:Boolean}},setup(e){const t=e;ye(s=>({"7f669fe2":l(a),"93b26860":l(n)}));const n=A(()=>`${t.headerHeight}px`),a=A(()=>`${t.collapsedWidth}px`);return(s,o)=>{const i=Re;return _(),b("div",{class:se(["pro-admin-layout-header flex items-center justify-center",{"bg-dark":e.inverted}])},[g(i,{src:e.src,width:e.size,height:e.size,"preview-disabled":""},null,8,["src","width","height"])],2)}}});const K=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},Ut=K(wa,[["__scopeId","data-v-36082ee4"]]),Ca=P({__name:"title",props:{headerHeight:null,layout:null,title:null,size:{default:18},inverted:{type:Boolean}},setup(e){const t=e;ye(s=>({db97614c:l(n)}));const n=A(()=>`${t.headerHeight}px`),a=A(()=>({fontSize:`${t.size}px`}));return(s,o)=>e.title?(_(),b("div",{key:0,class:se(["pro-admin-tabs-layout-header flex items-center flex-1 truncate select-none",{"justify-center":e.inverted}]),style:Cn(l(a))},T(e.title),7)):D("",!0)}});const Ft=K(Ca,[["__scopeId","data-v-40893ea5"]]),Gt=P({__name:"layout-content",setup(e){const t=ce();return(n,a)=>{const s=kn;return _(),R(s,J(l(t),{style:{"--n-color":"var(--pro-admin-layout-content-bg)"}}),{default:x(()=>[X(n.$slots,"default")]),_:3},16)}}}),Oe=P({__name:"layout-sider",setup(e){const t=ce();return(n,a)=>{const s=bn;return _(),R(s,J({"collapse-mode":"width"},l(t)),{default:x(()=>[X(n.$slots,"default")]),_:3},16)}}}),ka="kfadmin",ba="1.0.0",Pa="module",Sa={dev:"vite",build:"vue-tsc && vite build",preview:"vite preview",prepare:"husky install",lint:"eslint --ext .ts,.tsx,.vue,.js,.jsx src"},$a={"@form-create/naive-ui":"^3.1.19","@vueuse/core":"^9.13.0",axios:"^1.3.5",echarts:"^5.4.2",exceljs:"^4.3.0","highlight.js":"^11.7.0",jspdf:"^2.5.1",pinia:"^2.0.34",vue:"^3.2.47","vue-router":"^4.1.6","vxe-table":"4.3.12-beta.2","vxe-table-plugin-export-pdf":"^3.0.4","vxe-table-plugin-export-xlsx":"^3.0.4","xe-utils":"^3.5.7",xlsx:"^0.18.5"},Ra={"@mistjs/eslint-config-vue":"^0.0.5","@types/less":"^3.0.3","@types/lodash-es":"^4.17.7","@types/node":"^18.15.11","@unocss/reset":"^0.51.4","@vicons/antd":"^0.12.0","@vitejs/plugin-vue":"^4.1.0","@vue/runtime-core":"^3.2.47",eslint:"^8.38.0",husky:"^8.0.3",less:"^4.1.3","less-loader":"^11.1.0","lint-staged":"^13.2.1","lodash-es":"^4.17.21","naive-ui":"^2.34.3","node-sass":"^8.0.0",sass:"^1.62.0","sass-loader":"^13.2.2",typescript:"^4.9.3",unocss:"^0.51.4","unplugin-auto-import":"^0.15.2","unplugin-vue-components":"^0.24.1",vite:"^4.2.0","vite-plugin-compression":"^0.5.1","vue-tsc":"^1.2.0"},Ot={name:ka,private:!0,version:ba,type:Pa,scripts:Sa,"lint-staged":{"*.{js,tsx,vue,ts,jsx}":"eslint --fix"},dependencies:$a,devDependencies:Ra},ja=Ot.name,zt=Ot.version,Ea="http://www.kfadmin.net",Da=["href"],Ht=P({__name:"copyright",setup(e){return(t,n)=>(_(),b("div",null,[U(" copyright "),S("a",{href:l(Ea),target:"_blank",class:"hover:text-blue"},T(l(ja))+" v"+T(l(zt)),9,Da)]))}}),Ba={};function Ta(e,t){return _(),b("div")}const qt=K(Ba,[["render",Ta]]),It=P({__name:"header-right",setup(e){return(t,n)=>{const a=le;return _(),R(a,{size:10,class:"h-100%"},{default:x(()=>[X(t.$slots,"toolbar",{},()=>[g(l(ks))]),X(t.$slots,"user",{},()=>[g(l(xs))])]),_:3})}}}),Qe={vue:null};function Aa(){const e=Qe.vue;wt.install(e)}const Ua={form:{labelPlacement:"top"},row:{gutter:30,alignItems:"center"},global:{"*":{}},submitBtn:!1,resetBtn:!1},Fa=e=>e.map(t=>(t.handle=n=>{if((t==null?void 0:t.where)==="==")return n===t.value;if((t==null?void 0:t.where)==="!=")return n!==t.value;if((t==null?void 0:t.where)==="in"){const a=t.value;return a instanceof Array&&a instanceof Object?W(n,t.value):(console.error("联动组件的IN条件值必须是数组或对象"),!1)}},t)),Ga=e=>e.map(t=>(t!=null&&t.control&&(t.control=Fa(t.control)),t)),Oa=(e,t)=>{const n=w({}),a=w({api:"",method:"POST"}),s=w(""),o=w({}),i=w([]),u=w(Ua),h=Me(),d=()=>{var v,C;const{notification:c}=j(),f=H.currentRoute.value,m={...f==null?void 0:f.query};m!=null&&m.isBack&&(m==null||delete m.isBack);const y={method:((v=a.value)==null?void 0:v.method)??"GET",params:{...e.ajaxParams},data:{}};a.value.method==="GET"?y.params={...o.value}:y.data={...o.value},t("update:submit",{api:a.value.api,queryParams:y}),q(((C=a.value)==null?void 0:C.api)??"",y).then($=>{var k;(k=f.query)!=null&&k.isBack&&!e.isModal&&!s.value?We():s.value&&la(s.value),t("update:success",$),c==null||c.success({title:($==null?void 0:$.msg)??"操作失败",duration:1500})}).catch($=>{t("update:error",$)})},p=()=>{n.value.resetFields()},r=w({method:e.method,params:{},data:{}});return e.method==="GET"?r.value.params={...e.ajaxParams}:r.value.data={...e.ajaxParams},q((e==null?void 0:e.api)??"",r.value).then(c=>{const{data:f}=c,{notification:m}=j();if(!(f!=null&&f.http))return m==null||m.error({title:"提交接口获取失败",duration:2e3}),Promise.reject(new Error("提交接口获取失败"));if(!(f!=null&&f.formRule))return m==null||m.error({title:"表单规则获取失败",duration:2e3}),Promise.reject(new Error("表单规则获取失败"));a.value=f.http,i.value=Ga(f.formRule),u.value={...u.value,...f.config},s.value=(f==null?void 0:f.redirect)??"",t("update:init",{response:f,exposed:h.exposed})}),{fApi:n,submitAPI:a,redirectUrl:s,formData:o,formRule:i,formConfig:u,hanldSubmit:d,hanldReset:p}},za={};function Ha(e,t){return _(),b("div",null," 高德地图 ")}const qa=K(za,[["render",Ha]]),Ia={};function Na(e,t){return _(),b("div",null," 百度地图 ")}const Ma=K(Ia,[["render",Na]]),me=P({__name:"buttons",props:{extraConfig:null},emits:["update:submit","update:rest"],setup(e,{emit:t}){const n=()=>{t("update:submit")},a=()=>{t("update:rest")};return(s,o)=>{var h;const i=he,u=le;return(h=e.extraConfig.submitBtn)!=null&&h.show?(_(),R(u,{key:0,justify:"center",size:30,class:"py-3 b-t-1px"},{default:x(()=>{var d,p,r,c;return[(d=e.extraConfig.submitBtn)!=null&&d.show?(_(),R(i,J({key:0},((p=e.extraConfig)==null?void 0:p.submitBtn)??{},{onClick:n}),{default:x(()=>{var f;return[U(T(((f=e.extraConfig.submitBtn)==null?void 0:f.content)??"提交"),1)]}),_:1},16)):D("",!0),(r=e.extraConfig.resetBtn)!=null&&r.show?(_(),R(i,J({key:1},((c=e.extraConfig)==null?void 0:c.resetBtn)??{},{onClick:a}),{default:x(()=>{var f;return[U(T(((f=e.extraConfig.resetBtn)==null?void 0:f.content)??"重置"),1)]}),_:1},16)):D("",!0)]}),_:1})):D("",!0)}}}),Va={class:"h-450px overflow-y-auto p-5"},Wa=S("div",{class:"text-blueGray pt-2 select-none"}," 温馨提示：单击图标为选择，双击图标为复制 ",-1),La=["title","alt","onClick","onDblclick"],Ja=P({__name:"icons-mgr",emits:["update:init","update:copy","update:click","update:confirm"],setup(e,{expose:t,emit:n}){const{notification:a}=j(),s=Me(),o=w(Object.keys(Fe)),i=w(""),u=w(""),h=r=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(r).then(c=>{});else{const c=document.createElement("input");c.value=r,document.body.appendChild(c),c.select(),document.execCommand("Copy"),c.remove()}n("update:copy",r),a==null||a.success({title:"复制成功",duration:1500})},d=r=>{i.value=r===i.value?"":r,n("update:click",i.value)},p=()=>(n("update:confirm",i.value??""),i.value);return Ct(()=>{n("update:init",{exposed:s.exposed})}),t({hanldConfirm:p}),(r,c)=>{const f=kt,m=bt,y=Pt,v=le;return _(),b("div",Va,[g(m,null,{default:x(()=>[g(f,{modelValue:l(u),"onUpdate:modelValue":c[0]||(c[0]=C=>Ge(u)?u.value=C:null),placeholder:"可输入搜索图标名称"},null,8,["modelValue"])]),_:1}),Wa,g(v,{justify:"space-around",class:"pt-5",size:22},{default:x(()=>[(_(!0),b(Z,null,te(l(o).filter(C=>C.includes(l(u))),C=>(_(),b("div",{key:C,class:se([{"bg-slate":C===l(i)},"hover:bg-slate px-2 py-1 border-sm cursor-pointer"]),title:C,alt:C,onClick:$=>d(C),onDblclick:$=>h(C)},[g(y,{component:l(Fe)[C],size:26,color:"#555"},null,8,["component"])],42,La))),128))]),_:1})])}}}),Za={class:"w-100%"},Ya=P({__name:"index",props:{modelValue:null},emits:["update:modelValue"],setup(e,{emit:t}){const{dialog:n,notification:a}=j(),s=w(),o=w(),i=w({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"关闭",show:!0}}),u=()=>{t("update:modelValue","")},h=()=>{s.value=n==null?void 0:n.create({class:"pro-admin-dialog",title:"图标管理器",maskClosable:!1,showIcon:!1,style:{width:"45%"},content:()=>V(Ja,{"onUpdate:init":d=>{o.value=d==null?void 0:d.exposed}}),action:()=>V(me,{extraConfig:i.value,"onUpdate:submit":()=>{var p,r;const d=(p=o.value)==null?void 0:p.hanldConfirm();d?(t("update:modelValue",d),(r=s.value)==null||r.destroy()):a==null||a.error({title:"请选择图标",duration:1500})},"onUpdate:rest":()=>{var d;(d=s.value)==null||d.destroy()}})})};return(d,p)=>{const r=kt,c=he,f=bt;return _(),b("div",Za,[g(f,null,{default:x(()=>[g(r,{value:e.modelValue,placeholder:"请选择图标",disabled:""},null,8,["value"]),g(c,{type:"warning",onClick:u},{default:x(()=>[U(" 重置图标 ")]),_:1}),g(c,{type:"success",onClick:h},{default:x(()=>[U(" 选择图标 ")]),_:1})]),_:1})])}}}),Ka={};function Qa(e,t){return _(),b("div",null," 腾讯地图 ")}const Xa=K(Ka,[["render",Qa]]),eo=P({__name:"index",setup(e){const t=ce();return(n,a)=>(_(),R(l(we),N(M(l(t))),null,16))}}),G=(e,t)=>{const n=new Event(e);t&&(n.dataFul=t),window.dispatchEvent(n)},Nt=(e,t)=>new Promise(n=>{const{dialog:a}=j(),{notification:s}=j();a==null||a.warning({title:"温馨提示",content:"是否确认删除该数据？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{De(e,{id:t}).then(async i=>{n(i),s==null||s.success({title:(i==null?void 0:i.msg)??"操作成功",duration:1500})})}})}),ze=(e,t,n,a)=>new Promise(s=>{const{dialog:o}=j(),i=w(),u=w({hanldSubmit:()=>{},hanldReset:()=>{}}),h=w({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"取消",show:!0}}),d={title:e,class:"pro-admin-dialog",style:{width:"45%"},showIcon:!1,maskClosable:!1,content:()=>V(et,{api:t,method:n,isModal:!0,ajaxParams:a??{},"onUpdate:init":p=>{var r,c;u.value.hanldSubmit=(r=p==null?void 0:p.exposed)==null?void 0:r.hanldSubmit,u.value.hanldReset=(c=p==null?void 0:p.exposed)==null?void 0:c.hanldReset},"onUpdate:success":p=>{var r;s(p),(r=i.value)==null||r.destroy()}}),action:()=>V(me,{extraConfig:h.value,"onUpdate:submit":()=>{u.value.hanldSubmit()},"onUpdate:rest":()=>{var p;(p=i.value)==null||p.destroy()}})};i.value=o==null?void 0:o.create(d)}),to=()=>{const e=Y();return{getCategory:async()=>{var d;const u=((d=Y().site)==null?void 0:d.uploadify_cate.index)??"",{data:h}=await ue(u);return h},hanldClickCate:async(i,u)=>{i!==u&&(G("uploadify:cateActive",{active:u}),G("uploadify:files",{cid:u}))},hanldAddCate:()=>{var u;const i=((u=e.site)==null?void 0:u.uploadify_cate.add)??"";ze("添加分类",i,"GET",{}).then(async()=>{G("uploadify:category"),G("uploadify:files")})},hanldEditCate:i=>{var h;const u=((h=e.site)==null?void 0:h.uploadify_cate.edit)??"";ze("添加分类",u,"GET",{id:i}).then(async()=>{G("uploadify:category"),G("uploadify:files")})},hanldDelCate:i=>{var h;const u=((h=e.site)==null?void 0:h.uploadify_cate.del)??"";Nt(u,i).then(async()=>{G("uploadify:category"),G("uploadify:files")})}}},no=()=>{const e=Y(),{notification:t,dialog:n}=j();return{getUploadifyList:async r=>{var m;const c=((m=e.site)==null?void 0:m.uploadify_api.index)??"",{data:f}=await ue(c,r);return f},hanldEditFile:r=>{var f;const c=((f=e.site)==null?void 0:f.uploadify_api.edit)??"";ze("修改附件",c,"GET",{id:r}).then(async()=>{G("uploadify:files")})},hanldDelFile:r=>{var f;const c=((f=e.site)==null?void 0:f.uploadify_api.del)??"";Nt(c,r).then(async()=>{G("uploadify:files")})},hanldDelsFile:r=>{if(!(r!=null&&r.length)){t==null||t.error({title:"请勾选需要删除的附件",duration:1500});return}n==null||n.warning({title:"温馨提示",content:"是否确认删除选中的数据？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{var f;const c=((f=e.site)==null?void 0:f.uploadify_api.del)??"";r.forEach(m=>{De(c,{id:m}).then(v=>{G("uploadify:files"),t==null||t.success({title:(v==null?void 0:v.msg)??"操作完成",duration:1500})})}),G("uploadify:clearCheckbox")}})},hanldMoveFile:(r,c)=>{var y;if(!(c!=null&&c.length)){t==null||t.error({title:"请勾选需要移动的附件",duration:1500});return}const f=((y=e.site)==null?void 0:y.uploadify_api.move)??"";Ke(f,{cate_id:r,ids:c}).then(v=>{G("uploadify:files"),G("uploadify:clearSelected"),G("uploadify:clearCheckbox"),t==null||t.success({title:(v==null?void 0:v.msg)??"操作完成",duration:1500})})},hanldSelected:(r,c,f)=>{if(f===1){c[0]=r;return}if(!(c!=null&&c.length)){c==null||c.push(r);return}if(!(c!=null&&c.find(m=>m===r)))c==null||c.push(r);else for(let m=0;m<c.length;m++)if(c[m]===r){c.splice(m,1);break}},hanldCheckBox:(r,c)=>{if(!(r!=null&&r.length)){r==null||r.push(c);return}if(!(r!=null&&r.find(f=>f===c)))r==null||r.push(c);else for(let f=0;f<r.length;f++)if(r[f]===c){r.splice(f,1);break}},uploadFinish:r=>{var f,m;const c=(m=(f=r==null?void 0:r.event)==null?void 0:f.target)!=null&&m.response?JSON.parse(r.event.target.response):{msg:"上传结束",code:404};c.code===200?(G("uploadify:cateActive",{active:""}),G("uploadify:files"),t==null||t.success({title:c.msg??"上传完成",duration:1500})):t==null||t.error({title:c.msg??"上传失败",duration:1500})}}},ao=()=>({handlePageChange:t=>{const n={page:t.currentPage,limit:t.pageSize};G("uploadify:paginator",n)}}),E=P({__name:"index",props:{icon:null,depth:null,size:{default:18},color:null},setup(e){return(t,n)=>{const a=Pt;return _(),R(a,{component:l(Fe)[e.icon],size:e.size,depth:e.depth,color:e.color},null,8,["component","size","depth","color"])}}}),Xe=e=>(jn("data-v-3d252559"),e=e(),En(),e),oo={class:"h-550px flex border-solid border-t-1 mt-15px"},so={class:"w-150px h-100% border-solid border-r-1 overflow-y-auto overflow-x-hidden"},lo={class:"text-12px flex"},ro=Xe(()=>S("span",{class:"pl-1"},"全部分类",-1)),io=["title","onClick","onDblclick"],co={class:"text-12px flex"},uo={class:"pl-1 truncate"},po={class:"h-100% flex-1 flex flex-col"},fo={class:"flex justify-between items-center h-55px px-5"},ho=Xe(()=>S("div",{class:"text-12px text-dark"},null,-1)),mo={class:"flex-1 overflow-y-auto overflow-x-hidden border-solid border-t-1 p-3"},go={class:"w-100% h-120px"},_o=Xe(()=>S("div",{class:"w-100% h-100% flex items-center justify-center bg-gray select-none"}," 图片加载失败 ",-1)),vo={class:"absolute bottom-39px left-0 right-0 text-center py-3px text-white bg-[rgba(0,0,0,0.5)] text-12px truncate"},yo={class:"flex justify-between p-2"},xo={class:"flex space-x-2"},wo={class:"h-55px flex items-center justify-center border-solid border-t-1"},Co=P({__name:"uploadify",props:{modelValue:null,format:null,limit:{default:1}},emits:["update:init"],setup(e,{expose:t,emit:n}){var ot;const a=e,{notification:s}=j(),o=xe(),i=Ze(),u=Y(),h=w(""),d=w([]),p=w([]),r=w([]),c=w([]),f=w([]),m=w({currentPage:1,pageSize:20,total:0,background:!0}),y=Me(),{getCategory:v,hanldClickCate:C,hanldAddCate:$,hanldEditCate:k,hanldDelCate:O}=to(),{getUploadifyList:L,hanldEditFile:ae,hanldMoveFile:Q,hanldDelFile:ee,hanldDelsFile:tt,hanldSelected:Kt,hanldCheckBox:Qt,uploadFinish:Xt}=no(),{handlePageChange:en}=ao(),tn={[Le]:o.value,[Je]:i.value};let nt="";nt=`//${location.host}/${(ot=u.site)==null?void 0:ot.uploadify_api.upload}`;const at=w({action:nt,headers:tn,data:{cid:h.value},showFileList:!1,multiple:!0,onFinish:B=>Xt({...B})}),nn=()=>{if(!p.value.length)return s==null||s.error({title:"请选择附件再确定",duration:1500}),[];if(p.value.length>a.limit)return s==null||s.error({title:`最多选择${a.limit}个附件`,duration:1500}),[];const B=[];for(let F=0;F<f.value.length;F++){const I=f.value[F];W(I.id,p.value)&&B.push(I.url)}return B};return window.addEventListener("uploadify:cateActive",B=>{const{active:F}=B.dataFul;h.value=F,at.value.data={cid:F}}),window.addEventListener("uploadify:category",async B=>{const F=await v();c.value=F,F.forEach(I=>{r.value.push({label:`移动至 -- ${I==null?void 0:I.title}`,key:I==null?void 0:I.id})})}),window.addEventListener("uploadify:selected",B=>{B.dataFul}),window.addEventListener("uploadify:clearSelected",B=>{p.value=[]}),window.addEventListener("uploadify:clearCheckbox",B=>{d.value=[]}),window.addEventListener("uploadify:files",async B=>{var ke,be,Pe;const F=(ke=B==null?void 0:B.dataFul)==null?void 0:ke.cid,I=(be=B==null?void 0:B.dataFul)==null?void 0:be.page,re=(Pe=B==null?void 0:B.dataFul)==null?void 0:Pe.limit,oe=await L({cid:F,page:I,limit:re});f.value=(oe==null?void 0:oe.data)??[],m.value.currentPage=oe.current_page,m.value.pageSize=oe.per_page,m.value.total=oe.total}),window.addEventListener("uploadify:paginator",B=>{const{page:F,limit:I}=B.dataFul;m.value.currentPage=F,m.value.pageSize=I;const re={cid:h.value,page:F,limit:I};G("uploadify:files",re)}),Ct(async()=>{G("uploadify:category"),G("uploadify:files"),n("update:init",{exposed:y.exposed})}),t({hanldConfirmSelect:nn}),(B,F)=>{const I=St,re=he,st=Pn,oe=$t,ke=le,be=Re,Pe=Sn,an=$n,on=Rn,sn=ve("vxe-pager");return _(),b("div",oo,[S("div",so,[g(I,null,{default:x(()=>[U(" 附件分类 ")]),_:1}),S("div",{class:se(["px-10px flex justify-between cursor-pointer hover:bg-[#e5e5e5] py-15px select-none",{"bg-[#e5e5e5]":l(h)===""}]),onClick:F[0]||(F[0]=z=>l(C)(l(h),""))},[S("div",lo,[g(E,{icon:"AppstoreOutlined",color:"#666"}),ro]),g(E,{icon:"FolderAddOutlined",color:"#888",onClick:l($)},null,8,["onClick"])],2),(_(!0),b(Z,null,te(l(c),(z,Te)=>(_(),b("div",{key:Te,title:z.title,class:se(["px-10px flex justify-between cursor-pointer hover:bg-[#e5e5e5] py-15px select-none",{"bg-[#e5e5e5]":l(h)===z.id}]),onClick:de=>l(C)(l(h),z.id),onDblclick:de=>l(k)(z.id)},[S("div",co,[g(E,{icon:"FolderOpenTwotone",color:"#666"}),S("span",uo,T(z.title),1)]),g(E,{icon:"DeleteFilled",color:"#666",onClick:de=>l(O)(z.id)},null,8,["onClick"])],42,io))),128))]),S("div",po,[S("div",fo,[ho,g(ke,{align:"center"},{default:x(()=>[S("div",null,[g(st,N(M(l(at))),{default:x(()=>[g(re,{type:"success"},{icon:x(()=>[g(E,{icon:"UploadOutlined"})]),default:x(()=>[U(" 上传 ")]),_:1})]),_:1},16)]),S("div",null,[g(oe,{trigger:"hover",options:l(r),onSelect:F[1]||(F[1]=z=>l(Q)(z,l(d)))},{default:x(()=>[g(re,{type:"warning"},{icon:x(()=>[g(E,{icon:"RotateLeftOutlined"})]),default:x(()=>[U(" 移动 ")]),_:1})]),_:1},8,["options"])]),S("div",null,[g(re,{type:"error",onClick:F[2]||(F[2]=z=>l(tt)(l(d)))},{icon:x(()=>[g(E,{icon:"RestFilled"})]),default:x(()=>[U(" 删除 ")]),_:1})])]),_:1})]),S("div",mo,[g(on,{cols:5,"y-gap":10,"x-gap":12},{default:x(()=>[(_(!0),b(Z,null,te(l(f),(z,Te)=>(_(),R(an,{key:Te},{default:x(()=>[S("div",{class:se(["relative border-solid border-1",l(W)(z.id,l(p)??[])?"border-red":"border-gray"])},[S("div",go,[g(be,{class:"w-100% h-100% cursor-pointer !block",src:z.url,"preview-disabled":!0,onClick:de=>l(Kt)(z.id,l(p),a.limit)},{placeholder:x(()=>[_o]),_:2},1032,["src","onClick"])]),S("div",vo,T(z.title),1),S("div",yo,[S("div",null,[g(Pe,{checked:l(W)(z.id,l(d)),value:z.id,onClick:de=>l(Qt)(l(d),z.id)},null,8,["checked","value","onClick"])]),S("div",xo,[g(E,{icon:"EditOutlined",class:"cursor-pointer",color:"#555",title:"修改",size:20,onClick:de=>l(ae)(z.id)},null,8,["onClick"]),g(E,{icon:"DeleteOutlined",class:"cursor-pointer",color:"#555",title:"删除",size:20,onClick:de=>l(ee)(z.id)},null,8,["onClick"])])])],2)]),_:2},1024))),128))]),_:1})]),S("div",wo,[g(sn,J(l(m),{layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:l(en)}),null,16,["onPageChange"])])])])}}});const ko=K(Co,[["__scopeId","data-v-3d252559"]]),bo={class:"absolute top-1px right-1px w-20px h-20px rounded-3px bg-[rgba(0,0,0,.45)] text-12px cursor-pointer pr-5px select-none flex items-center justify-center"},Po=P({__name:"index",props:{modelValue:null,format:null,limit:{default:1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,{dialog:a}=j(),s=w(),o=w(),i=w({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"关闭",show:!0}}),u=d=>{const p=[...n.modelValue];p.splice(d,1),t("update:modelValue",p)},h=()=>{o.value=a==null?void 0:a.create({title:"附件管理器",class:"pro-admin-dialog",style:{width:"45%"},showIcon:!1,maskClosable:!1,content:()=>V(ko,{...n,"onUpdate:init":d=>{s.value=d.exposed}}),action:()=>V(me,{extraConfig:i.value,"onUpdate:submit":()=>{var p;const d=s.value.hanldConfirmSelect();d.length&&(t("update:modelValue",d),(p=o.value)==null||p.destroy())},"onUpdate:rest":()=>{var d;(d=o.value)==null||d.destroy()}})})};return vt(()=>{typeof n.modelValue=="string"&&n.modelValue!==""&&t("update:modelValue",[n.modelValue])}),(d,p)=>{const r=Re,c=le;return _(),R(c,null,{default:x(()=>[(_(!0),b(Z,null,te(e.modelValue,(f,m)=>(_(),b("div",{key:m,class:"flex items-center justify-center w-50px h-50px relative cursor-pointer border-1 border-solid rounded-3px bg-[#f5f5f5] border-[#888]"},[g(r,{src:f},null,8,["src"]),S("div",bo,[g(E,{icon:"DeleteFilled",class:"!w-12px",size:16,color:"#fff",onClick:y=>u(m)},null,8,["onClick"])])]))),128)),S("div",{class:"flex items-center justify-center w-50px h-50px relative cursor-pointer border-1 border-solid rounded-3px bg-[#f5f5f5] border-[#888]",onClick:h},[g(E,{icon:"FolderOpenOutlined",size:28,color:"#555"})])]),_:1})}}}),So=P({__name:"index",props:{modelValue:null,style:{default:{}}},setup(e){return(t,n)=>(_(),b("div",N(M(e.style)),T(e.modelValue),17))}}),$o={javascript:Dn,php:Bn,python:Tn,java:An,css:Un,xml:Fn},Ro=e=>(lt.registerLanguage(e,$o[e]),lt),jo={class:"w-100%"},Eo=["innerHTML"],Do=P({__name:"index",props:{modelValue:null,language:{default:"javascript"},showLineNumbers:{type:Boolean}},setup(e){const t=e,a=Ro(t.language).highlight(t.modelValue,{language:t.language}).value;return(s,o)=>(_(),b("div",jo,[S("pre",null,[U("    "),S("code",{class:"hljs",innerHTML:l(a)},null,8,Eo),U(`
    `)])]))}});const Bo=K(Do,[["__scopeId","data-v-49fee51c"]]),pt={amap:qa,bmap:Ma,icons:Ya,qmap:Xa,remote:eo,uploadify:Po,info:So,HCode:Bo};function To(e){Object.keys(pt).forEach(t=>{e.component(t,pt[t])})}const Ao={class:"h-100%"},Mt=P({__name:"index",props:{api:null,method:{default:"GET"},ajaxParams:{default:{}},isModal:{type:Boolean,default:!1}},emits:["update:init","update:submit","update:success","update:error"],setup(e,{expose:t,emit:n}){const a=e,{fApi:s,formData:o,formConfig:i,formRule:u,hanldSubmit:h,hanldReset:d}=Oa(a,n);Aa(),rt.use(To);const p=rt.$form();return t({hanldSubmit:h,hanldReset:d}),(r,c)=>(_(),b("div",Ao,[g(l(p),{api:l(s),"onUpdate:api":c[0]||(c[0]=f=>Ge(s)?s.value=f:null),modelValue:l(o),"onUpdate:modelValue":c[1]||(c[1]=f=>Ge(o)?o.value=f:null),rule:l(u),option:l(i)},null,8,["api","modelValue","rule","option"])]))}}),Uo={class:"h-550px overflow-x-hidden overflow-y-auto p-5"},et=P({__name:"popup",setup(e){const t=ce();return(n,a)=>(_(),b("div",Uo,[g(Mt,N(M(l(t))),null,16)]))}}),Fo=(e,t)=>{const n=w((e==null?void 0:e.file)??""),a=w(),s=w(""),o=w(""),i=w(ut()),u=()=>{if(!n.value){s.value="config";return}s.value="loading";const v=`${n.value}.vue`;ue(v).then(C=>{o.value=C,s.value="success",t("update:init",C)}).catch(C=>{console.error(C),s.value="fail",t("update:error",C)})};u();const h=(v,C="el-icon-warning",$="font-size:26px;color:red;")=>({template:`
        <div class="remote-loading">
            <div class="${C}" style="${$}"></div>
            <div class="mt-5px">${v}</div>
        </div>
        `}),d=(v,C)=>{Gn.render(v).then($=>{const k=document.createElement("style");if(k.setAttribute("type","text/css"),k.setAttribute("id",`css${C}`),k.styleSheet)k.styleSheet.cssText=$.css;else{const L=document.createTextNode($.css);k.appendChild(L)}const O=document.getElementsByTagName("head");O.length?O[0].appendChild(k):document.documentElement.appendChild(k)})},p=v=>({templates:v.match(/<template>([\s\S]*)<\/template>/)[1],sctipts:v.match(/<script.*>([\s\S]*)<\/script>/)[1],styles:v.match(/<style.*>([\s\S]*)<\/style>/)[1]}),r=()=>{const v=Qe.vue,{notification:C,message:$,dialog:k,loadingBar:O}=j(),L=Ve(),ae=ne(),Q=ge(),ee=Y();v.config.globalProperties.$userApp=Q,v.config.globalProperties.$siteApp=ee,v.config.globalProperties.$routeApp=ae,v.config.globalProperties.$routerApp=L,v.config.globalProperties.$http=pa,v.component("AppIcons",E),wt.install(v),v.config.globalProperties.$useNotification=C,v.config.globalProperties.$useMessage=$,v.config.globalProperties.$useDialog=k,v.config.globalProperties.$useLoadingBar=O},c=(v,C,$)=>{const k=p(C),O=k.sctipts.indexOf("{"),L=k.sctipts.lastIndexOf("}"),ae=k.sctipts.slice(O,L+1),Q=new Function(`return ${ae}`)();if(!Q)return h("远程组件代码格式解析失败");if(Q.template=k==null?void 0:k.templates,v.setAttribute("class",`remote css${$}`),!document.querySelector(`style[id=css${$}]`)){const ee=`
            .css${$}{
                ${k.styles}
            }
        `;d(ee,$)}return r(),Q},f=A(()=>s.value==="config"?h("请先配置远程文件"):s.value==="fail"?h("远程组件加载失败"):o.value?c(a.value,o.value,i.value):h("正在加载中..."));return{fileUrl:n,remoteRef:a,loadingStatus:s,componentFile:o,cssId:i,currentView:f,hanldWin:v=>{n.value=v,i.value=ut(),u()},hanldClose:()=>{e!=null&&e.modal&&t("update:closeWin")}}},Go=P({__name:"index",emits:["update:init","update:success","update:error","update:closeWin"],setup(e,{emit:t}){const n=ce(),{remoteRef:a,loadingStatus:s,currentView:o,hanldClose:i,hanldWin:u}=Fo(n,t);return(h,d)=>(_(),b("div",{ref_key:"remoteRef",ref:a,class:"h-100%"},[l(s)==="success"?(_(),R(On(l(o)),J({key:0},l(n),{onOpenWin:l(u),onCloseWin:l(i)}),null,16,["onOpenWin","onCloseWin"])):D("",!0)],512))}});const we=K(Go,[["__scopeId","data-v-f67abc9d"]]),Oo=(e,t,n)=>{const{notification:a}=j();if(!(n!=null&&n.file))return a==null||a.error({title:"导出数据失败，缺少[file]地址",duration:2e3}),Promise.reject(new Error("导出数据失败，缺少导出地址"));q(n==null?void 0:n.file,{responseType:"blob"}).then(s=>{zn.saveFile({filename:e,type:t,content:s.data})})},zo=({vxeGridConfig:e,options:t,xGrid:n})=>{var i;const{notification:a}=j();if(!((i=e.exportConfig)!=null&&i.api))return a==null||a.error({title:"请设置请求API",duration:1500}),Promise.reject(new Error("请设置请求API"));const s=n==null?void 0:n.getProxyInfo(),o={format:t.type??"xlsx",filename:t.filename??"导出文件",sheetName:t.sheetName??"",isHeader:t.isHeader??!1,original:t.original??!1,mode:t.mode??"all",pager:s?s.pager:null,ids:t.mode==="selected"?t.data.map(u=>u.id):[],fields:t.columns.map(u=>({field:u.field,title:u.title}))};return new Promise(u=>{var p;const h={method:"POST",data:{...o}},d=((p=e.exportConfig)==null?void 0:p.api)??"";q(d,h).then(r=>{const{data:c}=r;Oo(o.filename,o.format,c),u(r)})})},Ho=({vxeGridConfig:e,file:t,xGrid:n})=>{const{notification:a}=j(),s=new FormData;return s.append("file",t),new Promise(o=>{var h;const i=((h=e.importConfig)==null?void 0:h.api)??"";q(i,{method:"POST",data:s}).then(d=>{const{msg:p}=d;a==null||a.success({title:p??"操作成功",duration:1500}),n==null||n.commitProxy("query"),o(d)}).catch(d=>{console.error("导入失败",d)})})},qo=({$table:e,file:t})=>new Promise(n=>{const a=new FileReader;a.onload=s=>{const o=s.target?s.target.result:"",i=Hn(o,{type:"binary"}),u=qn.sheet_to_json(i.Sheets.Sheet1);e.loadData(u),n(u)},a.readAsBinaryString(t)}),Io=e=>{var t,n;return(t=e.vxeGridConfig.importConfig)!=null&&t.api&&((n=e.vxeGridConfig.importConfig)!=null&&n.isRemote)?Ho(e):qo(e)},No=async({options:e})=>{const t=e.form,n=e.page,a=e.sort,s=e.filters,o=H.currentRoute.value,i=w({method:"GET",params:{page:n.currentPage??1,limit:n.pageSize??20,...(o==null?void 0:o.query)??{}},data:{...t}});return JSON.stringify(a)!=="{}"&&(i.value.params.field=a.field,i.value.params.order=a.order),s.forEach(({field:u,values:h})=>{i.value.params={...i.value.params,[u]:h.join(",")}}),new Promise((u,h)=>{const d=Ee();q(d,i.value).then(p=>{u(p)}).catch(p=>{h(p)})})},Mo=(e,t,n,a)=>{const{notification:s}=j();if(t.length<=0){s==null||s.error({title:"请先导入数据",duration:1500});return}if(!e){s==null||s.error({title:"未设置导入API接口",duration:1500});return}Ye(e,{import:n,data:t}).then(i=>{var u;(u=a.xGrid)==null||u.commitProxy("query"),s==null||s.success({title:(i==null?void 0:i.msg)??"操作成功",duration:1500})})},Vo=e=>{pe.commands.add("importAllData",t=>{var o;const{$table:n}=t,a=n==null?void 0:n.getTableData(),s=a==null?void 0:a.fullData;Mo(((o=e.vxeTableConfig.importConfig)==null?void 0:o.api)??"",s,"all",e)})},Wo=e=>{const{notification:t}=j(),n=w(),a=w({}),s=w({active:"",field:"",list:[]}),o=w([]),i=w([]),u={method:e.method,params:{},data:{}};u.method==="GET"?u.params={...e.ajaxParams}:u.data={...e.ajaxParams},q(e.api,u).then(p=>{const r=p.data;a.value=r.tableConfig,s.value=r.tabsConfig,o.value=r.rightButtonList,i.value=r.topButtonList;const c={...a.value.toolbarConfig,slots:{buttons:"topButtonList"}};a.value.toolbarConfig=c,c!=null&&c.import&&(a.value.importConfig={...a.value.importConfig,remote:!0,importMethod:f=>Io({...f,vxeGridConfig:a.value,xGrid:n.value})}),c.export&&(a.value.exportConfig={...a.value.exportConfig,remote:!0,exportMethod:f=>zo({...f,vxeGridConfig:a.value,xGrid:n.value})}),a.value.proxyConfig={...a.value.proxyConfig,ajax:{query:(f,m)=>No({options:f,xGrid:n.value,extra:m,vxeGridConfig:a.value})}}});const h=(p,r)=>{var c;if(!p){t==null||t.error({title:"请设置请求API接口",duration:1500}),(c=n.value)==null||c.commitProxy("query");return}Ke(p,r).then(()=>{var f;(f=n.value)==null||f.commitProxy("query")})},d=({row:p,column:r})=>{var y,v,C;const c=((v=(y=a.value)==null?void 0:y.rowConfig)==null?void 0:v.keyField)??"id",f=p[r==null?void 0:r.field],m={[c]:p[c],keyField:c,field:r==null?void 0:r.field,value:f};h((C=r==null?void 0:r.params)==null?void 0:C.api,m)};return Vo({xGrid:n.value,vxeTableConfig:a.value}),{xGrid:n,vxeGridConfig:a,tabsConfig:s,rightButtonList:o,topButtonList:i,hanldEditClose:d}},Lo=P({__name:"icons",props:{row:null,column:null},setup(e){const n=e.column.params;return n!=null&&n.type&&delete n.type,(a,s)=>(_(),R(E,J({icon:e.row[e.column.field]},l(n)),null,16,["icon"]))}}),Jo=P({__name:"image",props:{column:null,row:null},setup(e){var i;const t=e,n=(u,h)=>{let d=u,p=0;function r(){d=d[h[p]],p++,p<h.length&&d&&r()}return r(),d},a=t.column.field;let s=w();if(a.includes(".")){const u=a.split(".");s=n(t.row,u)}else s=t.row[a];const o=w(t.column.params);return o!=null&&o.type&&delete o.value.type,(i=o.value)!=null&&i.style||(o.value.style={width:"35px",height:"30px"}),(u,h)=>{const d=Re;return l(s)?(_(),R(d,J({key:0,src:l(s)},l(o)),null,16,["src"])):D("",!0)}}}),Zo=P({__name:"money",props:{row:null,column:null},setup(e){var s;const n=w(((s=e.column)==null?void 0:s.params)??{}),a=w("￥");return n!=null&&n.format&&(a.value=n==null?void 0:n.format,n==null||delete n.format),(o,i)=>(_(),b("div",N(M(l(n))),T(l(a))+T(l(it).commafy(l(it).toNumber(e.row[e.column.field]),{digits:2})),17))}}),Yo=P({__name:"swtich",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(e){const t=e,{notification:n}=j(),a=w({}),s=({focused:i,checked:u})=>{var h,d,p,r;return u?a.value=((d=(h=t.column)==null?void 0:h.params)==null?void 0:d.checked)??{}:a.value=((r=(p=t.column)==null?void 0:p.params)==null?void 0:r.unchecked)??{},a.value},o=i=>{var c,f,m,y,v;const u=((f=(c=t.vxeGridConfig)==null?void 0:c.rowConfig)==null?void 0:f.keyField)??"id",h={[u]:t.row[u],keyField:u,field:(m=t.column)==null?void 0:m.field,value:i},d=Ee("rowEdit",!0),p=((y=t.column.params)==null?void 0:y.api)??d,r=w({method:((v=t.column.params)==null?void 0:v.method)??"PUT",params:{},data:{}});r.value.method==="GET"?r.value.params={...h}:r.value.data={...h},q(p,r.value).then(C=>{t.xGrid.commitProxy("query"),n==null||n.success({title:(C==null?void 0:C.msg)??"操作成功",duration:1500})})};return(i,u)=>{var d,p,r,c,f,m;const h=In;return _(),R(h,{"rail-style":s,"default-value":e.row[e.column.field],"checked-value":(r=(p=(d=e.column)==null?void 0:d.params)==null?void 0:p.checked)==null?void 0:r.value,"unchecked-value":(m=(f=(c=e.column)==null?void 0:c.params)==null?void 0:f.unchecked)==null?void 0:m.value,"on-update:value":o},{checked:x(()=>{var y,v,C;return[U(T((C=(v=(y=e.column)==null?void 0:y.params)==null?void 0:v.checked)==null?void 0:C.text),1)]}),unchecked:x(()=>{var y,v,C;return[U(T((C=(v=(y=e.column)==null?void 0:y.params)==null?void 0:v.unchecked)==null?void 0:C.text),1)]}),icon:x(()=>{var y,v,C,$;return[(v=(y=e.column)==null?void 0:y.params)!=null&&v.icon?(_(),R(E,{key:0,icon:($=(C=e.column)==null?void 0:C.params)==null?void 0:$.icon},null,8,["icon"])):D("",!0)]}),"checked-icon":x(()=>{var y,v,C,$,k,O;return[(C=(v=(y=e.column)==null?void 0:y.params)==null?void 0:v.checked)!=null&&C.icon?(_(),R(E,{key:0,icon:(O=(k=($=e.column)==null?void 0:$.params)==null?void 0:k.checked)==null?void 0:O.icon},null,8,["icon"])):D("",!0)]}),"unchecked-icon":x(()=>{var y,v,C,$,k,O;return[(C=(v=(y=e.column)==null?void 0:y.params)==null?void 0:v.unchecked)!=null&&C.icon?(_(),R(E,{key:0,icon:(O=(k=($=e.column)==null?void 0:$.params)==null?void 0:k.unchecked)==null?void 0:O.icon},null,8,["icon"])):D("",!0)]}),_:1},8,["default-value","checked-value","unchecked-value"])}}}),Ko={key:0,class:"pt-2"},Qo={class:"bg-white flex"},Xo=["onClick"],es={class:"pl-1"},ts=P({__name:"tabs",props:{xGrid:null,vxeGridConfig:null,tabsConfig:null},setup(e){var h;const t=e,n=ne(),a=Ve(),s=w({inline:!0,size:1,...((h=t.tabsConfig)==null?void 0:h.space)??{}}),o=n==null?void 0:n.query[t.tabsConfig.field],i=w(o??t.tabsConfig.active),u=d=>{a.push({query:{[t.tabsConfig.field]:d.value}})};return(d,p)=>{const r=le;return e.tabsConfig.list.length>0?(_(),b("div",Ko,[S("div",Qo,[g(r,N(M(l(s))),{default:x(()=>[(_(!0),b(Z,null,te(e.tabsConfig.list,(c,f)=>(_(),b("div",{key:f,class:se(["flex items-center justify-center p-3 select-none hover:bg-bluegray hover:text-white cursor-pointer",{"bg-bluegray text-white cursor-pointer":l(i)===(c==null?void 0:c.value)}]),onClick:m=>u(c)},[c!=null&&c.icon?(_(),R(E,{key:0,icon:c==null?void 0:c.icon},null,8,["icon"])):D("",!0),S("span",es,T((c==null?void 0:c.label)??"错误"),1)],10,Xo))),128))]),_:1},16)])])):D("",!0)}}}),ns=P({__name:"tags",props:{row:null,column:null},setup(e){var o,i,u,h,d,p,r;const t=e,n=w("标签出错"),a=w({}),s=t.row[(o=t.column)==null?void 0:o.field];return(u=(i=t.column)==null?void 0:i.params)!=null&&u.options&&(n.value=(d=(h=t.column)==null?void 0:h.params)==null?void 0:d.options[s]),(r=(p=t.column)==null?void 0:p.params)!=null&&r.style&&(a.value=t.column.params.style[s]),(c,f)=>{const m=Nn;return _(),R(m,N(M(l(a))),{default:x(()=>[U(T(l(n)),1)]),_:1},16)}}}),as=P({__name:"remote",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(e){var o,i,u;const t=e,n=w((i=(o=t.column)==null?void 0:o.params)==null?void 0:i.file),a=((u=t.column)==null?void 0:u.field)??"",s=w(t.row[a]??"");return(h,d)=>(_(),R(l(we),J({file:l(n)},{modelValue:l(s),column:e.column,row:e.row}),null,16,["file"]))}}),Be=(e,t)=>{let n={};for(const a in e){const s=e[a]??"id";n={...n,[s]:t[a]??""}}return n},os=({xGrid:e,vxeGridConfig:t,button:n,row:a,column:s})=>{var p,r,c,f,m,y,v;const o=H.currentRoute.value,{notification:i}=j(),u={method:((p=n.pageData)==null?void 0:p.method)??"GET",params:{},data:{}};let d={...((r=n==null?void 0:n.pageData)==null?void 0:r.queryParams)??{},...o.query};if(a&&s&&W(JSON.stringify((c=n==null?void 0:n.pageData)==null?void 0:c.aliasParams),["[]","{}"])){const C=((f=t==null?void 0:t.rowConfig)==null?void 0:f.keyField)??"id";d={...d,[C]:a[C]}}W(JSON.stringify((m=n==null?void 0:n.pageData)==null?void 0:m.aliasParams),["[]","{}"])||(d={...d,...Be((y=n==null?void 0:n.pageData)==null?void 0:y.aliasParams,a)}),u.method==="GET"?u.params={...d}:u.data={...d},q(((v=n.pageData)==null?void 0:v.api)??"",u).then(C=>{e==null||e.commitProxy("query"),i==null||i.success({title:(C==null?void 0:C.msg)??"操作成功",duration:1500})})},ft=({vxeGridConfig:e,button:t,row:n,column:a})=>{var h,d,p,r,c,f,m,y;const{notification:s}=j();if(!((h=t==null?void 0:t.pageData)!=null&&h.path)){s==null||s.error({title:"缺少跳转地址",duration:1500});return}const o=H.currentRoute.value;let u={...((d=t==null?void 0:t.pageData)==null?void 0:d.queryParams)??{},...o.query};if(n&&a&&W(JSON.stringify((p=t==null?void 0:t.pageData)==null?void 0:p.aliasParams),["[]","{}"])){const v=((r=e==null?void 0:e.rowConfig)==null?void 0:r.keyField)??"id";u={...u,[v]:n[v]}}W(JSON.stringify((c=t==null?void 0:t.pageData)==null?void 0:c.aliasParams),["[]","{}"])||(u={...u,...Be((f=t==null?void 0:t.pageData)==null?void 0:f.aliasParams,n)}),(m=t.pageData)!=null&&m.isBack&&(u={...u,isBack:1}),H.push({path:(y=t==null?void 0:t.pageData)==null?void 0:y.path,query:{...u}})},ss=({xGrid:e,vxeGridConfig:t,button:n,row:a,column:s})=>{const{dialog:o}=j();o==null||o.create({...(n==null?void 0:n.message)??{},onPositiveClick:()=>{os({xGrid:e,vxeGridConfig:t,button:n,row:a,column:s})}})},He=w({submitBtn:{},resetBtn:{}}),$e=w({hanldSubmit:()=>{},hanldReset:()=>{}}),_e=w(),ls=({vxeGridConfig:e,xGrid:t,button:n,row:a,column:s})=>{var d,p,r,c,f,m,y,v,C,$;const o=H.currentRoute.value;let i,u={},h={...o.query};if(JSON.stringify((d=n.pageData)==null?void 0:d.queryParams)!=="{}"&&(h={...(p=n.pageData)==null?void 0:p.queryParams}),a&&s&&W(JSON.stringify((r=n==null?void 0:n.pageData)==null?void 0:r.aliasParams),["[]","{}"])){const k=((c=e==null?void 0:e.rowConfig)==null?void 0:c.keyField)??"id";h={...h,[k]:a[k]}}switch(W(JSON.stringify((f=n==null?void 0:n.pageData)==null?void 0:f.aliasParams),["[]","{}"])||(h={...h,...Be((m=n==null?void 0:n.pageData)==null?void 0:m.aliasParams,a)}),(y=n.pageData)==null?void 0:y.type){case"table":i=Lt,u={api:((v=n==null?void 0:n.pageData)==null?void 0:v.api)??""};break;case"remote":i=we,u={file:((C=n==null?void 0:n.pageData)==null?void 0:C.path)??"",modal:(n==null?void 0:n.pageData.modal)??!1,ajaxParams:h,"onUpdate:closeWin":()=>{var k;(k=_e.value)!=null&&k.destroy&&_e.value.destroy()}};break;default:i=et,u={api:(($=n==null?void 0:n.pageData)==null?void 0:$.api)??"",method:n.pageData.method??"GET",ajaxParams:h,"onUpdate:init":k=>{var O,L;$e.value.hanldSubmit=(O=k==null?void 0:k.exposed)==null?void 0:O.hanldSubmit,$e.value.hanldReset=(L=k==null?void 0:k.exposed)==null?void 0:L.hanldReset,He.value.submitBtn=k==null?void 0:k.response.extraConfig.submitBtn,He.value.resetBtn=k==null?void 0:k.response.extraConfig.resetBtn},"onUpdate:success":()=>{var k;(k=_e.value)!=null&&k.destroy&&_e.value.destroy(),t==null||t.commitProxy("query")}};break}return{hpComponent:i,componentAttrs:u}},rs=e=>{var o,i;const{dialog:t}=j(),{hpComponent:n,componentAttrs:a}=ls(e),s={...((o=e.button)==null?void 0:o.message)??{},class:"pro-admin-dialog",content:()=>V(n,{...a})};((i=e.button.pageData)==null?void 0:i.type)==="form"&&(s.action=()=>V(me,{extraConfig:He.value,"onUpdate:submit":()=>{$e.value.hanldSubmit()},"onUpdate:rest":()=>{$e.value.hanldReset()}})),_e.value=t==null?void 0:t.create(s)},is=e=>{var d,p,r,c,f,m,y,v,C,$,k,O,L,ae;const t=((p=(d=e.button)==null?void 0:d.pageData)==null?void 0:p.api)??"/",n=((r=e.button.pageData)==null?void 0:r.method)??"GET";let a=((c=e.button.pageData)==null?void 0:c.path)??"";const{notification:s}=j(),o=H.currentRoute.value,i={method:n,params:{},data:{}};let h={...((m=(f=e.button)==null?void 0:f.pageData)==null?void 0:m.queryParams)??{},...o.query};if(e.row&&e.column&&W(JSON.stringify((v=(y=e.button)==null?void 0:y.pageData)==null?void 0:v.aliasParams),["[]","{}"])){const Q=(($=(C=e.vxeGridConfig)==null?void 0:C.rowConfig)==null?void 0:$.keyField)??"id";h={...h,[Q]:e.row[Q]}}W(JSON.stringify((O=(k=e.button)==null?void 0:k.pageData)==null?void 0:O.aliasParams),["[]","{}"])||(h={...h,...Be((ae=(L=e.button)==null?void 0:L.pageData)==null?void 0:ae.aliasParams,e.row)}),i.method==="GET"?i.params={...h}:i.data={...h},q(t,i).then(Q=>{const{data:ee}=Q;if(!a){if(!(ee!=null&&ee.url)){s==null||s.error({title:"缺少跳转地址",duration:1500});return}a=ee.url}Tt(a)||(a=`//${location.host}/${a}`),window.open(a,"about:blank")})},Vt=e=>{var t,n,a,s;((t=e.button.pageData)==null?void 0:t.type)==="page"?ft(e):((n=e.button.pageData)==null?void 0:n.type)==="link"?is(e):((a=e.button.pageData)==null?void 0:a.type)==="confirm"?ss(e):(s=e.button.pageData)!=null&&s.modal?rs(e):ft(e)},cs=()=>{var a;const e=ge(),t=(e==null?void 0:e.routerRecords)??[],n=[];for(const s of t){const o=`${(a=s.meta)==null?void 0:a.moduleName}${s.path}`;n.push(o)}return n},Wt=e=>{const t=cs();return W(e,t)},us=P({__name:"right-button",props:{xGrid:null,vxeGridConfig:null,column:null,row:null,rightButtonList:null},setup(e){const t=e,n=A(()=>a=>{var d,p,r,c,f,m,y;const s=((d=a.pageData)==null?void 0:d.api)??"";if(!Wt(s))return!1;const o=((r=(p=a==null?void 0:a.pageData)==null?void 0:p.params)==null?void 0:r.where)??"",i=(f=(c=a==null?void 0:a.pageData)==null?void 0:c.params)==null?void 0:f.field,u=(y=(m=a==null?void 0:a.pageData)==null?void 0:m.params)==null?void 0:y.value;if(i===void 0&&u===void 0)return!0;if(i===void 0||i===""||i&&(u===void 0||u===""))return!1;const h=t.row[i];switch(o){case"!=":return u!==h;case"in":return u instanceof Array&&W(h,u);case"notIn":return u instanceof Array&&!W(h,u);default:return u===h}});return(a,s)=>{const o=he,i=le;return _(),R(i,{align:"center",wrap:!1},{default:x(()=>[(_(!0),b(Z,null,te(e.rightButtonList,(u,h)=>(_(),b(Z,null,[l(n)(u)?(_(),R(o,J({key:h},(u==null?void 0:u.button)??{},{onClick:d=>l(Vt)({xGrid:e.xGrid,button:u,row:e.row,column:e.column,vxeGridConfig:e.vxeGridConfig})}),{icon:x(()=>{var d,p;return[(d=u==null?void 0:u.button)!=null&&d.icon?(_(),R(E,{key:0,icon:(p=u==null?void 0:u.button)==null?void 0:p.icon},null,8,["icon"])):D("",!0)]}),default:x(()=>[U(" "+T(u.title),1)]),_:2},1040,["onClick"])):D("",!0)],64))),256))]),_:1})}}}),ds={class:"flex space-x-3"},ps=P({__name:"top-button",props:{xGrid:null,column:null,topButtonList:null,vxeGridConfig:null},setup(e){const t=ne(),n=A(()=>a=>{var o;const s=((o=a.pageData)==null?void 0:o.api)??"";return!!Wt(s)});return(a,s)=>{var u;const o=he,i=le;return _(),b("div",ds,[(u=l(t).query)!=null&&u.isBack?(_(),R(o,{key:0,type:"warning",onClick:l(We)},{default:x(()=>[U(" 返回 ")]),_:1},8,["onClick"])):D("",!0),g(i,{align:"center"},{default:x(()=>[(_(!0),b(Z,null,te(e.topButtonList,(h,d)=>(_(),b("div",{key:d},[l(n)(h)?(_(),R(o,J({key:0},(h==null?void 0:h.button)??{},{onClick:p=>l(Vt)({button:h,xGrid:e.xGrid,vxeGridConfig:e.vxeGridConfig})}),{icon:x(()=>{var p,r;return[(p=h==null?void 0:h.button)!=null&&p.icon?(_(),R(E,{key:0,icon:(r=h==null?void 0:h.button)==null?void 0:r.icon},null,8,["icon"])):D("",!0)]}),default:x(()=>[U(" "+T(h.title),1)]),_:2},1040,["onClick"])):D("",!0)]))),128))]),_:1})])}}}),Lt=P({__name:"index",props:{api:null,method:{default:"GET"},ajaxParams:{default:{}}},setup(e){const t=e,{xGrid:n,vxeGridConfig:a,tabsConfig:s,rightButtonList:o,topButtonList:i,hanldEditClose:u}=Wo(t);return(h,d)=>{var r;const p=ve("vxe-grid");return(r=l(a))!=null&&r.id?(_(),R(p,J({key:0,ref_key:"xGrid",ref:n},l(a),{class:"p-4",onEditClosed:l(u)}),{money:x(({row:c,column:f,$grid:m})=>[g(l(Zo),N(M({vxeGridConfig:l(a),row:c,column:f,xGrid:m})),null,16)]),image:x(({row:c,column:f,$grid:m})=>[g(l(Jo),N(M({vxeGridConfig:l(a),row:c,column:f,xGrid:m})),null,16)]),icons:x(({row:c,column:f,$grid:m})=>[g(l(Lo),N(M({vxeGridConfig:l(a),row:c,column:f,xGrid:m})),null,16)]),switch:x(({row:c,column:f,$grid:m})=>[g(l(Yo),N(M({vxeGridConfig:l(a),row:c,column:f,xGrid:m})),null,16)]),tags:x(({row:c,column:f,$grid:m})=>[g(l(ns),N(M({vxeGridConfig:l(a),row:c,column:f,xGrid:m})),null,16)]),remote:x(({row:c,column:f,$grid:m})=>[g(l(as),N(M({vxeGridConfig:l(a),row:c,column:f,xGrid:m})),null,16)]),topButtonList:x(({column:c,$grid:f})=>[g(l(ps),N(M({vxeGridConfig:l(a),topButtonList:l(i),column:c,xGrid:f})),null,16)]),top:x(({$grid:c})=>[g(l(ts),N(M({vxeGridConfig:l(a),tabsConfig:l(s),xGrid:c})),null,16)]),rightButtonList:x(({row:c,column:f,$grid:m})=>[g(l(us),N(M({vxeGridConfig:l(a),rightButtonList:l(o),row:c,column:f,xGrid:m})),null,16)]),_:1},16,["onEditClosed"])):D("",!0)}}}),fs={class:"h-100% flex items-center"},hs={class:"flex select-none cursor-pointer"},ms={class:"pl-1 text-12px text-#555"},gs={class:"flex pl-1"},_s={class:"pl-1"},vs={key:0,class:"flex pl-1"},ys={class:"pl-1"},xs=P({__name:"user",setup(e){const t=ge(),n=Y(),a=ne(),{dialog:s,notification:o}=j(),i=w([{label:"修改资料",key:"profile",icon:()=>V(E,{icon:"EditTwotone"})},{label:"退出登录",key:"loginout",icon:()=>V(E,{icon:"ExportOutlined"})}]),u=new Map,h=w({submitBtn:{},resetBtn:{}}),d=w({hanldSubmit:()=>{},hanldReset:()=>{}});u.set("profile",()=>{const r=s==null?void 0:s.create({title:"用户资料",showIcon:!1,maskClosable:!1,class:"pro-admin-dialog",style:{width:"45%"},content:()=>{var c,f;return V(et,{api:((f=(c=n.site)==null?void 0:c.public_api)==null?void 0:f.user_edit)??"",method:"GET",ajaxParams:{},"onUpdate:init":m=>{var y,v;d.value.hanldSubmit=(y=m==null?void 0:m.exposed)==null?void 0:y.hanldSubmit,d.value.hanldReset=(v=m==null?void 0:m.exposed)==null?void 0:v.hanldReset,h.value.submitBtn=m==null?void 0:m.response.extraConfig.submitBtn,h.value.resetBtn=m==null?void 0:m.response.extraConfig.resetBtn},"onUpdate:success":()=>{r==null||r.destroy(),t.getUserInfo()}})},action:()=>V(me,{extraConfig:h.value,"onUpdate:submit":()=>{var c;(c=d.value)==null||c.hanldSubmit()},"onUpdate:rest":()=>{var c;(c=d.value)==null||c.hanldReset()}})})}),u.set("loginout",()=>{s==null||s.warning({title:"温馨提示",content:"是否确认退出登录？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{va().then(r=>{t.setToken(""),H.push({path:"/login",query:{redirect:a.fullPath}}),o==null||o.success({title:(r==null?void 0:r.msg)??"操作成功",duration:1500})})}})});const p=r=>{const c=u.get(r);typeof c=="function"&&c()};return(r,c)=>{const f=Mn,m=$t;return _(),b("div",fs,[g(m,{options:l(i),onSelect:p},{default:x(()=>{var y,v,C,$,k;return[S("div",hs,[g(f,{round:"",size:35,src:(y=l(t).userInfo)==null?void 0:y.headimg},null,8,["src"]),S("div",ms,[S("div",gs,[g(E,{icon:"UserOutlined"}),S("span",_s,T((v=l(t).userInfo)==null?void 0:v.nickname),1)]),($=(C=l(t).userInfo)==null?void 0:C.role)!=null&&$.title?(_(),b("div",vs,[g(E,{icon:"CodeSandboxOutlined"}),S("span",ys,T((k=l(t).userInfo)==null?void 0:k.role.title),1)])):D("",!0)])])]}),_:1},8,["options"])])}}}),ws={key:0,class:"h-100% flex justify-start items-center"},Cs=["onClick"],ks=P({__name:"header-right-toolbar",setup(e){const t=w([]);return(n,a)=>{const s=Vn;return l(t).length?(_(),b("div",ws,[(_(!0),b(Z,null,te(l(t),(o,i)=>(_(),R(s,{key:i,trigger:"hover",placement:"bottom"},{trigger:x(()=>[S("div",{class:"h-100% px-4 flex items-center select-none cursor-pointer hover:bg-#d5d5d5",onClick:o.hanlder},[g(E,{icon:o.icon,size:18,color:"#555"},null,8,["icon"])],8,Cs)]),default:x(()=>[U(" "+T(o.title),1)]),_:2},1024))),128))])):D("",!0)}}}),bs=["href","target"],Ps=P({__name:"side-title",props:{MenuItem:null},setup(e){var d,p;const t=e,n=A(()=>{var r;return(r=t.MenuItem)==null?void 0:r.menuTitle}),a=t.MenuItem.ajaxParams?ia(t.MenuItem.ajaxParams):{},s=A(()=>t.MenuItem.path),o=(p=(d=t.MenuItem)==null?void 0:d.children)==null?void 0:p.find(r=>(r==null?void 0:r.show)&&(r==null?void 0:r.type)!=="group"),i=A(()=>o&&(o==null?void 0:o.length)>0),u=A(()=>{var r;return(r=s.value)==null?void 0:r.startsWith("http")}),h=A(()=>{var r;return((r=t.MenuItem)==null?void 0:r.target)??"_blank"});return(r,c)=>{const f=ve("router-link");return l(i)?(_(),b(Z,{key:0},[U(T(l(n)),1)],64)):l(u)?(_(),b("a",{key:1,href:l(s),target:l(h)},T(l(n)),9,bs)):(_(),R(f,{key:2,to:{path:`/${l(s)}`,query:{...l(a)}},replace:!0},{default:x(()=>[U(T(l(n)),1)]),_:1},8,["to"]))}}}),Ss={class:"pro-admin-mix-tabs overflow-x-auto flex"},$s={class:"w-80px bg-dark text-white select-none text-12px"},Rs=["onClick"],js={class:"text-center py-3"},Es={key:0,class:"flex-1"},Ds=P({__name:"index",setup(e){ye(r=>({"332b8001":l(p)}));const t=ce(),n=Ve(),a=(r,c)=>r.find(f=>f.key===c?f:a((f==null?void 0:f.children)??[],c)),s=w((t==null?void 0:t.value)??""),o=w(t.options??[]),i=w([a(o.value??[],s.value)]),u=A(()=>r=>!!a(r??[],s.value)),h=r=>{const c=r[0];return c&&(c==null?void 0:c.type)!=="group"&&(c!=null&&c.show)?c:h(c.children??[])},d=r=>{const c=h((r==null?void 0:r.children)??[]);let f={};typeof c.ajaxParams=="object"&&(f={...c.ajaxParams}),s.value=String((c==null?void 0:c.key)??""),i.value=[r],n.push({path:`/${c==null?void 0:c.path}`,query:{...f}})};Ne(()=>t.value,r=>{s.value=String(r)});const p=A(()=>`calc(100vh - ${t["header-height"]}px)`);return(r,c)=>{const f=St,m=Rt;return _(),b("div",Ss,[S("div",$s,[(_(!0),b(Z,null,te(l(o),(y,v)=>(_(),b("div",{key:v,class:se(["flex items-center justify-center cursor-pointer hover:bg-blueGray hover:text-white",{"bg-gray text-white":l(u)((y==null?void 0:y.children)??[])}]),onClick:C=>d(y)},[S("div",js,[y.menuIcon?(_(),R(E,{key:0,icon:y.menuIcon,size:22},null,8,["icon"])):D("",!0),S("div",null,T(y.menuTitle),1)])],10,Rs))),128))]),l(t).collapsed?D("",!0):(_(),b("div",Es,[(_(!0),b(Z,null,te(l(i),(y,v)=>(_(),b("div",{key:v},[g(f,{class:"m-0"},{default:x(()=>[U(T(y==null?void 0:y.menuTitle),1)]),_:2},1024),g(m,{mode:"vertical",value:l(s),options:y==null?void 0:y.children,indent:18},null,8,["value","options"])]))),128))]))])}}});const Bs=K(Ds,[["__scopeId","data-v-aa01d090"]]),Ts={class:"flex items-center justify-center"},As=P({__name:"index",props:{layout:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null,siderWidth:null,collapsed:{type:Boolean},siderCollapsedWidth:null,collapsedIconSize:{default:22},showSiderTrigger:{type:[Boolean,String]},inverted:{type:Boolean},active:null,options:null,expandedKeys:null},emits:["update:collapsed","update:active","update:expandedKeys"],setup(e){const t=e;ye(o=>({"3aec529c":l(n),e1be5cb0:l(s),f07cd938:l(a)}));const n=A(()=>`${t.headerHeight}px`),a=A(()=>`${t.footerHeight}px`),s=A(()=>`calc(100vh - ${t.headerHeight}px - ${t.footerHeight}px)`);return(o,i)=>{const u=jt,h=Et,d=Dt;return _(),R(d,{"has-sider":"",class:"h-screen"},{default:x(()=>[g(l(Oe),{width:e.siderWidth,collapsed:e.collapsed,"collapsed-width":e.siderCollapsedWidth,"show-trigger":e.showSiderTrigger,onUpdateCollapsed:i[2]||(i[2]=p=>o.$emit("update:collapsed",p))},{default:x(()=>[S("div",Ts,[g(l(Ut),{src:e.logo,inverted:e.inverted,"header-height":e.headerHeight,"collapsed-width":e.siderCollapsedWidth},null,8,["src","inverted","header-height","collapsed-width"]),e.collapsed?D("",!0):(_(),R(l(Ft),{key:0,layout:e.layout,inverted:e.inverted,"header-height":e.headerHeight,title:e.title},null,8,["layout","inverted","header-height","title"]))]),g(Bs,{value:e.active,options:e.options,inverted:e.inverted,collapsed:e.collapsed,"collapsed-icon-size":e.collapsedIconSize,"expanded-keys":e.expandedKeys,"header-height":e.headerHeight,"footer-height":e.footerHeight,"onUpdate:value":i[0]||(i[0]=p=>o.$emit("update:active",p)),"onUpdate:expandedKeys":i[1]||(i[1]=p=>o.$emit("update:expandedKeys",p))},null,8,["value","options","inverted","collapsed","collapsed-icon-size","expanded-keys","header-height","footer-height"])]),_:1},8,["width","collapsed","collapsed-width","show-trigger"]),g(d,null,{default:x(()=>[g(u,{class:"pro-admin-header-height flex items-center justify-between px-3"},{default:x(()=>[X(o.$slots,"headerLeft",{},()=>[g(l(qt))],!0),X(o.$slots,"headerRight",{},()=>[g(l(It))],!0)]),_:3}),g(l(Gt),{class:"pro-admin-content-height"},{default:x(()=>[X(o.$slots,"default",{},void 0,!0)]),_:3}),g(h,{class:"pro-admin-footer-height flex items-center justify-center"},{default:x(()=>[g(l(Ht))]),_:1})]),_:3})]),_:3})}}});const Us=K(As,[["__scopeId","data-v-1abfa756"]]),Fs={class:"pro-admin-side-menu overflow-y-auto overflow-x-hidden"},Gs=P({__name:"index",setup(e){const t=ce();return(n,a)=>{const s=Rt;return _(),b("div",Fs,[g(s,J({mode:"vertical"},l(t)),null,16)])}}});const Os=K(Gs,[["__scopeId","data-v-bd821ef9"]]),zs={class:"flex items-center justify-center"},Hs=P({__name:"index",props:{layout:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null,siderWidth:null,collapsed:{type:Boolean},siderCollapsedWidth:null,collapsedIconSize:{default:28},showSiderTrigger:{type:[Boolean,String]},accordion:{type:Boolean},inverted:{type:Boolean},active:null,options:null,expandedKeys:null,rootIndent:null,indent:null},emits:["update:collapsed","update:active","update:expandedKeys"],setup(e){const t=e;ye(o=>({"655570f5":l(n),"65c87fc5":l(s),"0a8d2da7":l(a)}));const n=A(()=>`${t.headerHeight}px`),a=A(()=>`${t.footerHeight}px`),s=A(()=>`calc(100vh - ${t.headerHeight}px - ${t.footerHeight}px)`);return(o,i)=>{const u=jt,h=Et,d=Dt;return _(),R(d,{"has-sider":"",class:"h-screen"},{default:x(()=>[g(l(Oe),{inverted:e.inverted,width:e.siderWidth,collapsed:e.collapsed,"collapsed-width":e.siderCollapsedWidth,"show-trigger":e.showSiderTrigger,onUpdateCollapsed:i[2]||(i[2]=p=>o.$emit("update:collapsed",p))},{default:x(()=>[S("div",zs,[g(l(Ut),{src:e.logo,"header-height":e.headerHeight,"collapsed-width":e.siderCollapsedWidth},null,8,["src","header-height","collapsed-width"]),e.collapsed?D("",!0):(_(),R(l(Ft),{key:0,layout:e.layout,"header-height":e.headerHeight,title:e.title},null,8,["layout","header-height","title"]))]),g(l(Oe),{inverted:e.inverted,width:e.siderWidth,collapsed:e.collapsed,"collapsed-width":e.siderCollapsedWidth},{default:x(()=>[g(Os,{value:e.active,options:e.options,accordion:e.accordion,inverted:e.inverted,collapsed:e.collapsed,"collapsed-width":e.siderCollapsedWidth,"collapsed-icon-size":e.collapsedIconSize,"expanded-keys":e.expandedKeys,"root-indent":e.rootIndent,indent:e.rootIndent,"onUpdate:value":i[0]||(i[0]=p=>o.$emit("update:active",p)),"onUpdate:expandedKeys":i[1]||(i[1]=p=>o.$emit("update:expandedKeys",p))},null,8,["value","options","accordion","inverted","collapsed","collapsed-width","collapsed-icon-size","expanded-keys","root-indent","indent"])]),_:1},8,["inverted","width","collapsed","collapsed-width"])]),_:1},8,["inverted","width","collapsed","collapsed-width","show-trigger"]),g(d,null,{default:x(()=>[g(u,{class:"pro-admin-header-height flex items-center justify-between px-3"},{default:x(()=>[X(o.$slots,"headerLeft",{},()=>[g(l(qt))],!0),X(o.$slots,"headerRight",{},()=>[g(l(It))],!0)]),_:3}),g(l(Gt),{class:"pro-admin-content-height"},{default:x(()=>[X(o.$slots,"default",{},void 0,!0)]),_:3}),g(h,{class:"pro-admin-footer-height flex items-center justify-center"},{default:x(()=>[g(l(Ht))]),_:1})]),_:3})]),_:3})}}});const qs=K(Hs,[["__scopeId","data-v-ffb6b8ca"]]),Is=P({__name:"index",setup(e){const t=Y(),n=ge(),a=A(()=>n.getMenusData),{active:s}=al(),{layout:o}=Wn(t);return(i,u)=>{var h,d;return _(),b(Z,null,[l(o).layout==="mix"?(_(),R(Us,{key:0,collapsed:l(o).collapsed,"onUpdate:collapsed":u[0]||(u[0]=p=>l(o).collapsed=p),accordion:l(o).accordion,layout:l(o).layout,logo:l(o).logo,"logo-size":l(o).logoSize,title:(h=l(t).site)==null?void 0:h.web_name,"header-height":l(o).headerHeight,"footer-height":l(o).footerHeight,"sider-width":l(o).siderWidth,"sider-collapsed-width":l(o).siderCollapsedWidth,"show-sider-trigger":l(o).showSiderTrigger,inverted:l(o).inverted,active:l(s),options:l(a),"root-indent":l(o).rootIndent,indent:l(o).indent},{default:x(()=>[g(dt)]),_:1},8,["collapsed","accordion","layout","logo","logo-size","title","header-height","footer-height","sider-width","sider-collapsed-width","show-sider-trigger","inverted","active","options","root-indent","indent"])):D("",!0),l(o).layout==="side"?(_(),R(qs,{key:1,collapsed:l(o).collapsed,"onUpdate:collapsed":u[1]||(u[1]=p=>l(o).collapsed=p),accordion:l(o).accordion,layout:l(o).layout,logo:l(o).logo,"logo-size":l(o).logoSize,title:(d=l(t).site)==null?void 0:d.web_name,"header-height":l(o).headerHeight,"footer-height":l(o).footerHeight,"sider-width":l(o).siderWidth,"sider-collapsed-width":l(o).siderCollapsedWidth,"show-sider-trigger":l(o).showSiderTrigger,inverted:l(o).inverted,active:l(s),options:l(a),"root-indent":l(o).rootIndent,indent:l(o).indent},{default:x(()=>[g(dt)]),_:1},8,["collapsed","accordion","layout","logo","logo-size","title","header-height","footer-height","sider-width","sider-collapsed-width","show-sider-trigger","inverted","active","options","root-indent","indent"])):D("",!0)],64)}}}),ht={path:"/",name:"default-router",component:Is,redirect:void 0,children:[]},Ns=P({__name:"index",setup(e){const t=ne(),n=Ee("GetTable"),a=t.meta.method,s=t.query??{};return(o,i)=>(_(),R(Lt,{api:l(n),method:l(a),"ajax-params":l(s)},null,8,["api","method","ajax-params"]))}}),Ms={class:"h-100% p-4"},Vs={class:"h-100% bg-white flex flex-col"},Ws={key:0,class:"px-5 py-4"},Ls=P({__name:"index",setup(e){const t=ne(),n=w(),a=Ee(),s=t.meta.method,o={...t.query};o!=null&&o.isBack&&(o==null||delete o.isBack);const i=w({...o}),u=w({submitBtn:{},resetBtn:{}}),h=r=>{var f;const c=(f=r==null?void 0:r.response)==null?void 0:f.extraConfig;u.value=c},d=()=>{n.value.hanldSubmit()},p=()=>{n.value.hanldReset()};return(r,c)=>{var m;const f=he;return _(),b("div",Ms,[S("div",Vs,[(m=l(t).query)!=null&&m.isBack?(_(),b("div",Ws,[g(f,{type:"warning",onClick:l(We)},{default:x(()=>[U(" 返回 ")]),_:1},8,["onClick"])])):D("",!0),g(Mt,{ref_key:"formRef",ref:n,class:"flex-1 p-5 overflow-y-auto overflow-x-hidden",api:l(a),method:l(s),"ajax-params":l(i),"onUpdate:init":h},null,8,["api","method","ajax-params"]),g(l(me),{"extra-config":l(u),"onUpdate:submit":d,"onUpdate:rest":p},null,8,["extra-config"])])])}}}),Js={class:"h-100% p-4"},Zs=P({__name:"index",setup(e){const n=ne().meta.ajaxParams;return(a,s)=>(_(),b("div",Js,[g(we,{file:l(n)},null,8,["file"])]))}}),Ys=Object.freeze(Object.defineProperty({__proto__:null,formIndex:Ls,remoteIndex:Zs,tableIndex:Ns},Symbol.toStringTag,{value:"Module"})),Ae={routeView:()=>fe(()=>import("./route-view.ed45f885.js"),["./route-view.ed45f885.js",".pnpm.ba70e7a7.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url),blankView:()=>fe(()=>import("./blank-view.12b8868d.js"),["./blank-view.12b8868d.js",".pnpm.ba70e7a7.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)},Ks=e=>{if(!e)return Ae.blankView;if(e in Ae)return Ae[e];const t=ra(e??"");return Ys[t]},Qs=e=>{const t=[];for(const n of e)if(n.path){const a={path:`/${n.path}`,name:n.path.replace("/","_"),component:Ks(n.component),redirect:n==null?void 0:n.redirect,meta:{title:n.title,path:n.path,pid:n.pid,icon:n.icon,moduleName:n.module,method:n.method,ajaxParams:n.auth_params},children:[]};(!a.children||a.children.length<1)&&delete a.children,t.push(a)}return t},Xs=async()=>{const{active:e,list:t}=await xa();if(t.length>0){ht.redirect=e;const n=Qs(t);return{menus:t,routes:{...ht,children:n}}}},Jt=(e,t)=>{var s;const n=[];let a=[];t?a=e.filter(o=>o.pid===t):a=e.filter(o=>!o.pid);for(const o of a){const i={key:String(o.id),menuTitle:o.title,menuIcon:o.icon,ajaxParams:o.auth_params,path:o.path,show:o.show==="1",pid:o.pid,target:o.target??"_blank",children:Jt(e,o.id)},u=(s=i==null?void 0:i.children)==null?void 0:s.filter(h=>h==null?void 0:h.show);u!=null&&u.length&&i.pid!==0&&(i.type="group"),o!=null&&o.title&&(i.label=()=>V(Ps,{MenuItem:i})),o!=null&&o.icon&&(i.icon=()=>V(E,{icon:o==null?void 0:o.icon})),(!i.children||i.children.length<1)&&delete i.children,n.push(i)}return n},ge=yt("user",()=>{const e=xe(),t=w(),n=w(),a=w(),s=A(()=>Jt(a.value??[])),o=p=>{e.value=p},i=async p=>{const{notification:r}=j(),{msg:c,data:f}=await _a(p);f!=null&&f.token?(o(f.token),r==null||r.success({title:c||"登录成功",duration:1500})):r==null||r.success({title:"系统错误",content:"登录失败",duration:1500})},u=p=>{t.value=p};return{token:e,setToken:o,login:i,userInfo:t,setUserInfo:u,getUserInfo:async()=>{const{data:p}=await ya();p&&u(p)},routerRecords:n,generateDynameicRoutes:async()=>{const p=await Xs();return p!=null&&p.routes&&(a.value=p.menus,n.value=p.routes.children),p==null?void 0:p.routes},menuData:a,getMenusData:s}}),el=()=>{const e=ne(),t=ge(),n=xt({active:""}),a=o=>{var u;const i=(u=t.menuData)==null?void 0:u.find(h=>`/${h.path}`===o);return String(i==null?void 0:i.id)},s=o=>{n.active=a(o)};return Ne(()=>e.fullPath,()=>{s(e.path)}),{...Jn(n),updateActive:s}},[tl,nl]=Ln(el),al=()=>nl()??{active:w(""),updateActive:()=>{}},ol=P({__name:"App",setup(e){return tl(),(t,n)=>{const a=Zn,s=ve("router-view"),o=ta,i=_t;return _(),R(i,null,{default:x(()=>[g(a),g(o,null,{default:x(()=>[g(s)]),_:1})]),_:1})}}}),mt=(e,t)=>(e.forEach(n=>{t.push(n.path)}),t),gt=e=>{for(const t of e){const n=t.remote,a={path:t.path,name:n.replace("/","_"),component:V(we,{file:n}),props:{file:n},meta:{title:t.title,path:t.path,pid:0,moduleName:"admin",method:"GET",ajaxParams:n}};H.addRoute(a)}},Zt="/login",ie=w(["/error","/404","/403","/500","/401"]),Ue=w([...ie.value,Zt]);let Se=!1;H.beforeEach(async(e,t,n)=>{var d,p,r,c,f;const a=xe(),s=Ze(),o=Y(),i=ge();(d=j().loadingBar)==null||d.start();const h=(p=e.query)==null?void 0:p.token;if(h){i.setToken(h),n({path:"/"});return}if(a.value){if(!i.userInfo&&!ie.value.includes(e.path))try{const m=await o.getSite();if(m!=null&&m.login_link&&o.setLoginLink(m==null?void 0:m.login_link),m!=null&&m.remote_url&&!Se){const v=m==null?void 0:m.remote_url;ie.value=mt(v,ie.value),gt(v),Se=!0}await i.getUserInfo();const y=await i.generateDynameicRoutes();y&&H.addRoute(y),n({...e,replace:!0});return}catch(m){if(m instanceof Yn&&((f=m==null?void 0:m.response)==null?void 0:f.status)===401)return;n({path:"/error",query:{redirect:e.path}});return}}else{if((r=e.query)!=null&&r.appid&&(s.value=(c=e.query)==null?void 0:c.appid),!Se){const m=await o.getSite();if(m!=null&&m.login_link&&o.setLoginLink(m==null?void 0:m.login_link),m!=null&&m.remote_url){const y=m==null?void 0:m.remote_url;ie.value=mt(y,ie.value),Ue.value=[...Ue.value,...ie.value],gt(y),Se=!0,n({...e,replace:!0});return}}if(!Ue.value.includes(e.path)){n({path:Zt,query:{redirect:e.path}});return}}n()});H.afterEach(e=>{var s,o,i,u,h;(s=j().loadingBar)==null||s.finish();const n=Y(),a=(o=e.meta)==null?void 0:o.title;a?document.title=`${a} - ${(i=n.site)==null?void 0:i.web_name} v${zt}`:(u=n.layout)!=null&&u.title&&(document.title=(h=n.layout)==null?void 0:h.title)});const sl=e=>{e.use(pe),e.config.globalProperties.$XModal=pe.modal,e.config.globalProperties.$XPrint=pe.print,e.config.globalProperties.$XSaveFile=pe.saveFile,e.config.globalProperties.$XReadFile=pe.readFile},ll=Kn(),Yt=document.createElement("meta");Yt.name="naive-ui-style";document.head.appendChild(Yt);const Ce=Qn(ol);sl(Ce);Ce.use(H);Ce.use(ll);Ce.mount("#app");Qe.vue=Ce;export{K as _,ge as a,il as b,dt as c,zt as s,Y as u};
