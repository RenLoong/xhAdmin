import{m as ln,d as $,u as rn,a as cn,b as un,c as dn,r as oe,e as y,z as pn,f as fn,o as g,g as S,w as x,h as v,i as l,_ as hn,j as mn,N as gn,k as _n,l as bt,n as vn,p as yn,q as Pt,s as xn,t as Ze,v as Ye,x as wn,y as St,A as $t,B as se,C as Ke,D as Ce,E as ke,F as O,G as b,H as ae,I as Ae,J as U,K as Cn,L as j,M as de,O as ee,P as kn,Q as bn,R as F,S as R,T as Ne,U as Rt,V as Pn,W as Qe,X as Sn,Y as Et,Z as xe,$ as re,a0 as Xe,a1 as _e,a2 as jt,a3 as Me,a4 as L,a5 as ne,a6 as Dt,a7 as Bt,a8 as Y,a9 as V,aa as W,ab as Tt,ac as $n,ad as et,ae as Rn,af as En,ag as jn,ah as Dn,ai as Bn,aj as ht,ak as Tn,al as An,am as Un,an as Gn,ao as Fn,ap as On,aq as mt,ar as zn,as as Hn,at as qn,au as me,av as gt,aw as In,ax as Nn,ay as Mn,az as At,aA as Ut,aB as Gt,aC as Vn,aD as Wn,aE as Ln,aF as Jn,aG as Zn,aH as Yn,aI as Kn,aJ as Qn}from"./.pnpm.83e8b4a9.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const Ft={},D=()=>Ft,Xn=t=>{ln(Ft,t)},eo=$({__name:"naive-provider",setup(t){const e=rn(),n=cn(),o=un(),s=dn();return Xn({notification:e,message:n,dialog:o,loadingBar:s}),(a,r)=>oe(a.$slots,"default")}}),to=$({__name:"index",setup(t){const e=y(pn),n=y(fn);return(o,s)=>{const a=hn,r=mn,u=gn,m=_n,f=bt;return g(),S(f,{locale:l(e),"date-locale":l(n)},{default:x(()=>[v(m,null,{default:x(()=>[v(u,null,{default:x(()=>[v(r,null,{default:x(()=>[v(a,null,{default:x(()=>[v(eo,null,{default:x(()=>[oe(o.$slots,"default")]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["locale","date-locale"])}}}),no={title:"",layout:"mix",headerHeight:50,footerHeight:35,accordion:!0,collapsed:!1,siderWidth:230,siderCollapsedWidth:80,showSiderTrigger:"arrow-circle",inverted:!0,logoSize:35,rootIndent:18,indent:32},oo="modulepreload",ao=function(t,e){return new URL(t,e).href},_t={},ge=function(e,n,o){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=ao(a,o),a in _t)return;_t[a]=!0;const r=a.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!o)for(let d=s.length-1;d>=0;d--){const c=s[d];if(c.href===a&&(!r||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${u}`))return;const f=document.createElement("link");if(f.rel=r?"stylesheet":oo,r||(f.as="script",f.crossOrigin=""),f.href=a,document.head.appendChild(f),r)return new Promise((d,c)=>{f.addEventListener("load",d),f.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e())},so=[{path:"/login",name:"Login",component:()=>ge(()=>import("./index.37b12ae3.js"),["./index.37b12ae3.js",".pnpm.83e8b4a9.js","..\\css\\.pnpm.c37a7d79.css","..\\css\\index.e635b4dc.css"],import.meta.url),meta:{title:"用户登录"}},{path:"/redirect/:path(.*)",name:"redirect",component:()=>ge(()=>import("./index.5d15d188.js"),["./index.5d15d188.js",".pnpm.83e8b4a9.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)},{path:"/error",name:"error",meta:{title:"找不到页面"},component:()=>ge(()=>import("./error.17c054fe.js"),["./error.17c054fe.js",".pnpm.83e8b4a9.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)},{path:"/:pathMatch(.*)",component:()=>ge(()=>import("./error.17c054fe.js"),["./error.17c054fe.js",".pnpm.83e8b4a9.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)}],N=vn({routes:[...so],history:yn("/")}),Ue=()=>{var n,o;const t=N.currentRoute.value;let e="";return(n=t==null?void 0:t.meta)!=null&&n.moduleName?e=(o=t==null?void 0:t.meta)==null?void 0:o.moduleName:(e=location.pathname,e.substring(e.length-1)==="/"&&(e=e.substring(1,e.length-1))),e},Ge=(t="",e=!1)=>{var a;const n=N.currentRoute.value,o=((a=n==null?void 0:n.meta)==null?void 0:a.moduleName)??"",s=y(n.path);if(e){const r=s.value.indexOf("/",1);s.value=s.value.substring(0,r),s.value=`${s.value}/`}return`${o}${s.value}${t}`},Ot=t=>{let e;try{e=new URL(t)}catch{return!1}return e.protocol==="http:"||e.protocol==="https:"},lo=t=>{Ot(t)?location.href=t:N.push(t)};function He(t=6){let e="";for(let n=0;n<t;n++)e+=Math.floor(Math.random()*10);return e}const K=(t,e)=>{for(const n in e)if(e[n]===t)return!0;return!1},tt=()=>{var n;const t=N.currentRoute.value,{notification:e}=D();(n=t.query)!=null&&n.isBack?N.back():e==null||e.error({title:"返回上次页面错误",duration:2e3})},ro=t=>t.replace(/\/(\w)/g,(e,n)=>n.toUpperCase()),pl=(t,e="Enter")=>{const n=o=>{o.key===e&&(t(),o.preventDefault())};Pt(()=>document.addEventListener("keydown",n)),xn(()=>document.removeEventListener("keydown",n))},io=t=>{let e;const n={},o=t.slice(t.indexOf("?")+1).split("&");for(let s=0;s<o.length;s++)e=o[s].split("="),n[e[0]]=e[1];return n},nt="Authorization",ot="Appid",be=Ze(()=>{const t=Ue();return Ye(`${t}_${nt}`,null)}),at=Ze(()=>{const t=Ue();return Ye(`${t}_${ot}`,null)}),zt="/",J=wn.create({baseURL:zt,timeout:6e4}),co=async t=>{const e=be();e.value&&t.headers.set(nt,e.value);const n=at();return n.value&&t.headers.set(ot,n.value),t},uo=t=>{var s;const{notification:e}=D(),n=be(),o=t.data;return t.headers["content-type"]==="application/json"?K(o==null?void 0:o.code,[404,500])?(e==null||e.error({title:"温馨提示",content:(o==null?void 0:o.msg)||"网络错误",duration:1500}),Promise.reject(t.data)):(o==null?void 0:o.code)===200?o:((o==null?void 0:o.code)===12e3&&(n.value="",N.replace({path:"/login",query:{redirect:(s=N.currentRoute.value)==null?void 0:s.fullPath}}).then(()=>{})),Promise.reject(t.data)):t.headers["content-type"]==="application/octet-stream"?Promise.resolve(o):Promise.resolve(t)},po=t=>{const{notification:e}=D();if(t.response){const{data:n,status:o,statusText:s}=t.response;o===401?e==null||e.error({title:"温馨提示",content:(n==null?void 0:n.msg)||s,duration:1500}):o===403?e==null||e.error({title:"资源请求错误",content:(n==null?void 0:n.msg)||s,duration:1500}):o===500?e==null||e.error({title:"服务器错误",content:(n==null?void 0:n.msg)||s,duration:1500}):e==null||e.error({title:"系统错误",content:(n==null?void 0:n.msg)||s,duration:1500})}return Promise.reject(t)};J.interceptors.request.use(co);J.interceptors.response.use(uo,po);const pe=(t,e,n)=>J.request({url:t,params:e,method:"GET",...n}),st=(t,e,n)=>J.request({url:t,data:e,method:"POST",...n}),lt=(t,e,n)=>J.request({url:t,data:e,method:"PUT",...n}),Fe=(t,e,n)=>J.request({url:t,data:e,method:"DELETE",...n}),fo=Object.freeze(Object.defineProperty({__proto__:null,baseURL:zt,default:J,useDelete:Fe,useGet:pe,usePost:st,usePut:lt},Symbol.toStringTag,{value:"Module"})),ho=Ue(),mo=`${ho}/Publics/site`,go=()=>pe(mo),_o=Ze(()=>{const t=Ue();return Ye(`${t}-layout-theme`,no)}),Q=St("app",()=>{const t=_o(),e=$t(l(t)),n=y(),o=y(),s=y(),a=f=>{s.value=f},r=f=>{o.value=f},u=f=>{e.title=f.web_title,e.web_name=f.web_name;const d=new URL("data:image/png;base64,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",self.location).href;e.logo=typeof f.web_logo=="string"?f.web_logo:d,n.value=f};return{layout:e,getSite:async()=>{const{data:f}=await go();return u(f),f},site:n,dynameicRemoteRoute:o,setDynameicRemoteRoute:r,loginLink:s,setLoginLink:a}}),vo=t=>{var o;const n=(o=Q().site)==null?void 0:o.public_api.login;return st(n,t)},yo=()=>{var n;const e=(n=Q().site)==null?void 0:n.public_api.loginout;return Fe(e)},xo=()=>{var n;const e=(n=Q().site)==null?void 0:n.public_api.user;return pe(e)},wo=async()=>{var o;const e=(o=Q().site)==null?void 0:o.public_api.menus,{data:n}=await pe(e);return n},vt=$({__name:"route-view",setup(t){const e=se(),n=()=>`${new Date().getTime()}${Math.random()}`,o=y("");return Ke(()=>e.fullPath,()=>{o.value=n()}),(s,a)=>{const r=Ce("router-view");return g(),S(r,{key:l(o)})}}}),Co=$({__name:"logo",props:{collapsedWidth:null,headerHeight:null,size:{default:30},src:null,inverted:{type:Boolean}},setup(t){const e=t;ke(s=>({"7f669fe2":l(o),"93b26860":l(n)}));const n=O(()=>`${e.headerHeight}px`),o=O(()=>`${e.collapsedWidth}px`);return(s,a)=>{const r=Ae;return g(),b("div",{class:ae(["pro-admin-layout-header flex items-center justify-center",{"bg-dark":t.inverted}])},[v(r,{src:t.src,width:t.size,height:t.size,"preview-disabled":""},null,8,["src","width","height"])],2)}}});const te=(t,e)=>{const n=t.__vccOpts||t;for(const[o,s]of e)n[o]=s;return n},Ht=te(Co,[["__scopeId","data-v-36082ee4"]]),ko=$({__name:"title",props:{headerHeight:null,layout:null,title:null,size:{default:18},inverted:{type:Boolean}},setup(t){const e=t;ke(s=>({db97614c:l(n)}));const n=O(()=>`${e.headerHeight}px`),o=O(()=>({fontSize:`${e.size}px`}));return(s,a)=>t.title?(g(),b("div",{key:0,class:ae(["pro-admin-tabs-layout-header flex items-center flex-1 truncate select-none",{"justify-center":t.inverted}]),style:Cn(l(o))},U(t.title),7)):j("",!0)}});const qt=te(ko,[["__scopeId","data-v-40893ea5"]]),It=$({__name:"layout-content",setup(t){const e=de();return(n,o)=>{const s=kn;return g(),S(s,ee(l(e),{style:{"--n-color":"var(--pro-admin-layout-content-bg)"}}),{default:x(()=>[oe(n.$slots,"default")]),_:3},16)}}}),Ve=$({__name:"layout-sider",setup(t){const e=de();return(n,o)=>{const s=bn;return g(),S(s,ee({"collapse-mode":"width"},l(e)),{default:x(()=>[oe(n.$slots,"default")]),_:3},16)}}}),bo="kfadmin",Po="1.0.0",So="module",$o={dev:"vite",build:"vue-tsc && vite build",preview:"vite preview",prepare:"husky install",lint:"eslint --ext .ts,.tsx,.vue,.js,.jsx src"},Ro={"@form-create/naive-ui":"^3.1.19","@vueuse/core":"^9.13.0",axios:"^1.3.5",echarts:"^5.4.2",exceljs:"^4.3.0","highlight.js":"^11.7.0",jspdf:"^2.5.1",pinia:"^2.0.34",vue:"^3.2.47","vue-router":"^4.1.6","vxe-table":"4.3.12-beta.2","vxe-table-plugin-export-pdf":"^3.0.4","vxe-table-plugin-export-xlsx":"^3.0.4","xe-utils":"^3.5.7",xlsx:"^0.18.5"},Eo={"@mistjs/eslint-config-vue":"^0.0.5","@types/less":"^3.0.3","@types/lodash-es":"^4.17.7","@types/node":"^18.15.11","@unocss/reset":"^0.51.4","@vicons/antd":"^0.12.0","@vitejs/plugin-vue":"^4.1.0","@vue/runtime-core":"^3.2.47",eslint:"^8.38.0",husky:"^8.0.3",less:"^4.1.3","less-loader":"^11.1.0","lint-staged":"^13.2.1","lodash-es":"^4.17.21","naive-ui":"^2.34.3","node-sass":"^8.0.0",sass:"^1.62.0","sass-loader":"^13.2.2",typescript:"^4.9.3",unocss:"^0.51.4","unplugin-auto-import":"^0.15.2","unplugin-vue-components":"^0.24.1",vite:"^4.2.0","vite-plugin-compression":"^0.5.1","vue-tsc":"^1.2.0"},Nt={name:bo,private:!0,version:Po,type:So,scripts:$o,"lint-staged":{"*.{js,tsx,vue,ts,jsx}":"eslint --fix"},dependencies:Ro,devDependencies:Eo},jo=Nt.name,Mt=Nt.version,Do="贵州猿创科技有限公司",Bo="http://www.kfadmin.net",To=["href"],Vt=$({__name:"copyright",setup(t){return(e,n)=>(g(),b("div",null,[F(" Copyright © 2021 "+U(l(Do))+" All Rights Reserved ",1),R("a",{href:l(Bo),target:"_blank",class:"hover:text-[#18a058] pl-10px"},U(l(jo))+" v"+U(l(Mt)),9,To)]))}}),rt={vue:null},T=$({__name:"index",props:{icon:null,depth:null,size:{default:18},color:null},setup(t){return(e,n)=>{const o=Rt;return g(),S(o,{component:l(Ne)[t.icon],size:t.size,depth:t.depth,color:t.color},null,8,["component","size","depth","color"])}}}),Ao=(t,e)=>{const n=y((t==null?void 0:t.file)??""),o=y(),s=y(""),a=y(""),r=y(He()),u=()=>{if(!n.value){s.value="config";return}s.value="loading";const _=`${n.value}.vue`;pe(_).then(C=>{a.value=C,s.value="success",e("update:init",C)}).catch(C=>{console.error(C),s.value="fail",e("update:error",C)})};u();const m=(_,C="el-icon-warning",E="font-size:26px;color:red;")=>({template:`
        <div class="remote-loading">
            <div class="${C}" style="${E}"></div>
            <div class="mt-5px">${_}</div>
        </div>
        `}),f=(_,C)=>{Pn.render(_).then(E=>{const P=document.createElement("style");if(P.setAttribute("type","text/css"),P.setAttribute("id",`css${C}`),P.styleSheet)P.styleSheet.cssText=E.css;else{const q=document.createTextNode(E.css);P.appendChild(q)}const B=document.getElementsByTagName("head");B.length?B[0].appendChild(P):document.documentElement.appendChild(P)})},d=_=>({templates:_.match(/<template>([\s\S]*)<\/template>/)[1],sctipts:_.match(/<script.*>([\s\S]*)<\/script>/)[1],styles:_.match(/<style.*>([\s\S]*)<\/style>/)[1]}),c=()=>{const _=rt.vue,{notification:C,message:E,dialog:P,loadingBar:B}=D(),q=Qe(),A=se(),M=ye(),X=Q();_.config.globalProperties.$userApp=M,_.config.globalProperties.$siteApp=X,_.config.globalProperties.$routeApp=A,_.config.globalProperties.$routerApp=q,_.config.globalProperties.$http=fo,_.config.globalProperties.$echarts=Sn,_.component("AppIcons",T),Et.install(_),_.config.globalProperties.$useNotification=C,_.config.globalProperties.$useMessage=E,_.config.globalProperties.$useDialog=P,_.config.globalProperties.$useLoadingBar=B},i=(_,C,E)=>{const P=d(C),B=P.sctipts.indexOf("{"),q=P.sctipts.lastIndexOf("}"),A=P.sctipts.slice(B,q+1),M=new Function(`return ${A}`)();if(!M)return m("远程组件代码格式解析失败");if(M.template=P==null?void 0:P.templates,_.setAttribute("class",`remote css${E}`),!document.querySelector(`style[id=css${E}]`)){const X=`
            .css${E}{
                ${P.styles}
            }
        `;f(X,E)}return c(),M},h=O(()=>s.value==="config"?m("请先配置远程文件"):s.value==="fail"?m("远程组件加载失败"):a.value?i(o.value,a.value,r.value):m("正在加载中..."));return{fileUrl:n,remoteRef:o,loadingStatus:s,componentFile:a,cssId:r,currentView:h,hanldWin:_=>{n.value=_,r.value=He(),u()},hanldReload:()=>{r.value=He(),u()},hanldClose:()=>{t!=null&&t.modal&&e("update:closeWin")}}},Uo=$({__name:"index",emits:["update:init","update:success","update:error","update:closeWin"],setup(t,{emit:e}){const n=de(),{remoteRef:o,loadingStatus:s,currentView:a,hanldClose:r,hanldReload:u,hanldWin:m}=Ao(n,e);return(f,d)=>(g(),b("div",{ref_key:"remoteRef",ref:o,class:"h-100%"},[l(s)==="success"?(g(),S(xe(l(a)),ee({key:0},l(n),{"onUpdate:openWin":l(m),"onUpdate:reloadWin":l(u),"onUpdate:closeWin":l(r)}),null,16,["onUpdate:openWin","onUpdate:reloadWin","onUpdate:closeWin"])):j("",!0)],512))}});const fe=te(Uo,[["__scopeId","data-v-6270af91"]]),Wt=$({__name:"header-left",setup(t){const n=Q().site,o=n==null?void 0:n.public_api;return(s,a)=>{var r,u;return g(),b("div",null,[(r=l(o))!=null&&r.header_left_file?(g(),S(fe,{key:0,file:(u=l(o))==null?void 0:u.header_left_file},null,8,["file"])):j("",!0)])}}}),Lt=$({__name:"header-right",setup(t){const n=Q().site,o=n==null?void 0:n.public_api.header_right_file;return(s,a)=>{const r=re;return g(),S(r,{size:10,class:"h-100%"},{default:x(()=>[l(o)?(g(),S(fe,{key:0,file:l(o)??""},null,8,["file"])):j("",!0),v(l(ys))]),_:1})}}});function Go(){const t=rt.vue;Et.install(t)}const Fo={form:{labelPlacement:"top"},row:{gutter:30,alignItems:"center"},global:{"*":{}},submitBtn:!1,resetBtn:!1},Oo=t=>t.map(e=>(e.handle=n=>{if((e==null?void 0:e.where)==="==")return n===e.value;if((e==null?void 0:e.where)==="!=")return n!==e.value;if((e==null?void 0:e.where)==="in"){const o=e.value;return o instanceof Array&&o instanceof Object?K(n,e.value):(console.error("联动组件的IN条件值必须是数组或对象"),!1)}},e)),zo=t=>t.map(e=>(e!=null&&e.control&&(e.control=Oo(e.control)),e)),Ho=(t,e)=>{const n=y({}),o=y({api:"",method:"POST"}),s=y(""),a=y({}),r=y([]),u=y(Fo),m=Xe(),f=()=>{var k,_;const{notification:i}=D(),h=N.currentRoute.value,p={...h==null?void 0:h.query};p!=null&&p.isBack&&(p==null||delete p.isBack);const w={method:((k=o.value)==null?void 0:k.method)??"GET",params:{...t.ajaxParams},data:{}};o.value.method==="GET"?w.params={...a.value}:w.data={...a.value},e("update:submit",{api:o.value.api,queryParams:w}),J(((_=o.value)==null?void 0:_.api)??"",w).then(C=>{var E;(E=h.query)!=null&&E.isBack&&!t.isModal&&!s.value?tt():s.value&&lo(s.value),e("update:success",C),i==null||i.success({title:(C==null?void 0:C.msg)??"操作失败",duration:1500})}).catch(C=>{e("update:error",C)})},d=()=>{n.value.resetFields(),e("update:rest")},c=y({method:t.method,params:{},data:{}});return t.method==="GET"?c.value.params={...t.ajaxParams}:c.value.data={...t.ajaxParams},J((t==null?void 0:t.api)??"",c.value).then(i=>{const{data:h}=i,{notification:p}=D();if(!(h!=null&&h.http))return p==null||p.error({title:"提交接口获取失败",duration:2e3}),Promise.reject(new Error("提交接口获取失败"));if(!(h!=null&&h.formRule))return p==null||p.error({title:"表单规则获取失败",duration:2e3}),Promise.reject(new Error("表单规则获取失败"));o.value=h.http,r.value=zo(h.formRule),u.value={...u.value,...h.config},s.value=(h==null?void 0:h.redirect)??"",e("update:init",{response:h,exposed:m.exposed})}),{fApi:n,submitAPI:o,redirectUrl:s,formData:a,formRule:r,formConfig:u,hanldSubmit:f,hanldReset:d}},qo={};function Io(t,e){return g(),b("div",null," 高德地图 ")}const No=te(qo,[["render",Io]]),Mo={};function Vo(t,e){return g(),b("div",null," 百度地图 ")}const Wo=te(Mo,[["render",Vo]]),ve=$({__name:"buttons",props:{extraConfig:null},emits:["update:submit","update:rest"],setup(t,{expose:e,emit:n}){const o=y(!1),s=u=>{o.value=u},a=()=>{s(!0),n("update:submit")},r=()=>{s(!0),n("update:rest")};return e({setDisabled:s}),(u,m)=>{var c;const f=_e,d=re;return(c=t.extraConfig.submitBtn)!=null&&c.show?(g(),S(d,{key:0,justify:"center",size:30,class:"py-3 b-t-1px"},{default:x(()=>{var i,h,p,w;return[(i=t.extraConfig.submitBtn)!=null&&i.show?(g(),S(f,ee({key:0},((h=t.extraConfig)==null?void 0:h.submitBtn)??{},{disabled:l(o),onClick:a}),{default:x(()=>{var k;return[F(U(((k=t.extraConfig.submitBtn)==null?void 0:k.content)??"提交"),1)]}),_:1},16,["disabled"])):j("",!0),(p=t.extraConfig.resetBtn)!=null&&p.show?(g(),S(f,ee({key:1},((w=t.extraConfig)==null?void 0:w.resetBtn)??{},{disabled:l(o),onClick:r}),{default:x(()=>{var k;return[F(U(((k=t.extraConfig.resetBtn)==null?void 0:k.content)??"重置"),1)]}),_:1},16,["disabled"])):j("",!0)]}),_:1})):j("",!0)}}}),Lo={class:"h-450px overflow-y-auto p-5"},Jo=R("div",{class:"text-blueGray pt-2 select-none"}," 温馨提示：单击图标为选择，双击图标为复制 ",-1),Zo=["title","alt","onClick","onDblclick"],Yo=$({__name:"icons-mgr",emits:["update:init","update:copy","update:click","update:confirm"],setup(t,{expose:e,emit:n}){const{notification:o}=D(),s=Xe(),a=y(Object.keys(Ne)),r=y(""),u=y(""),m=c=>{if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(c).then(i=>{});else{const i=document.createElement("input");i.value=c,document.body.appendChild(i),i.select(),document.execCommand("Copy"),i.remove()}n("update:copy",c),o==null||o.success({title:"复制成功",duration:1500})},f=c=>{r.value=c===r.value?"":c,n("update:click",r.value)},d=()=>(n("update:confirm",r.value??""),r.value);return jt(()=>{n("update:init",{exposed:s.exposed})}),e({hanldConfirm:d}),(c,i)=>{const h=Dt,p=Bt,w=Rt,k=re;return g(),b("div",Lo,[v(p,null,{default:x(()=>[v(h,{modelValue:l(u),"onUpdate:modelValue":i[0]||(i[0]=_=>Me(u)?u.value=_:null),placeholder:"可输入搜索图标名称"},null,8,["modelValue"])]),_:1}),Jo,v(k,{justify:"space-around",class:"pt-5",size:22},{default:x(()=>[(g(!0),b(L,null,ne(l(a).filter(_=>_.includes(l(u))),_=>(g(),b("div",{key:_,class:ae([{"bg-slate":_===l(r)},"hover:bg-slate px-2 py-1 border-sm cursor-pointer"]),title:_,alt:_,onClick:C=>f(_),onDblclick:C=>m(_)},[v(w,{component:l(Ne)[_],size:26,color:"#555"},null,8,["component"])],42,Zo))),128))]),_:1})])}}}),Ko={class:"w-100%"},Qo=$({__name:"index",props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:e}){const{dialog:n,notification:o}=D(),s=y(),a=y(),r=y({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"关闭",show:!0}}),u=()=>{e("update:modelValue","")},m=()=>{s.value=n==null?void 0:n.create({class:"pro-admin-dialog",title:"图标管理器",maskClosable:!1,showIcon:!1,style:{width:"45%"},content:()=>Y(Yo,{"onUpdate:init":f=>{a.value=f==null?void 0:f.exposed}}),action:()=>Y(ve,{extraConfig:r.value,"onUpdate:submit":()=>{var d,c;const f=(d=a.value)==null?void 0:d.hanldConfirm();f?(e("update:modelValue",f),(c=s.value)==null||c.destroy()):o==null||o.error({title:"请选择图标",duration:1500})},"onUpdate:rest":()=>{var f;(f=s.value)==null||f.destroy()}})})};return(f,d)=>{const c=Dt,i=_e,h=Bt;return g(),b("div",Ko,[v(h,null,{default:x(()=>[v(c,{value:t.modelValue,placeholder:"请选择图标",disabled:""},null,8,["value"]),v(i,{type:"warning",onClick:u},{default:x(()=>[F(" 重置图标 ")]),_:1}),v(i,{type:"success",onClick:m},{default:x(()=>[F(" 选择图标 ")]),_:1})]),_:1})])}}}),Xo={};function ea(t,e){return g(),b("div",null," 腾讯地图 ")}const ta=te(Xo,[["render",ea]]),na=$({__name:"index",setup(t){const e=de();return(n,o)=>(g(),S(l(fe),V(W(l(e))),null,16))}}),H=(t,e)=>{const n=new Event(t);e&&(n.dataFul=e),window.dispatchEvent(n)},Jt=(t,e)=>new Promise(n=>{const{dialog:o}=D(),{notification:s}=D();o==null||o.warning({title:"温馨提示",content:"是否确认删除该数据？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Fe(t,{id:e}).then(async r=>{n(r),s==null||s.success({title:(r==null?void 0:r.msg)??"操作成功",duration:1500})})}})}),We=(t,e,n,o)=>new Promise(s=>{const{dialog:a}=D(),r=y(),u=y({hanldSubmit:()=>{},hanldReset:()=>{}}),m=y({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"取消",show:!0}}),f={title:t,class:"pro-admin-dialog",style:{width:"45%"},showIcon:!1,maskClosable:!1,content:()=>Y(ct,{api:e,method:n,isModal:!0,ajaxParams:o??{},"onUpdate:init":d=>{var c,i;u.value.hanldSubmit=(c=d==null?void 0:d.exposed)==null?void 0:c.hanldSubmit,u.value.hanldReset=(i=d==null?void 0:d.exposed)==null?void 0:i.hanldReset},"onUpdate:success":d=>{var c;s(d),(c=r.value)==null||c.destroy()}}),action:()=>Y(ve,{extraConfig:m.value,"onUpdate:submit":()=>{u.value.hanldSubmit()},"onUpdate:rest":()=>{var d;(d=r.value)==null||d.destroy()}})};r.value=a==null?void 0:a.create(f)}),oa=()=>{const t=Q();return{getCategory:async()=>{var f;const u=((f=Q().site)==null?void 0:f.uploadify_cate.index)??"",{data:m}=await pe(u);return m},hanldClickCate:async(r,u)=>{r!==u&&(H("uploadify:cateActive",{active:u}),H("uploadify:files",{cid:u}))},hanldAddCate:()=>{var u;const r=((u=t.site)==null?void 0:u.uploadify_cate.add)??"";We("添加分类",r,"GET",{}).then(async()=>{H("uploadify:category"),H("uploadify:files")})},hanldEditCate:r=>{var m;const u=((m=t.site)==null?void 0:m.uploadify_cate.edit)??"";We("添加分类",u,"GET",{id:r}).then(async()=>{H("uploadify:category"),H("uploadify:files")})},hanldDelCate:r=>{var m;const u=((m=t.site)==null?void 0:m.uploadify_cate.del)??"";Jt(u,r).then(async()=>{H("uploadify:category"),H("uploadify:files")})}}},aa=()=>{const t=Q(),{notification:e,dialog:n}=D();return{getUploadifyList:async c=>{var p;const i=((p=t.site)==null?void 0:p.uploadify_api.index)??"",{data:h}=await pe(i,c);return h},hanldEditFile:c=>{var h;const i=((h=t.site)==null?void 0:h.uploadify_api.edit)??"";We("修改附件",i,"GET",{id:c}).then(async()=>{H("uploadify:files")})},hanldDelFile:c=>{var h;const i=((h=t.site)==null?void 0:h.uploadify_api.del)??"";Jt(i,c).then(async()=>{H("uploadify:files")})},hanldDelsFile:c=>{if(!(c!=null&&c.length)){e==null||e.error({title:"请勾选需要删除的附件",duration:1500});return}n==null||n.warning({title:"温馨提示",content:"是否确认删除选中的数据？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{var h;const i=((h=t.site)==null?void 0:h.uploadify_api.del)??"";c.forEach(p=>{Fe(i,{id:p}).then(k=>{H("uploadify:files"),e==null||e.success({title:(k==null?void 0:k.msg)??"操作完成",duration:1500})})}),H("uploadify:clearCheckbox")}})},hanldMoveFile:(c,i)=>{var w;if(!(i!=null&&i.length)){e==null||e.error({title:"请勾选需要移动的附件",duration:1500});return}const h=((w=t.site)==null?void 0:w.uploadify_api.move)??"";lt(h,{cate_id:c,ids:i}).then(k=>{H("uploadify:files"),H("uploadify:clearSelected"),H("uploadify:clearCheckbox"),e==null||e.success({title:(k==null?void 0:k.msg)??"操作完成",duration:1500})})},hanldSelected:(c,i,h)=>{if(h===1){i[0]=c;return}if(!(i!=null&&i.length)){i==null||i.push(c);return}if(!(i!=null&&i.find(p=>p===c)))i==null||i.push(c);else for(let p=0;p<i.length;p++)if(i[p]===c){i.splice(p,1);break}},hanldCheckBox:(c,i)=>{if(!(c!=null&&c.length)){c==null||c.push(i);return}if(!(c!=null&&c.find(h=>h===i)))c==null||c.push(i);else for(let h=0;h<c.length;h++)if(c[h]===i){c.splice(h,1);break}},uploadFinish:c=>{var h,p;const i=(p=(h=c==null?void 0:c.event)==null?void 0:h.target)!=null&&p.response?JSON.parse(c.event.target.response):{msg:"上传结束",code:404};i.code===200?(H("uploadify:cateActive",{active:""}),H("uploadify:files"),e==null||e.success({title:i.msg??"上传完成",duration:1500})):e==null||e.error({title:i.msg??"上传失败",duration:1500})}}},sa=()=>({handlePageChange:e=>{const n={page:e.currentPage,limit:e.pageSize};H("uploadify:paginator",n)}}),it=t=>(Dn("data-v-8afbe171"),t=t(),Bn(),t),la={class:"h-550px flex border-solid border-t-1 mt-15px"},ra={class:"w-150px h-100% border-solid border-r-1 overflow-y-auto overflow-x-hidden"},ia={class:"text-12px flex"},ca=it(()=>R("span",{class:"pl-1"},"全部分类",-1)),ua=["title","onClick","onDblclick"],da={class:"text-12px flex"},pa={class:"pl-1 truncate"},fa={class:"h-100% flex-1 flex flex-col"},ha={class:"flex justify-between items-center h-55px px-5"},ma=it(()=>R("div",{class:"text-12px text-dark"},null,-1)),ga={class:"flex-1 overflow-y-auto overflow-x-hidden border-solid border-t-1 p-3"},_a={class:"w-100% h-120px"},va=it(()=>R("div",{class:"w-100% h-100% flex items-center justify-center bg-gray select-none"}," 图片加载失败 ",-1)),ya={class:"absolute bottom-39px left-0 right-0 text-center py-3px text-white bg-[rgba(0,0,0,0.5)] text-12px truncate"},xa={class:"flex justify-between p-2"},wa={class:"flex space-x-2"},Ca={class:"h-55px flex items-center justify-center border-solid border-t-1"},ka=$({__name:"uploadify",props:{modelValue:null,format:null,limit:{default:1}},emits:["update:init"],setup(t,{expose:e,emit:n}){var pt;const o=t,{notification:s}=D(),a=be(),r=at(),u=Q(),m=y(""),f=y([]),d=y([]),c=y([]),i=y([]),h=y([]),p=y({currentPage:1,pageSize:20,total:0,background:!0}),w=Xe(),{getCategory:k,hanldClickCate:_,hanldAddCate:C,hanldEditCate:E,hanldDelCate:P}=oa(),{getUploadifyList:B,hanldEditFile:q,hanldMoveFile:A,hanldDelFile:M,hanldDelsFile:X,hanldSelected:ie,hanldCheckBox:Se,uploadFinish:$e}=aa(),{handlePageChange:Re}=sa(),tn={[nt]:a.value??"",[ot]:r.value??""};let ut="";ut=`//${location.host}/${(pt=u.site)==null?void 0:pt.uploadify_api.upload}`;const dt=y({action:ut,headers:tn,data:{cid:m.value},showFileList:!1,multiple:!0,onFinish:G=>$e({...G})}),nn=()=>{if(!d.value.length)return s==null||s.error({title:"请选择附件再确定",duration:1500}),[];if(d.value.length>o.limit)return s==null||s.error({title:`最多选择${o.limit}个附件`,duration:1500}),[];const G=[];for(let z=0;z<h.value.length;z++){const Z=h.value[z];K(Z.id,d.value)&&G.push(Z.url)}return G};return window.addEventListener("uploadify:cateActive",G=>{const{active:z}=G.dataFul;m.value=z,dt.value.data={cid:z}}),window.addEventListener("uploadify:category",async G=>{const z=await k();i.value=z,z.forEach(Z=>{c.value.push({label:`移动至 -- ${Z==null?void 0:Z.title}`,key:Z==null?void 0:Z.id})})}),window.addEventListener("uploadify:selected",G=>{G.dataFul}),window.addEventListener("uploadify:clearSelected",G=>{d.value=[]}),window.addEventListener("uploadify:clearCheckbox",G=>{f.value=[]}),window.addEventListener("uploadify:files",async G=>{var Ee,je,De;const z=(Ee=G==null?void 0:G.dataFul)==null?void 0:Ee.cid,Z=(je=G==null?void 0:G.dataFul)==null?void 0:je.page,ce=(De=G==null?void 0:G.dataFul)==null?void 0:De.limit,le=await B({cid:z,page:Z,limit:ce});h.value=(le==null?void 0:le.data)??[],p.value.currentPage=le.current_page,p.value.pageSize=le.per_page,p.value.total=le.total}),window.addEventListener("uploadify:paginator",G=>{const{page:z,limit:Z}=G.dataFul;p.value.currentPage=z,p.value.pageSize=Z;const ce={cid:m.value,page:z,limit:Z};H("uploadify:files",ce)}),jt(async()=>{H("uploadify:category"),H("uploadify:files"),n("update:init",{exposed:w.exposed})}),e({hanldConfirmSelect:nn}),(G,z)=>{const Z=Tt,ce=_e,ft=$n,le=et,Ee=re,je=Ae,De=Rn,on=En,an=jn,sn=Ce("vxe-pager");return g(),b("div",la,[R("div",ra,[v(Z,null,{default:x(()=>[F(" 附件分类 ")]),_:1}),R("div",{class:ae(["px-10px flex justify-between cursor-pointer hover:bg-[#e5e5e5] py-15px select-none",{"bg-[#e5e5e5]":l(m)===""}]),onClick:z[0]||(z[0]=I=>l(_)(l(m),""))},[R("div",ia,[v(T,{icon:"AppstoreOutlined",color:"#666"}),ca]),v(T,{icon:"FolderAddOutlined",color:"#888",onClick:l(C)},null,8,["onClick"])],2),(g(!0),b(L,null,ne(l(i),(I,ze)=>(g(),b("div",{key:ze,title:I.title,class:ae(["px-10px flex justify-between cursor-pointer hover:bg-[#e5e5e5] py-15px select-none",{"bg-[#e5e5e5]":l(m)===I.id}]),onClick:he=>l(_)(l(m),I.id),onDblclick:he=>l(E)(I.id)},[R("div",da,[v(T,{icon:"FolderOpenTwotone",color:"#666"}),R("span",pa,U(I.title),1)]),v(T,{icon:"DeleteFilled",color:"#666",onClick:he=>l(P)(I.id)},null,8,["onClick"])],42,ua))),128))]),R("div",fa,[R("div",ha,[ma,v(Ee,{align:"center"},{default:x(()=>[R("div",null,[v(ft,V(W(l(dt))),{default:x(()=>[v(ce,{type:"success"},{icon:x(()=>[v(T,{icon:"UploadOutlined"})]),default:x(()=>[F(" 上传 ")]),_:1})]),_:1},16)]),R("div",null,[v(le,{trigger:"hover",options:l(c),onSelect:z[1]||(z[1]=I=>l(A)(I,l(f)))},{default:x(()=>[v(ce,{type:"warning"},{icon:x(()=>[v(T,{icon:"RotateLeftOutlined"})]),default:x(()=>[F(" 移动 ")]),_:1})]),_:1},8,["options"])]),R("div",null,[v(ce,{type:"error",onClick:z[2]||(z[2]=I=>l(X)(l(f)))},{icon:x(()=>[v(T,{icon:"RestFilled"})]),default:x(()=>[F(" 删除 ")]),_:1})])]),_:1})]),R("div",ga,[v(an,{cols:5,"y-gap":10,"x-gap":12},{default:x(()=>[(g(!0),b(L,null,ne(l(h),(I,ze)=>(g(),S(on,{key:ze},{default:x(()=>[R("div",{class:ae(["relative border-solid border-1",l(K)(I.id,l(d)??[])?"border-red":"border-gray"])},[R("div",_a,[v(je,{class:"w-100% h-100% cursor-pointer !block",src:I.url,"preview-disabled":!0,onClick:he=>l(ie)(I.id,l(d),o.limit)},{placeholder:x(()=>[va]),_:2},1032,["src","onClick"])]),R("div",ya,U(I.title),1),R("div",xa,[R("div",null,[v(De,{checked:l(K)(I.id,l(f)),value:I.id,onClick:he=>l(Se)(l(f),I.id)},null,8,["checked","value","onClick"])]),R("div",wa,[v(T,{icon:"EditOutlined",class:"cursor-pointer",color:"#555",title:"修改",size:20,onClick:he=>l(q)(I.id)},null,8,["onClick"]),v(T,{icon:"DeleteOutlined",class:"cursor-pointer",color:"#555",title:"删除",size:20,onClick:he=>l(M)(I.id)},null,8,["onClick"])])])],2)]),_:2},1024))),128))]),_:1})]),R("div",Ca,[v(sn,ee(l(p),{layouts:["PrevJump","PrevPage","Number","NextPage","NextJump","Sizes","FullJump","Total"],onPageChange:l(Re)}),null,16,["onPageChange"])])])])}}});const ba=te(ka,[["__scopeId","data-v-8afbe171"]]),Pa={class:"absolute top-1px right-1px w-20px h-20px rounded-3px bg-[rgba(0,0,0,.45)] text-12px cursor-pointer pr-5px select-none flex items-center justify-center"},Sa=$({__name:"index",props:{modelValue:null,format:null,limit:{default:1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,{dialog:o}=D(),s=y(),a=y(),r=y({submitBtn:{type:"success",content:"确定",show:!0},resetBtn:{type:"warning",content:"关闭",show:!0}}),u=f=>{const d=[...n.modelValue];d.splice(f,1),e("update:modelValue",d)},m=()=>{a.value=o==null?void 0:o.create({title:"附件管理器",class:"pro-admin-dialog",style:{width:"45%"},showIcon:!1,maskClosable:!1,content:()=>Y(ba,{...n,"onUpdate:init":f=>{s.value=f.exposed}}),action:()=>Y(ve,{extraConfig:r.value,"onUpdate:submit":()=>{var d;const f=s.value.hanldConfirmSelect();f.length&&(e("update:modelValue",f),(d=a.value)==null||d.destroy())},"onUpdate:rest":()=>{var f;(f=a.value)==null||f.destroy()}})})};return Pt(()=>{typeof n.modelValue=="string"&&n.modelValue!==""&&e("update:modelValue",[n.modelValue])}),(f,d)=>{const c=Ae,i=re;return g(),S(i,null,{default:x(()=>[(g(!0),b(L,null,ne(t.modelValue,(h,p)=>(g(),b("div",{key:p,class:"flex items-center justify-center w-50px h-50px relative cursor-pointer border-1 border-solid rounded-3px bg-[#f5f5f5] border-[#888]"},[v(c,{src:h},null,8,["src"]),R("div",Pa,[v(T,{icon:"DeleteFilled",class:"!w-12px",size:16,color:"#fff",onClick:w=>u(p)},null,8,["onClick"])])]))),128)),R("div",{class:"flex items-center justify-center w-50px h-50px relative cursor-pointer border-1 border-solid rounded-3px bg-[#f5f5f5] border-[#888]",onClick:m},[v(T,{icon:"FolderOpenOutlined",size:28,color:"#555"})])]),_:1})}}}),$a=$({__name:"index",props:{modelValue:null,style:{default:{}}},setup(t){return(e,n)=>(g(),b("div",V(W(t.style)),U(t.modelValue),17))}}),Ra={javascript:Tn,php:An,python:Un,java:Gn,css:Fn,xml:On},Ea=t=>(ht.registerLanguage(t,Ra[t]),ht),ja={class:"w-100%"},Da=["innerHTML"],Ba=$({__name:"index",props:{modelValue:null,language:{default:"javascript"},showLineNumbers:{type:Boolean}},setup(t){const e=t,o=Ea(e.language).highlight(e.modelValue,{language:e.language}).value;return(s,a)=>(g(),b("div",ja,[R("pre",null,[F("    "),R("code",{class:"hljs",innerHTML:l(o)},null,8,Da),F(`
    `)])]))}});const Ta=te(Ba,[["__scopeId","data-v-49fee51c"]]),yt={amap:No,bmap:Wo,icons:Qo,qmap:ta,remote:na,uploadify:Sa,info:$a,HCode:Ta};function Aa(t){Object.keys(yt).forEach(e=>{t.component(e,yt[e])})}const Ua={class:"h-100%"},Zt=$({__name:"index",props:{api:null,method:{default:"GET"},ajaxParams:{default:{}},isModal:{type:Boolean,default:!1}},emits:["update:init","update:submit","update:success","update:rest","update:error"],setup(t,{expose:e,emit:n}){const o=t,{fApi:s,formData:a,formConfig:r,formRule:u,hanldSubmit:m,hanldReset:f}=Ho(o,n);Go(),mt.use(Aa);const d=mt.$form();return e({hanldSubmit:m,hanldReset:f}),(c,i)=>(g(),b("div",Ua,[v(l(d),{api:l(s),"onUpdate:api":i[0]||(i[0]=h=>Me(s)?s.value=h:null),modelValue:l(a),"onUpdate:modelValue":i[1]||(i[1]=h=>Me(a)?a.value=h:null),rule:l(u),option:l(r)},null,8,["api","modelValue","rule","option"])]))}}),Ga={class:"h-550px overflow-x-hidden overflow-y-auto p-5"},ct=$({__name:"popup",setup(t){const e=de();return(n,o)=>(g(),b("div",Ga,[v(Zt,V(W(l(e))),null,16)]))}}),Fa=(t,e,n)=>{const{notification:o}=D();if(!(n!=null&&n.file))return o==null||o.error({title:"导出数据失败，缺少[file]地址",duration:2e3}),Promise.reject(new Error("导出数据失败，缺少导出地址"));J(n==null?void 0:n.file,{responseType:"blob"}).then(s=>{zn.saveFile({filename:t,type:e,content:s.data})})},Oa=({vxeGridConfig:t,options:e,xGrid:n})=>{var r;const{notification:o}=D();if(!((r=t.exportConfig)!=null&&r.api))return o==null||o.error({title:"请设置请求API",duration:1500}),Promise.reject(new Error("请设置请求API"));const s=n==null?void 0:n.getProxyInfo(),a={format:e.type??"xlsx",filename:e.filename??"导出文件",sheetName:e.sheetName??"",isHeader:e.isHeader??!1,original:e.original??!1,mode:e.mode??"all",pager:s?s.pager:null,ids:e.mode==="selected"?e.data.map(u=>u.id):[],fields:e.columns.map(u=>({field:u.field,title:u.title}))};return new Promise(u=>{var d;const m={method:"POST",data:{...a}},f=((d=t.exportConfig)==null?void 0:d.api)??"";J(f,m).then(c=>{const{data:i}=c;Fa(a.filename,a.format,i),u(c)})})},za=({vxeGridConfig:t,file:e,xGrid:n})=>{const{notification:o}=D(),s=new FormData;return s.append("file",e),new Promise(a=>{var m;const r=((m=t.importConfig)==null?void 0:m.api)??"";J(r,{method:"POST",data:s}).then(f=>{const{msg:d}=f;o==null||o.success({title:d??"操作成功",duration:1500}),n==null||n.commitProxy("query"),a(f)}).catch(f=>{console.error("导入失败",f)})})},Ha=({$table:t,file:e})=>new Promise(n=>{const o=new FileReader;o.onload=s=>{const a=s.target?s.target.result:"",r=Hn(a,{type:"binary"}),u=qn.sheet_to_json(r.Sheets.Sheet1);t.loadData(u),n(u)},o.readAsBinaryString(e)}),qa=t=>{var e,n;return(e=t.vxeGridConfig.importConfig)!=null&&e.api&&((n=t.vxeGridConfig.importConfig)!=null&&n.isRemote)?za(t):Ha(t)},Ia=async({options:t})=>{const e=t.form,n=t.page,o=t.sort,s=t.filters,a=N.currentRoute.value,r=y({method:"GET",params:{page:n.currentPage??1,limit:n.pageSize??20,...(a==null?void 0:a.query)??{}},data:{...e}});return JSON.stringify(o)!=="{}"&&(r.value.params.field=o.field,r.value.params.order=o.order),s.forEach(({field:u,values:m})=>{r.value.params={...r.value.params,[u]:m.join(",")}}),new Promise((u,m)=>{const f=Ge();J(f,r.value).then(d=>{u(d)}).catch(d=>{m(d)})})},Na=(t,e,n,o)=>{const{notification:s}=D();if(e.length<=0){s==null||s.error({title:"请先导入数据",duration:1500});return}if(!t){s==null||s.error({title:"未设置导入API接口",duration:1500});return}st(t,{import:n,data:e}).then(r=>{var u;(u=o.xGrid)==null||u.commitProxy("query"),s==null||s.success({title:(r==null?void 0:r.msg)??"操作成功",duration:1500})})},Ma=t=>{me.commands.add("importAllData",e=>{var a;const{$table:n}=e,o=n==null?void 0:n.getTableData(),s=o==null?void 0:o.fullData;Na(((a=t.vxeTableConfig.importConfig)==null?void 0:a.api)??"",s,"all",t)})},Va=t=>{const{notification:e}=D(),n=y(),o=y({}),s=y({active:"",field:"",list:[]}),a=y([]),r=y([]),u={method:t.method,params:{},data:{}};u.method==="GET"?u.params={...t.ajaxParams}:u.data={...t.ajaxParams},J(t.api,u).then(d=>{const c=d.data;o.value=c.tableConfig,s.value=c.tabsConfig,a.value=c.rightButtonList,r.value=c.topButtonList;const i={...o.value.toolbarConfig,slots:{buttons:"topButtonList"}};o.value.toolbarConfig=i,i!=null&&i.import&&(o.value.importConfig={...o.value.importConfig,remote:!0,importMethod:h=>qa({...h,vxeGridConfig:o.value,xGrid:n.value})}),i.export&&(o.value.exportConfig={...o.value.exportConfig,remote:!0,exportMethod:h=>Oa({...h,vxeGridConfig:o.value,xGrid:n.value})}),o.value.proxyConfig={...o.value.proxyConfig,ajax:{query:(h,p)=>Ia({options:h,xGrid:n.value,extra:p,vxeGridConfig:o.value})}}});const m=(d,c)=>{var i;if(!d){e==null||e.error({title:"请设置请求API接口",duration:1500}),(i=n.value)==null||i.commitProxy("query");return}lt(d,c).then(()=>{var h;(h=n.value)==null||h.commitProxy("query")})},f=({row:d,column:c})=>{var w,k,_;const i=((k=(w=o.value)==null?void 0:w.rowConfig)==null?void 0:k.keyField)??"id",h=d[c==null?void 0:c.field],p={[i]:d[i],keyField:i,field:c==null?void 0:c.field,value:h};m((_=c==null?void 0:c.params)==null?void 0:_.api,p)};return Ma({xGrid:n.value,vxeTableConfig:o.value}),{xGrid:n,vxeGridConfig:o,tabsConfig:s,rightButtonList:a,topButtonList:r,hanldEditClose:f}},Wa=$({__name:"icons",props:{row:null,column:null},setup(t){const n=t.column.params;return n!=null&&n.type&&delete n.type,(o,s)=>(g(),S(T,ee({icon:t.row[t.column.field]},l(n)),null,16,["icon"]))}}),La=$({__name:"image",props:{column:null,row:null},setup(t){var r;const e=t,n=(u,m)=>{let f=u,d=0;function c(){f=f[m[d]],d++,d<m.length&&f&&c()}return c(),f},o=e.column.field;let s=y();if(o.includes(".")){const u=o.split(".");s=n(e.row,u)}else s=e.row[o];const a=y(e.column.params);return a!=null&&a.type&&delete a.value.type,(r=a.value)!=null&&r.style||(a.value.style={width:"35px",height:"30px"}),(u,m)=>{const f=Ae;return l(s)?(g(),S(f,ee({key:0,src:l(s)},l(a)),null,16,["src"])):j("",!0)}}}),Ja=$({__name:"money",props:{row:null,column:null},setup(t){var s;const n=y(((s=t.column)==null?void 0:s.params)??{}),o=y("￥");return n!=null&&n.format&&(o.value=n==null?void 0:n.format,n==null||delete n.format),(a,r)=>(g(),b("div",V(W(l(n))),U(l(o))+U(l(gt).commafy(l(gt).toNumber(t.row[t.column.field]),{digits:2})),17))}}),Za=$({__name:"swtich",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){const e=t,{notification:n}=D(),o=y({}),s=({focused:r,checked:u})=>{var m,f,d,c;return u?o.value=((f=(m=e.column)==null?void 0:m.params)==null?void 0:f.checked)??{}:o.value=((c=(d=e.column)==null?void 0:d.params)==null?void 0:c.unchecked)??{},o.value},a=r=>{var i,h,p,w,k;const u=((h=(i=e.vxeGridConfig)==null?void 0:i.rowConfig)==null?void 0:h.keyField)??"id",m={[u]:e.row[u],keyField:u,field:(p=e.column)==null?void 0:p.field,value:r},f=Ge("rowEdit",!0),d=((w=e.column.params)==null?void 0:w.api)??f,c=y({method:((k=e.column.params)==null?void 0:k.method)??"PUT",params:{},data:{}});c.value.method==="GET"?c.value.params={...m}:c.value.data={...m},J(d,c.value).then(_=>{e.xGrid.commitProxy("query"),n==null||n.success({title:(_==null?void 0:_.msg)??"操作成功",duration:1500})})};return(r,u)=>{var f,d,c,i,h,p;const m=In;return g(),S(m,{"rail-style":s,"default-value":t.row[t.column.field],"checked-value":(c=(d=(f=t.column)==null?void 0:f.params)==null?void 0:d.checked)==null?void 0:c.value,"unchecked-value":(p=(h=(i=t.column)==null?void 0:i.params)==null?void 0:h.unchecked)==null?void 0:p.value,"on-update:value":a},{checked:x(()=>{var w,k,_;return[F(U((_=(k=(w=t.column)==null?void 0:w.params)==null?void 0:k.checked)==null?void 0:_.text),1)]}),unchecked:x(()=>{var w,k,_;return[F(U((_=(k=(w=t.column)==null?void 0:w.params)==null?void 0:k.unchecked)==null?void 0:_.text),1)]}),icon:x(()=>{var w,k,_,C;return[(k=(w=t.column)==null?void 0:w.params)!=null&&k.icon?(g(),S(T,{key:0,icon:(C=(_=t.column)==null?void 0:_.params)==null?void 0:C.icon},null,8,["icon"])):j("",!0)]}),"checked-icon":x(()=>{var w,k,_,C,E,P;return[(_=(k=(w=t.column)==null?void 0:w.params)==null?void 0:k.checked)!=null&&_.icon?(g(),S(T,{key:0,icon:(P=(E=(C=t.column)==null?void 0:C.params)==null?void 0:E.checked)==null?void 0:P.icon},null,8,["icon"])):j("",!0)]}),"unchecked-icon":x(()=>{var w,k,_,C,E,P;return[(_=(k=(w=t.column)==null?void 0:w.params)==null?void 0:k.unchecked)!=null&&_.icon?(g(),S(T,{key:0,icon:(P=(E=(C=t.column)==null?void 0:C.params)==null?void 0:E.unchecked)==null?void 0:P.icon},null,8,["icon"])):j("",!0)]}),_:1},8,["default-value","checked-value","unchecked-value"])}}}),Ya={key:0,class:"pt-2"},Ka={class:"bg-white flex"},Qa=["onClick"],Xa={class:"pl-1"},es=$({__name:"tabs",props:{xGrid:null,vxeGridConfig:null,tabsConfig:null},setup(t){var m;const e=t,n=se(),o=Qe(),s=y({inline:!0,size:1,...((m=e.tabsConfig)==null?void 0:m.space)??{}}),a=n==null?void 0:n.query[e.tabsConfig.field],r=y(a??e.tabsConfig.active),u=f=>{o.push({query:{[e.tabsConfig.field]:f.value}})};return(f,d)=>{const c=re;return t.tabsConfig.list.length>0?(g(),b("div",Ya,[R("div",Ka,[v(c,V(W(l(s))),{default:x(()=>[(g(!0),b(L,null,ne(t.tabsConfig.list,(i,h)=>(g(),b("div",{key:h,class:ae(["flex items-center justify-center p-3 select-none hover:bg-bluegray hover:text-white cursor-pointer",{"bg-bluegray text-white cursor-pointer":l(r)===(i==null?void 0:i.value)}]),onClick:p=>u(i)},[i!=null&&i.icon?(g(),S(T,{key:0,icon:i==null?void 0:i.icon},null,8,["icon"])):j("",!0),R("span",Xa,U((i==null?void 0:i.label)??"错误"),1)],10,Qa))),128))]),_:1},16)])])):j("",!0)}}}),ts=$({__name:"tags",props:{row:null,column:null},setup(t){var a,r,u,m,f,d,c;const e=t,n=y("标签出错"),o=y({}),s=e.row[(a=e.column)==null?void 0:a.field];return(u=(r=e.column)==null?void 0:r.params)!=null&&u.options&&(n.value=(f=(m=e.column)==null?void 0:m.params)==null?void 0:f.options[s]),(c=(d=e.column)==null?void 0:d.params)!=null&&c.style&&(o.value=e.column.params.style[s]),(i,h)=>{const p=Nn;return g(),S(p,V(W(l(o))),{default:x(()=>[F(U(l(n)),1)]),_:1},16)}}}),ns=$({__name:"remote",props:{vxeGridConfig:null,xGrid:null,column:null,row:null},setup(t){var a,r,u;const e=t,n=y((r=(a=e.column)==null?void 0:a.params)==null?void 0:r.file),o=((u=e.column)==null?void 0:u.field)??"",s=y(e.row[o]??"");return(m,f)=>(g(),S(l(fe),ee({file:l(n)},{modelValue:l(s),column:t.column,row:t.row}),null,16,["file"]))}}),Oe=(t,e)=>{let n={};for(const o in t){const s=t[o]??"id";n={...n,[s]:e[o]??""}}return n},os=({xGrid:t,vxeGridConfig:e,button:n,row:o,column:s})=>{var d,c,i,h,p,w,k;const a=N.currentRoute.value,{notification:r}=D(),u={method:((d=n.pageData)==null?void 0:d.method)??"GET",params:{},data:{}};let f={...((c=n==null?void 0:n.pageData)==null?void 0:c.queryParams)??{},...a.query};if(o&&s&&K(JSON.stringify((i=n==null?void 0:n.pageData)==null?void 0:i.aliasParams),["[]","{}"])){const _=((h=e==null?void 0:e.rowConfig)==null?void 0:h.keyField)??"id";f={...f,[_]:o[_]}}K(JSON.stringify((p=n==null?void 0:n.pageData)==null?void 0:p.aliasParams),["[]","{}"])||(f={...f,...Oe((w=n==null?void 0:n.pageData)==null?void 0:w.aliasParams,o)}),u.method==="GET"?u.params={...f}:u.data={...f},J(((k=n.pageData)==null?void 0:k.api)??"",u).then(_=>{t==null||t.commitProxy("query"),r==null||r.success({title:(_==null?void 0:_.msg)??"操作成功",duration:1500})})},xt=({vxeGridConfig:t,button:e,row:n,column:o})=>{var m,f,d,c,i,h,p,w;const{notification:s}=D();if(!((m=e==null?void 0:e.pageData)!=null&&m.path)){s==null||s.error({title:"缺少跳转地址",duration:1500});return}const a=N.currentRoute.value;let u={...((f=e==null?void 0:e.pageData)==null?void 0:f.queryParams)??{},...a.query};if(n&&o&&K(JSON.stringify((d=e==null?void 0:e.pageData)==null?void 0:d.aliasParams),["[]","{}"])){const k=((c=t==null?void 0:t.rowConfig)==null?void 0:c.keyField)??"id";u={...u,[k]:n[k]}}K(JSON.stringify((i=e==null?void 0:e.pageData)==null?void 0:i.aliasParams),["[]","{}"])||(u={...u,...Oe((h=e==null?void 0:e.pageData)==null?void 0:h.aliasParams,n)}),(p=e.pageData)!=null&&p.isBack&&(u={...u,isBack:1}),N.push({path:(w=e==null?void 0:e.pageData)==null?void 0:w.path,query:{...u}})},as=({xGrid:t,vxeGridConfig:e,button:n,row:o,column:s})=>{const{dialog:a}=D();a==null||a.create({...(n==null?void 0:n.message)??{},maskClosable:!1,onPositiveClick:()=>{os({xGrid:t,vxeGridConfig:e,button:n,row:o,column:s})}})},Le=y({submitBtn:{},resetBtn:{}}),Te=y({hanldSubmit:()=>{},hanldReset:()=>{}}),we=y(),ss=({vxeGridConfig:t,button:e,row:n,column:o})=>{var m,f,d,c,i,h,p,w,k,_;const s=N.currentRoute.value;let a,r={},u={...s.query};if(JSON.stringify((m=e.pageData)==null?void 0:m.queryParams)!=="{}"&&(u={...(f=e.pageData)==null?void 0:f.queryParams}),n&&o&&K(JSON.stringify((d=e==null?void 0:e.pageData)==null?void 0:d.aliasParams),["[]","{}"])){const C=((c=t==null?void 0:t.rowConfig)==null?void 0:c.keyField)??"id";u={...u,[C]:n[C]}}switch(K(JSON.stringify((i=e==null?void 0:e.pageData)==null?void 0:i.aliasParams),["[]","{}"])||(u={...u,...Oe((h=e==null?void 0:e.pageData)==null?void 0:h.aliasParams,n)}),(p=e.pageData)==null?void 0:p.type){case"table":a=Kt,r={api:((w=e==null?void 0:e.pageData)==null?void 0:w.api)??""};break;case"remote":a=fe,r={file:((k=e==null?void 0:e.pageData)==null?void 0:k.path)??"",modal:(e==null?void 0:e.pageData.modal)??!1,ajaxParams:u,"onUpdate:closeWin":()=>{var C;(C=we.value)!=null&&C.destroy&&we.value.destroy()}};break;default:a=ct,r={api:((_=e==null?void 0:e.pageData)==null?void 0:_.api)??"",method:e.pageData.method??"GET",ajaxParams:u,"onUpdate:init":C=>{var E,P;Te.value.hanldSubmit=(E=C==null?void 0:C.exposed)==null?void 0:E.hanldSubmit,Te.value.hanldReset=(P=C==null?void 0:C.exposed)==null?void 0:P.hanldReset,Le.value.submitBtn=C==null?void 0:C.response.extraConfig.submitBtn,Le.value.resetBtn=C==null?void 0:C.response.extraConfig.resetBtn},"onUpdate:success":()=>{var C;(C=we.value)!=null&&C.destroy&&we.value.destroy()},"onUpdate:rest":()=>{},"onUpdate:error":()=>{}};break}return{hpComponent:a,componentAttrs:r}},ls=t=>{var a,r;const{dialog:e}=D(),{hpComponent:n,componentAttrs:o}=ss(t),s={...((a=t.button)==null?void 0:a.message)??{},class:"pro-admin-dialog",content:()=>Y(n,{...o}),onAfterLeave:()=>{var u;(u=t.xGrid)==null||u.commitProxy("query")}};((r=t.button.pageData)==null?void 0:r.type)==="form"&&(s.action=()=>Y(ve,{extraConfig:Le.value,"onUpdate:submit":()=>{Te.value.hanldSubmit()},"onUpdate:rest":()=>{Te.value.hanldReset()}})),we.value=e==null?void 0:e.create(s)},rs=t=>{var f,d,c,i,h,p,w,k,_,C,E,P,B,q;const e=((d=(f=t.button)==null?void 0:f.pageData)==null?void 0:d.api)??"/",n=((c=t.button.pageData)==null?void 0:c.method)??"GET";let o=((i=t.button.pageData)==null?void 0:i.path)??"";const{notification:s}=D(),a=N.currentRoute.value,r={method:n,params:{},data:{}};let m={...((p=(h=t.button)==null?void 0:h.pageData)==null?void 0:p.queryParams)??{},...a.query};if(t.row&&t.column&&K(JSON.stringify((k=(w=t.button)==null?void 0:w.pageData)==null?void 0:k.aliasParams),["[]","{}"])){const A=((C=(_=t.vxeGridConfig)==null?void 0:_.rowConfig)==null?void 0:C.keyField)??"id";m={...m,[A]:t.row[A]}}K(JSON.stringify((P=(E=t.button)==null?void 0:E.pageData)==null?void 0:P.aliasParams),["[]","{}"])||(m={...m,...Oe((q=(B=t.button)==null?void 0:B.pageData)==null?void 0:q.aliasParams,t.row)}),r.method==="GET"?r.params={...m}:r.data={...m},J(e,r).then(A=>{const{data:M}=A;if(!o){if(!(M!=null&&M.url)){s==null||s.error({title:"缺少跳转地址",duration:1500});return}o=M.url}Ot(o)||(o=`//${location.host}/${o}`),window.open(o,"about:blank")})},Je=t=>{var e,n,o,s;((e=t.button.pageData)==null?void 0:e.type)==="page"?xt(t):((n=t.button.pageData)==null?void 0:n.type)==="link"?rs(t):((o=t.button.pageData)==null?void 0:o.type)==="confirm"?as(t):(s=t.button.pageData)!=null&&s.modal?ls(t):xt(t)},is=()=>{var o;const t=ye(),e=(t==null?void 0:t.routerRecords)??[],n=[];for(const s of e){const a=`${(o=s.meta)==null?void 0:o.moduleName}${s.path}`;n.push(a)}return n},Yt=t=>{const e=is();return K(t,e)},cs=$({__name:"right-button",props:{xGrid:null,vxeGridConfig:null,column:null,row:null,rightButtonList:null},setup(t){var i,h,p,w,k;const e=t,n=O(()=>_=>{var A,M,X,ie,Se,$e,Re;const C=((A=_.pageData)==null?void 0:A.api)??"";if(!Yt(C))return!1;const E=((X=(M=_==null?void 0:_.pageData)==null?void 0:M.params)==null?void 0:X.where)??"",P=(Se=(ie=_==null?void 0:_.pageData)==null?void 0:ie.params)==null?void 0:Se.field,B=(Re=($e=_==null?void 0:_.pageData)==null?void 0:$e.params)==null?void 0:Re.value;if(P===void 0&&B===void 0)return!0;if(P===void 0||P===""||P&&(B===void 0||B===""))return!1;const q=e.row[P];switch(E){case"!=":return B!==q;case"in":return B instanceof Array&&K(q,B);case"notIn":return B instanceof Array&&!K(q,B);default:return B===q}}),o=()=>{const _=e.rightButtonList,C=[];return _.forEach(E=>{var B;const P={label:E.title,key:E.field};(B=E.button)!=null&&B.icon&&(P.icon=()=>{var q;return Y(T,{icon:(q=E.button)==null?void 0:q.icon})}),C.push(P)}),C},s=_=>{const{notification:C}=D(),P=e.rightButtonList.find(B=>B.field===_);if(!P){C==null||C.error({title:"按钮数据错误",duration:1500});return}Je({xGrid:e.xGrid,button:P,row:e.row,column:e.column,vxeGridConfig:e.vxeGridConfig})},a=y(((i=e.column.params)==null?void 0:i.group)??!1),r=y(((h=e.column.params)==null?void 0:h.trigger)??"click"),u=y(((p=e.column.params)==null?void 0:p.icon)??"MenuOutlined"),m=y(((w=e.column.params)==null?void 0:w.group_text)??"更多"),f={type:"success",size:"small"},d=y(((k=e.column.params)==null?void 0:k.group_style)??f),c=O(()=>o());return(_,C)=>{const E=T,P=_e,B=et,q=re;return g(),b("div",null,[l(a)?(g(),S(B,{key:0,trigger:l(r),options:l(c),onSelect:s},{default:x(()=>[v(P,V(W(l(d))),{icon:x(()=>[v(E,{icon:l(u)},null,8,["icon"])]),default:x(()=>[F(U(l(m))+" ",1)]),_:1},16)]),_:1},8,["trigger","options"])):(g(),S(q,{key:1,align:"center",wrap:!1},{default:x(()=>[(g(!0),b(L,null,ne(t.rightButtonList,(A,M)=>(g(),b(L,null,[l(n)(A)?(g(),S(P,ee({key:M},(A==null?void 0:A.button)??{},{onClick:X=>l(Je)({xGrid:t.xGrid,button:A,row:t.row,column:t.column,vxeGridConfig:t.vxeGridConfig})}),{icon:x(()=>{var X,ie;return[(X=A==null?void 0:A.button)!=null&&X.icon?(g(),S(T,{key:0,icon:(ie=A==null?void 0:A.button)==null?void 0:ie.icon},null,8,["icon"])):j("",!0)]}),default:x(()=>[F(" "+U(A.title),1)]),_:2},1040,["onClick"])):j("",!0)],64))),256))]),_:1}))])}}}),us={class:"flex space-x-3"},ds=$({__name:"top-button",props:{xGrid:null,column:null,topButtonList:null,vxeGridConfig:null},setup(t){const e=se(),n=O(()=>o=>{var a;const s=((a=o.pageData)==null?void 0:a.api)??"";return!!Yt(s)});return(o,s)=>{var u;const a=_e,r=re;return g(),b("div",us,[(u=l(e).query)!=null&&u.isBack?(g(),S(a,{key:0,type:"warning",onClick:l(tt)},{default:x(()=>[F(" 返回 ")]),_:1},8,["onClick"])):j("",!0),v(r,{align:"center"},{default:x(()=>[(g(!0),b(L,null,ne(t.topButtonList,(m,f)=>(g(),b("div",{key:f},[l(n)(m)?(g(),S(a,ee({key:0},(m==null?void 0:m.button)??{},{onClick:d=>l(Je)({button:m,xGrid:t.xGrid,vxeGridConfig:t.vxeGridConfig})}),{icon:x(()=>{var d,c;return[(d=m==null?void 0:m.button)!=null&&d.icon?(g(),S(T,{key:0,icon:(c=m==null?void 0:m.button)==null?void 0:c.icon},null,8,["icon"])):j("",!0)]}),default:x(()=>[F(" "+U(m.title),1)]),_:2},1040,["onClick"])):j("",!0)]))),128))]),_:1})])}}}),Kt=$({__name:"index",props:{api:null,method:{default:"GET"},ajaxParams:{default:{}}},setup(t){const e=t,{xGrid:n,vxeGridConfig:o,tabsConfig:s,rightButtonList:a,topButtonList:r,hanldEditClose:u}=Va(e);return(m,f)=>{var c;const d=Ce("vxe-grid");return(c=l(o))!=null&&c.id?(g(),S(d,ee({key:0,ref_key:"xGrid",ref:n},l(o),{class:"p-4",onEditClosed:l(u)}),{money:x(({row:i,column:h,$grid:p})=>[v(l(Ja),V(W({vxeGridConfig:l(o),row:i,column:h,xGrid:p})),null,16)]),image:x(({row:i,column:h,$grid:p})=>[v(l(La),V(W({vxeGridConfig:l(o),row:i,column:h,xGrid:p})),null,16)]),icons:x(({row:i,column:h,$grid:p})=>[v(l(Wa),V(W({vxeGridConfig:l(o),row:i,column:h,xGrid:p})),null,16)]),switch:x(({row:i,column:h,$grid:p})=>[v(l(Za),V(W({vxeGridConfig:l(o),row:i,column:h,xGrid:p})),null,16)]),tags:x(({row:i,column:h,$grid:p})=>[v(l(ts),V(W({vxeGridConfig:l(o),row:i,column:h,xGrid:p})),null,16)]),remote:x(({row:i,column:h,$grid:p})=>[v(l(ns),V(W({vxeGridConfig:l(o),row:i,column:h,xGrid:p})),null,16)]),topButtonList:x(({column:i,$grid:h})=>[v(l(ds),V(W({vxeGridConfig:l(o),topButtonList:l(r),column:i,xGrid:h})),null,16)]),top:x(({$grid:i})=>[v(l(es),V(W({vxeGridConfig:l(o),tabsConfig:l(s),xGrid:i})),null,16)]),rightButtonList:x(({row:i,column:h,$grid:p})=>[v(l(cs),V(W({vxeGridConfig:l(o),rightButtonList:l(a),row:i,column:h,xGrid:p})),null,16)]),_:1},16,["onEditClosed"])):j("",!0)}}}),ps={class:"h-100% flex items-center"},fs={class:"flex select-none cursor-pointer"},hs={class:"pl-1 text-12px text-#555"},ms={class:"flex pl-1"},gs={class:"pl-1"},_s={key:0,class:"flex pl-1"},vs={class:"pl-1"},ys=$({__name:"user",setup(t){const e=ye(),n=Q(),o=se(),{dialog:s,notification:a}=D(),r=y([{label:"修改资料",key:"profile",icon:()=>Y(T,{icon:"EditTwotone"})},{label:"退出登录",key:"loginout",icon:()=>Y(T,{icon:"ExportOutlined"})}]),u=new Map,m=y({submitBtn:{},resetBtn:{}}),f=y({hanldSubmit:()=>{},hanldReset:()=>{}});u.set("profile",()=>{const c=s==null?void 0:s.create({title:"用户资料",showIcon:!1,maskClosable:!1,class:"pro-admin-dialog",style:{width:"45%"},content:()=>{var i,h;return Y(ct,{api:((h=(i=n.site)==null?void 0:i.public_api)==null?void 0:h.user_edit)??"",method:"GET",ajaxParams:{},"onUpdate:init":p=>{var w,k;f.value.hanldSubmit=(w=p==null?void 0:p.exposed)==null?void 0:w.hanldSubmit,f.value.hanldReset=(k=p==null?void 0:p.exposed)==null?void 0:k.hanldReset,m.value.submitBtn=p==null?void 0:p.response.extraConfig.submitBtn,m.value.resetBtn=p==null?void 0:p.response.extraConfig.resetBtn},"onUpdate:success":()=>{c==null||c.destroy(),e.getUserInfo()}})},action:()=>Y(ve,{extraConfig:m.value,"onUpdate:submit":()=>{var i;(i=f.value)==null||i.hanldSubmit()},"onUpdate:rest":()=>{var i;(i=f.value)==null||i.hanldReset()}})})}),u.set("loginout",()=>{s==null||s.warning({title:"温馨提示",content:"是否确认退出登录？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{yo().then(c=>{e.setToken(""),N.push({path:"/login",query:{redirect:o.fullPath}}),a==null||a.success({title:(c==null?void 0:c.msg)??"操作成功",duration:1500})})}})});const d=c=>{const i=u.get(c);typeof i=="function"&&i()};return(c,i)=>{const h=Mn,p=et;return g(),b("div",ps,[v(p,{options:l(r),onSelect:d},{default:x(()=>{var w,k,_,C,E;return[R("div",fs,[v(h,{round:"",size:35,src:(w=l(e).userInfo)==null?void 0:w.headimg},null,8,["src"]),R("div",hs,[R("div",ms,[v(T,{icon:"UserOutlined"}),R("span",gs,U((k=l(e).userInfo)==null?void 0:k.nickname),1)]),(C=(_=l(e).userInfo)==null?void 0:_.role)!=null&&C.title?(g(),b("div",_s,[v(T,{icon:"CodeSandboxOutlined"}),R("span",vs,U((E=l(e).userInfo)==null?void 0:E.role.title),1)])):j("",!0)])])]}),_:1},8,["options"])])}}}),xs=["href","target"],ws=$({__name:"side-title",props:{MenuItem:null},setup(t){var m,f;const e=t,n=O(()=>{var d;return(d=e.MenuItem)==null?void 0:d.menuTitle}),o=e.MenuItem.ajaxParams?io(e.MenuItem.ajaxParams):{},s=O(()=>e.MenuItem.path??""),a=((f=(m=e.MenuItem)==null?void 0:m.children)==null?void 0:f.find(d=>(d==null?void 0:d.show)===!0&&(d==null?void 0:d.type)!=="group"))??!1,r=O(()=>{var d;return(d=s.value)==null?void 0:d.startsWith("http")}),u=O(()=>{var d;return((d=e.MenuItem)==null?void 0:d.target)??"_blank"});return(d,c)=>{const i=Ce("router-link");return l(a)?(g(),b(L,{key:0},[F(U(l(n)),1)],64)):l(r)?(g(),b("a",{key:1,href:l(s),target:l(u)},U(l(n)),9,xs)):l(s)?(g(),S(i,{key:2,to:{path:`/${l(s)}`,query:{...l(o)}},replace:!0},{default:x(()=>[F(U(l(n)),1)]),_:1},8,["to"])):(g(),b(L,{key:3},[F(U(l(n)),1)],64))}}}),Cs={class:"panel-menu"},ks={key:0,class:"panel-two"},bs={class:"panel-title"},Ps={key:0,class:"hp-icon"},Ss={class:"title"},$s={class:"panel-list"},Rs=$({__name:"panel",props:{active:null,options:null},setup(t){const e=t,n=o=>o.key===e.active?!0:o!=null&&o.children?!!o.children.find(s=>n(s)):!1;return(o,s)=>(g(),b("div",Cs,[(g(!0),b(L,null,ne(t.options,(a,r)=>{var u;return g(),b(L,{key:r},[(u=a==null?void 0:a.children)!=null&&u.length&&a.type==="group"&&a.show?(g(),b("div",ks,[R("div",bs,[a!=null&&a.icon?(g(),b("div",Ps,[(g(),S(xe(a.icon)))])):j("",!0),R("div",Ss,[(g(),S(xe(a.label)))])]),R("div",$s,[(g(!0),b(L,null,ne(a.children,(m,f)=>(g(),b(L,{key:f},[m.show?(g(),b("div",{key:0,class:ae(["panel-item",{"panel-active":n(m)}])},[(g(),S(xe(m.label)))],2)):j("",!0)],64))),128))])])):a.show?(g(),b("div",{key:1,class:ae(["item",{"is-active":n(a)}])},[(g(),S(xe(a.label)))],2)):j("",!0)],64)}),128))]))}});const Es=te(Rs,[["__scopeId","data-v-0811acd7"]]),js={class:"pro-admin-mix-tabs overflow-x-auto flex"},Ds={class:"w-80px bg-dark text-white select-none text-12px"},Bs=["onClick"],Ts={class:"text-center py-3"},As={key:0,class:"flex-1"},Us=$({__name:"index",setup(t){ke(c=>({"42e6362c":l(d)}));const e=de(),n=Qe(),o=(c,i)=>c.find(h=>h.key===i?h:o((h==null?void 0:h.children)??[],i)),s=y((e==null?void 0:e.value)??""),a=y(e.options??[]),r=y([o(a.value??[],s.value)]),u=O(()=>c=>!!o(c??[],s.value)),m=c=>{const i=c[0];return i&&(i==null?void 0:i.type)!=="group"&&(i!=null&&i.show)?i:m(i.children??[])},f=c=>{const i=m((c==null?void 0:c.children)??[]);let h={};typeof i.ajaxParams=="object"&&(h={...i.ajaxParams}),s.value=String((i==null?void 0:i.key)??""),r.value=[c],n.push({path:`/${i==null?void 0:i.path}`,query:{...h}})};Ke(()=>e.value,c=>{s.value=String(c)});const d=O(()=>`calc(100vh - ${e["header-height"]}px)`);return(c,i)=>{const h=Tt;return g(),b("div",js,[R("div",Ds,[(g(!0),b(L,null,ne(l(a),(p,w)=>(g(),b("div",{key:w,class:ae(["flex items-center justify-center cursor-pointer hover:bg-blueGray hover:text-white",{"bg-gray text-white":l(u)((p==null?void 0:p.children)??[])}]),onClick:k=>f(p)},[R("div",Ts,[p.menuIcon?(g(),S(T,{key:0,icon:p.menuIcon,size:22},null,8,["icon"])):j("",!0),R("div",null,U(p.menuTitle),1)])],10,Bs))),128))]),l(e).collapsed?j("",!0):(g(),b("div",As,[(g(!0),b(L,null,ne(l(r),(p,w)=>(g(),b("div",{key:w},[v(h,{class:"m-0"},{default:x(()=>[F(U(p==null?void 0:p.menuTitle),1)]),_:2},1024),v(Es,{options:(p==null?void 0:p.children)??[],active:l(s)},null,8,["options","active"])]))),128))]))])}}});const Gs=te(Us,[["__scopeId","data-v-a68a66f7"]]),Fs={class:"flex items-center justify-center"},Os=$({__name:"index",props:{layout:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null,siderWidth:null,collapsed:{type:Boolean},siderCollapsedWidth:null,collapsedIconSize:{default:22},showSiderTrigger:{type:[Boolean,String]},inverted:{type:Boolean},active:null,options:null,expandedKeys:null},emits:["update:collapsed","update:active","update:expandedKeys"],setup(t){const e=t;ke(a=>({c79233a2:l(n),"0b15b1cb":l(s),"416ea2e1":l(o)}));const n=O(()=>`${e.headerHeight}px`),o=O(()=>`${e.footerHeight}px`),s=O(()=>`calc(100vh - ${e.headerHeight}px - ${e.footerHeight}px)`);return(a,r)=>{const u=At,m=Ut,f=Gt;return g(),S(f,{"has-sider":"",class:"h-screen"},{default:x(()=>[v(l(Ve),{width:t.siderWidth,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth,"show-trigger":t.showSiderTrigger,onUpdateCollapsed:r[2]||(r[2]=d=>a.$emit("update:collapsed",d))},{default:x(()=>[R("div",Fs,[v(l(Ht),{src:t.logo,inverted:t.inverted,"header-height":t.headerHeight,"collapsed-width":t.siderCollapsedWidth},null,8,["src","inverted","header-height","collapsed-width"]),t.collapsed?j("",!0):(g(),S(l(qt),{key:0,layout:t.layout,inverted:t.inverted,"header-height":t.headerHeight,title:t.title},null,8,["layout","inverted","header-height","title"]))]),v(Gs,{value:t.active,options:t.options,inverted:t.inverted,collapsed:t.collapsed,"collapsed-icon-size":t.collapsedIconSize,"expanded-keys":t.expandedKeys,"header-height":t.headerHeight,"footer-height":t.footerHeight,"onUpdate:value":r[0]||(r[0]=d=>a.$emit("update:active",d)),"onUpdate:expandedKeys":r[1]||(r[1]=d=>a.$emit("update:expandedKeys",d))},null,8,["value","options","inverted","collapsed","collapsed-icon-size","expanded-keys","header-height","footer-height"])]),_:1},8,["width","collapsed","collapsed-width","show-trigger"]),v(f,null,{default:x(()=>[v(u,{class:"pro-admin-header-height flex items-center justify-between px-3"},{default:x(()=>[oe(a.$slots,"headerLeft",{},()=>[v(l(Wt))],!0),oe(a.$slots,"headerRight",{},()=>[v(l(Lt))],!0)]),_:3}),v(l(It),{class:"pro-admin-content-height"},{default:x(()=>[oe(a.$slots,"default",{},void 0,!0)]),_:3}),v(m,{class:"pro-admin-footer-height flex items-center justify-center"},{default:x(()=>[v(l(Vt))]),_:1})]),_:3})]),_:3})}}});const zs=te(Os,[["__scopeId","data-v-a71b2900"]]),Hs={class:"pro-admin-side-menu overflow-y-auto overflow-x-hidden"},qs=$({__name:"index",setup(t){const e=de();return(n,o)=>{const s=Vn;return g(),b("div",Hs,[v(s,ee({mode:"vertical"},l(e)),null,16)])}}});const Is=te(qs,[["__scopeId","data-v-bd821ef9"]]),Ns={class:"flex items-center justify-center"},Ms=$({__name:"index",props:{layout:null,headerHeight:{default:50},footerHeight:{default:30},logo:null,logoSize:null,title:null,siderWidth:null,collapsed:{type:Boolean},siderCollapsedWidth:null,collapsedIconSize:{default:28},showSiderTrigger:{type:[Boolean,String]},accordion:{type:Boolean},inverted:{type:Boolean},active:null,options:null,expandedKeys:null,rootIndent:null,indent:null},emits:["update:collapsed","update:active","update:expandedKeys"],setup(t){const e=t;ke(a=>({"655570f5":l(n),"65c87fc5":l(s),"0a8d2da7":l(o)}));const n=O(()=>`${e.headerHeight}px`),o=O(()=>`${e.footerHeight}px`),s=O(()=>`calc(100vh - ${e.headerHeight}px - ${e.footerHeight}px)`);return(a,r)=>{const u=At,m=Ut,f=Gt;return g(),S(f,{"has-sider":"",class:"h-screen"},{default:x(()=>[v(l(Ve),{inverted:t.inverted,width:t.siderWidth,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth,"show-trigger":t.showSiderTrigger,onUpdateCollapsed:r[2]||(r[2]=d=>a.$emit("update:collapsed",d))},{default:x(()=>[R("div",Ns,[v(l(Ht),{src:t.logo,"header-height":t.headerHeight,"collapsed-width":t.siderCollapsedWidth},null,8,["src","header-height","collapsed-width"]),t.collapsed?j("",!0):(g(),S(l(qt),{key:0,layout:t.layout,"header-height":t.headerHeight,title:t.title},null,8,["layout","header-height","title"]))]),v(l(Ve),{inverted:t.inverted,width:t.siderWidth,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth},{default:x(()=>[v(Is,{value:t.active,options:t.options,accordion:t.accordion,inverted:t.inverted,collapsed:t.collapsed,"collapsed-width":t.siderCollapsedWidth,"collapsed-icon-size":t.collapsedIconSize,"expanded-keys":t.expandedKeys,"root-indent":t.rootIndent,indent:t.rootIndent,"onUpdate:value":r[0]||(r[0]=d=>a.$emit("update:active",d)),"onUpdate:expandedKeys":r[1]||(r[1]=d=>a.$emit("update:expandedKeys",d))},null,8,["value","options","accordion","inverted","collapsed","collapsed-width","collapsed-icon-size","expanded-keys","root-indent","indent"])]),_:1},8,["inverted","width","collapsed","collapsed-width"])]),_:1},8,["inverted","width","collapsed","collapsed-width","show-trigger"]),v(f,null,{default:x(()=>[v(u,{class:"pro-admin-header-height flex items-center justify-between px-3"},{default:x(()=>[oe(a.$slots,"headerLeft",{},()=>[v(l(Wt))],!0),oe(a.$slots,"headerRight",{},()=>[v(l(Lt))],!0)]),_:3}),v(l(It),{class:"pro-admin-content-height"},{default:x(()=>[oe(a.$slots,"default",{},void 0,!0)]),_:3}),v(m,{class:"pro-admin-footer-height flex items-center justify-center"},{default:x(()=>[v(l(Vt))]),_:1})]),_:3})]),_:3})}}});const Vs=te(Ms,[["__scopeId","data-v-ffb6b8ca"]]),Ws=$({__name:"index",setup(t){const e=Q(),n=ye(),o=O(()=>n.getMenusData),{active:s}=rl(),{layout:a}=Wn(e);return(r,u)=>{var m,f;return g(),b(L,null,[l(a).layout==="mix"?(g(),S(zs,{key:0,collapsed:l(a).collapsed,"onUpdate:collapsed":u[0]||(u[0]=d=>l(a).collapsed=d),accordion:l(a).accordion,layout:l(a).layout,logo:l(a).logo,"logo-size":l(a).logoSize,title:(m=l(e).site)==null?void 0:m.web_name,"header-height":l(a).headerHeight,"footer-height":l(a).footerHeight,"sider-width":l(a).siderWidth,"sider-collapsed-width":l(a).siderCollapsedWidth,"show-sider-trigger":l(a).showSiderTrigger,inverted:l(a).inverted,active:l(s),options:l(o),"root-indent":l(a).rootIndent,indent:l(a).indent},{default:x(()=>[v(vt)]),_:1},8,["collapsed","accordion","layout","logo","logo-size","title","header-height","footer-height","sider-width","sider-collapsed-width","show-sider-trigger","inverted","active","options","root-indent","indent"])):j("",!0),l(a).layout==="side"?(g(),S(Vs,{key:1,collapsed:l(a).collapsed,"onUpdate:collapsed":u[1]||(u[1]=d=>l(a).collapsed=d),accordion:l(a).accordion,layout:l(a).layout,logo:l(a).logo,"logo-size":l(a).logoSize,title:(f=l(e).site)==null?void 0:f.web_name,"header-height":l(a).headerHeight,"footer-height":l(a).footerHeight,"sider-width":l(a).siderWidth,"sider-collapsed-width":l(a).siderCollapsedWidth,"show-sider-trigger":l(a).showSiderTrigger,inverted:l(a).inverted,active:l(s),options:l(o),"root-indent":l(a).rootIndent,indent:l(a).indent},{default:x(()=>[v(vt)]),_:1},8,["collapsed","accordion","layout","logo","logo-size","title","header-height","footer-height","sider-width","sider-collapsed-width","show-sider-trigger","inverted","active","options","root-indent","indent"])):j("",!0)],64)}}}),wt={path:"/",name:"default-router",component:Ws,redirect:void 0,children:[]},Ls=$({__name:"index",setup(t){const e=se(),n=Ge("GetTable"),o=e.meta.method,s=e.query??{};return(a,r)=>(g(),S(Kt,{api:l(n),method:l(o),"ajax-params":l(s)},null,8,["api","method","ajax-params"]))}}),Js={class:"h-100% p-4"},Zs={class:"h-100% bg-white flex flex-col"},Ys={key:0,class:"px-5 py-4"},Ks=$({__name:"index",setup(t){const e=se(),n=y(),o=y(),s=Ge(),a=e.meta.method,r={...e.query};r!=null&&r.isBack&&(r==null||delete r.isBack);const u=y({...r}),m=y({submitBtn:{},resetBtn:{}}),f=h=>{var w;const p=(w=h==null?void 0:h.response)==null?void 0:w.extraConfig;m.value=p},d=()=>{n.value.hanldSubmit()},c=()=>{n.value.hanldReset()},i=()=>{o.value.setDisabled(!1)};return(h,p)=>{var k;const w=_e;return g(),b("div",Js,[R("div",Zs,[(k=l(e).query)!=null&&k.isBack?(g(),b("div",Ys,[v(w,{type:"warning",onClick:l(tt)},{default:x(()=>[F(" 返回 ")]),_:1},8,["onClick"])])):j("",!0),v(Zt,{ref_key:"formRef",ref:n,class:"flex-1 p-5 overflow-y-auto overflow-x-hidden",api:l(s),method:l(a),"ajax-params":l(u),"onUpdate:init":f,"onUpdate:success":i,"onUpdate:rest":i,"onUpdate:error":i},null,8,["api","method","ajax-params"]),v(l(ve),{ref_key:"buttonRef",ref:o,"extra-config":l(m),"onUpdate:submit":d,"onUpdate:rest":c},null,8,["extra-config"])])])}}}),Qs={class:"h-100% p-4"},Xs=$({__name:"index",setup(t){const n=se().meta.ajaxParams;return(o,s)=>(g(),b("div",Qs,[v(fe,{file:l(n)},null,8,["file"])]))}}),el=Object.freeze(Object.defineProperty({__proto__:null,formIndex:Ks,remoteIndex:Xs,tableIndex:Ls},Symbol.toStringTag,{value:"Module"})),qe={routeView:()=>ge(()=>import("./route-view.07613a98.js"),["./route-view.07613a98.js",".pnpm.83e8b4a9.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url),blankView:()=>ge(()=>import("./blank-view.136f8ab9.js"),["./blank-view.136f8ab9.js",".pnpm.83e8b4a9.js","..\\css\\.pnpm.c37a7d79.css"],import.meta.url)},tl=t=>{if(!t)return qe.blankView;if(t in qe)return qe[t];const e=ro(t??"");return el[e]},nl=t=>{const e=[];for(const n of t)if(n.path){const o={path:`/${n.path}`,name:n.path.replace("/","_"),component:tl(n.component),redirect:n==null?void 0:n.redirect,meta:{title:n.title,path:n.path,pid:n.pid,icon:n.icon,moduleName:n.module,method:n.method,ajaxParams:n.auth_params},children:[]};(!o.children||o.children.length<1)&&delete o.children,e.push(o)}return e},ol=async()=>{const{active:t,list:e}=await wo();if(e.length>0){wt.redirect=t;const n=nl(e);return{menus:e,routes:{...wt,children:n}}}},Qt=(t,e)=>{var s;const n=[];let o=[];e?o=t.filter(a=>a.pid===e):o=t.filter(a=>!a.pid);for(const a of o){const r={key:String(a.id),menuTitle:a.title,menuIcon:a.icon,ajaxParams:a.auth_params,path:a.path,show:a.show==="1",pid:a.pid,target:a.target??"_blank",children:Qt(t,a.id)},u=(s=r==null?void 0:r.children)==null?void 0:s.filter(m=>m==null?void 0:m.show);u!=null&&u.length&&r.pid!==0&&(r.type="group"),a!=null&&a.title&&(r.label=()=>Y(ws,{MenuItem:r})),a!=null&&a.icon&&(r.icon=()=>Y(T,{icon:a==null?void 0:a.icon})),(!r.children||r.children.length<1)&&delete r.children,n.push(r)}return n},ye=St("user",()=>{const t=be(),e=y(),n=y(),o=y(),s=O(()=>Qt(o.value??[])),a=d=>{t.value=d},r=async d=>{const{notification:c}=D(),{msg:i,data:h}=await vo(d);h!=null&&h.token?(a(h.token),c==null||c.success({title:i||"登录成功",duration:1500})):c==null||c.success({title:"系统错误",content:"登录失败",duration:1500})},u=d=>{e.value=d};return{token:t,setToken:a,login:r,userInfo:e,setUserInfo:u,getUserInfo:async()=>{const{data:d}=await xo();d&&u(d)},routerRecords:n,generateDynameicRoutes:async()=>{const d=await ol();return d!=null&&d.routes&&(o.value=d.menus,n.value=d.routes.children),d==null?void 0:d.routes},menuData:o,getMenusData:s}}),al=()=>{const t=se(),e=ye(),n=$t({active:""}),o=a=>{var u;const r=(u=e.menuData)==null?void 0:u.find(m=>`/${m.path}`===a);return String(r==null?void 0:r.id)},s=a=>{n.active=o(a)};return Ke(()=>t.fullPath,()=>{s(t.path)}),{...Jn(n),updateActive:s}},[sl,ll]=Ln(al),rl=()=>ll()??{active:y(""),updateActive:()=>{}},il=$({__name:"App",setup(t){return sl(),(e,n)=>{const o=Zn,s=Ce("router-view"),a=to,r=bt;return g(),S(r,null,{default:x(()=>[v(o),v(a,null,{default:x(()=>[v(s)]),_:1})]),_:1})}}}),Ct=(t,e)=>(t.forEach(n=>{e.push(n.path)}),e),kt=t=>{for(const e of t){const n=e.remote,o={path:e.path,name:n.replace("/","_"),component:Y(fe,{file:n}),props:{file:n},meta:{title:e.title,path:e.path,pid:0,moduleName:"admin",method:"GET",ajaxParams:n}};N.addRoute(o)}},Xt="/login",ue=y(["/error","/404","/403","/500","/401"]),Ie=y([...ue.value,Xt]);let Be=!1;N.beforeEach(async(t,e,n)=>{var f,d,c,i,h;const o=be(),s=at(),a=Q(),r=ye();(f=D().loadingBar)==null||f.start();const m=(d=t.query)==null?void 0:d.token;if(m&&r.setToken(m),(c=t.query)!=null&&c.appid&&(s.value=(i=t.query)==null?void 0:i.appid),m){n({path:"/"});return}if(o.value){if(!r.userInfo&&!ue.value.includes(t.path))try{const p=await a.getSite();if(p!=null&&p.login_link&&a.setLoginLink(p==null?void 0:p.login_link),p!=null&&p.remote_url&&!Be){const k=p==null?void 0:p.remote_url;ue.value=Ct(k,ue.value),kt(k),Be=!0}await r.getUserInfo();const w=await r.generateDynameicRoutes();w&&N.addRoute(w),n({...t,replace:!0});return}catch(p){if(p instanceof Yn&&((h=p==null?void 0:p.response)==null?void 0:h.status)===401)return;n({path:"/error",query:{redirect:t.path}});return}}else{if(!Be){const p=await a.getSite();if(p!=null&&p.login_link&&a.setLoginLink(p==null?void 0:p.login_link),p!=null&&p.remote_url){const w=p==null?void 0:p.remote_url;ue.value=Ct(w,ue.value),Ie.value=[...Ie.value,...ue.value],kt(w),Be=!0,n({...t,replace:!0});return}}if(!Ie.value.includes(t.path)){n({path:Xt,query:{redirect:t.path}});return}}n()});N.afterEach(t=>{var s,a,r,u,m;(s=D().loadingBar)==null||s.finish();const n=Q(),o=(a=t.meta)==null?void 0:a.title;o?document.title=`${o} - ${(r=n.site)==null?void 0:r.web_name} v${Mt}`:(u=n.layout)!=null&&u.title&&(document.title=(m=n.layout)==null?void 0:m.title)});const cl=t=>{t.use(me),t.config.globalProperties.$XModal=me.modal,t.config.globalProperties.$XPrint=me.print,t.config.globalProperties.$XSaveFile=me.saveFile,t.config.globalProperties.$XReadFile=me.readFile},ul=Kn(),en=document.createElement("meta");en.name="naive-ui-style";document.head.appendChild(en);const Pe=Qn(il);cl(Pe);Pe.use(N);Pe.use(ul);Pe.mount("#app");rt.vue=Pe;export{te as _,ye as a,pl as b,vt as c,Mt as s,Q as u};
